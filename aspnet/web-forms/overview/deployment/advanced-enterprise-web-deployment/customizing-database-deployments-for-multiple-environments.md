---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
title: Veritabanı dağıtımları birden çok ortamlar için özelleştirme | Microsoft Docs
author: jrjlee
description: 'Bu konuda, belirli hedef ortamları için bir veritabanı özelliklerini dağıtım işleminin bir parçası uyarlamak açıklar. Not: Konu th varsayar...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: a172979a-1318-4318-a9c6-4f9560d26267
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
msc.type: authoredcontent
ms.openlocfilehash: 06f22bc9a3068ee5621df62ee5ed1bea06d7e9e6
ms.sourcegitcommit: 6784510cfb589308c3875ccb5113eb31031766b4
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/08/2018
ms.locfileid: "30881363"
---
<a name="customizing-database-deployments-for-multiple-environments"></a><span data-ttu-id="59c6d-104">Birden çok ortamlar için veritabanı dağıtımları özelleştirme</span><span class="sxs-lookup"><span data-stu-id="59c6d-104">Customizing Database Deployments for Multiple Environments</span></span>
====================
<span data-ttu-id="59c6d-105">tarafından [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="59c6d-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="59c6d-106">PDF indirin</span><span class="sxs-lookup"><span data-stu-id="59c6d-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="59c6d-107">Bu konuda, belirli hedef ortamları için bir veritabanı özelliklerini dağıtım işleminin bir parçası uyarlamak açıklar.</span><span class="sxs-lookup"><span data-stu-id="59c6d-107">This topic describes how to tailor the properties of a database to specific target environments as part of the deployment process.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="59c6d-108">Konu MSBuild.exe ve VSDBCMD.exe kullanarak bir Visual Studio 2010 veritabanı projesi dağıttığınız varsayar.</span><span class="sxs-lookup"><span data-stu-id="59c6d-108">The topic assumes that you're deploying a Visual Studio 2010 database project using MSBuild.exe and VSDBCMD.exe.</span></span> <span data-ttu-id="59c6d-109">Bu yaklaşım neden seçebilirsiniz daha fazla bilgi için bkz: [Web dağıtımı kuruluştaki](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) ve [dağıtma veritabanı projeleri](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="59c6d-109">For more information on why you might choose this approach, see [Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) and [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span>
> 
> 
> <span data-ttu-id="59c6d-110">Birden çok varış yeri için bir veritabanı projesi dağıttığınızda, genellikle her hedef ortam için veritabanı dağıtım özellikleri özelleştirmek istersiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-110">When you deploy a database project to multiple destinations, you'll often want to customize the database deployment properties for each target environment.</span></span> <span data-ttu-id="59c6d-111">Hazırlık veya üretim ortamlarında, verilerinizi korumak için artımlı güncelleştirmeler yapmak çok büyük olasılıkla olur ancak örneğin, test ortamlarında, genellikle her dağıtım veritabanını yeniden oluşturmanız.</span><span class="sxs-lookup"><span data-stu-id="59c6d-111">For example, in test environments you'd typically recreate the database on every deployment, whereas in staging or production environments you'd be a lot more likely to make incremental updates to preserve your data.</span></span>
> 
> <span data-ttu-id="59c6d-112">Bir Visual Studio 2010 veritabanı projesi dağıtım ayarları bir dağıtım yapılandırma (.sqldeployment) dosyası içinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="59c6d-112">In a Visual Studio 2010 database project, deployment settings are contained within a deployment configuration (.sqldeployment) file.</span></span> <span data-ttu-id="59c6d-113">Bu konuda ortama özgü dağıtım yapılandırma dosyaları oluşturup VSDBCMD parametre olarak kullanmak istediğinizi belirtmek nasıl yapacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-113">This topic will show you how to create environment-specific deployment configuration files and specify the one you want to use as a VSDBCMD parameter.</span></span>


<span data-ttu-id="59c6d-114">Bu konuda eğitim serileri Fabrikam Ltd. adlı kurgusal bir şirket kurumsal dağıtım gereksinimleri dayalı parçası formlar Bu öğretici seri kullanan örnek bir çözüm&#x2014; [Contact Manager çözüm](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;bir ASP.NET MVC 3 uygulama, bir Windows Communication dahil olmak üzere karmaşıklıkta gerçekçi düzeyine sahip bir web uygulaması temsil etmek için Foundation (WCF) hizmetini ve veritabanı projesi.</span><span class="sxs-lookup"><span data-stu-id="59c6d-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="59c6d-115">Bu öğreticileri merkezinde dağıtım yöntemi, açıklanan bölünmüş proje dosyası yaklaşım dayalı [proje dosyası anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md), hangi derleme süreci tarafından denetlenen içinde iki dosyaları proje&#x2014;bir içeren Her hedef ortam ve ortama özgü derleme ve dağıtım ayarları içeren bir için geçerli olan yönergeleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="59c6d-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="59c6d-116">Derleme zamanında ortama özgü proje dosyası oluşturma yönergeleri eksiksiz bir kümesini oluşturmak için ortam belirsiz proje dosyasına birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="59c6d-117">Görev genel bakış</span><span class="sxs-lookup"><span data-stu-id="59c6d-117">Task Overview</span></span>

<span data-ttu-id="59c6d-118">Bu konuda, varsayılır:</span><span class="sxs-lookup"><span data-stu-id="59c6d-118">This topic assumes that:</span></span>

- <span data-ttu-id="59c6d-119">Bölünmüş proje dosyası yaklaşımı Çözüm dağıtımı açıklandığı gibi kullandığınız [proje dosyası anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="59c6d-119">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="59c6d-120">VSDBCMD açıklandığı gibi veritabanı projenizi dağıtmanın proje dosyasından çağrılmasına [oluşturma işlemini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="59c6d-120">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="59c6d-121">Veritabanı dağıtım özellikleri hedef ortamlar arasında değişen destekleyen bir dağıtım sistemi oluşturmak için ihtiyacınız:</span><span class="sxs-lookup"><span data-stu-id="59c6d-121">To create a deployment system that supports varying the database deployment properties between target environments, you'll need to:</span></span>

- <span data-ttu-id="59c6d-122">Her hedef ortam için bir dağıtım yapılandırma (.sqldeployment) dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="59c6d-122">Create a deployment configuration (.sqldeployment) file for each target environment.</span></span>
- <span data-ttu-id="59c6d-123">Dağıtım yapılandırma dosyası bir komut satırı anahtarını belirten bir VSDBCMD komutu oluşturun.</span><span class="sxs-lookup"><span data-stu-id="59c6d-123">Create a VSDBCMD command that specifies the deployment configuration file as a command-line switch.</span></span>
- <span data-ttu-id="59c6d-124">Böylece VSDBCMD seçenekleri hedef ortam için uygun olan bir Microsoft Build Engine (MSBuild) proje dosyası VSDBCMD komutta Parametreleştirme.</span><span class="sxs-lookup"><span data-stu-id="59c6d-124">Parameterize the VSDBCMD command in a Microsoft Build Engine (MSBuild) project file, so that the VSDBCMD options are appropriate to the target environment.</span></span>

<span data-ttu-id="59c6d-125">Bu konuda her bu yordamları gerçekleştirmek nasıl yapacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-125">This topic will show you how to perform each of these procedures.</span></span>

## <a name="creating-environment-specific-deployment-configuration-files"></a><span data-ttu-id="59c6d-126">Ortama özgü dağıtım yapılandırma dosyaları oluşturma</span><span class="sxs-lookup"><span data-stu-id="59c6d-126">Creating Environment-Specific Deployment Configuration Files</span></span>

<span data-ttu-id="59c6d-127">Varsayılan olarak, bir veritabanı proje adlı bir tek dağıtım yapılandırma dosyası içerir. *Database.sqldeployment*.</span><span class="sxs-lookup"><span data-stu-id="59c6d-127">By default, a database project contains a single deployment configuration file named *Database.sqldeployment*.</span></span> <span data-ttu-id="59c6d-128">Visual Studio 2010'da bu dosyayı açarsanız, kullanabileceğiniz farklı dağıtım seçenekleri görebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="59c6d-128">If you open this file in Visual Studio 2010, you can see the different deployment options that are available to you:</span></span>

- <span data-ttu-id="59c6d-129">**Dağıtım karşılaştırma harmanlama**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-129">**Deployment comparison collation**.</span></span> <span data-ttu-id="59c6d-130">Bu, veritabanı harmanlaması projenizin kullanılıp kullanılmayacağını seçmesine olanak tanır ( *kaynak* harmanlama) veya veritabanı harmanlaması, hedef sunucunuzun ( *hedef* harmanlama).</span><span class="sxs-lookup"><span data-stu-id="59c6d-130">This lets you choose whether to use the database collation of your project (the *source* collation) or the database collation of your destination server (the *target* collation).</span></span> <span data-ttu-id="59c6d-131">Çoğu durumda, sınama ortamında veya bir geliştirme dağıttığınızda kaynak harmanlaması kullanmak istersiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-131">In most cases, you'll want to use the source collation when you deploy to a development or test environment.</span></span> <span data-ttu-id="59c6d-132">Bir hazırlık veya üretim ortamına dağıttığınızda, genellikle tüm birlikte çalışabilirlik sorunlarını önlemek için değişmeden hedef harmanlama bırakın istersiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-132">When you deploy to a staging or production environment, you'll usually want to leave the target collation unchanged to avoid any interoperability issues.</span></span>
- <span data-ttu-id="59c6d-133">**Veritabanı özellikleri dağıtma**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-133">**Deploy database properties**.</span></span> <span data-ttu-id="59c6d-134">Bu veritabanı özellikleri uygulanıp uygulanmayacağını tanımlandığı şekilde seçmenizi sağlar *Database.sqlsettings* dosya.</span><span class="sxs-lookup"><span data-stu-id="59c6d-134">This lets you choose whether to apply the database properties, as defined in the *Database.sqlsettings* file.</span></span> <span data-ttu-id="59c6d-135">Bir veritabanını ilk kez dağıttığınızda, veritabanı özellikleri dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-135">When you deploy a database for the first time, you should deploy the database properties.</span></span> <span data-ttu-id="59c6d-136">Varolan bir veritabanını güncelleştiriyorsanız özellikleri zaten yerinde olmalıdır ve onları yeniden dağıtmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="59c6d-136">If you're updating an existing database, the properties should already be in place, and you shouldn't need to deploy them again.</span></span>
- <span data-ttu-id="59c6d-137">**Her zaman veritabanı yeniden oluşturma**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-137">**Always re-create database**.</span></span> <span data-ttu-id="59c6d-138">Hedef veritabanı dağıtmak ya da hedef veritabanı getirmek için artımlı şemanızı ile güncel değişiklik her zaman yeniden oluşturulup oluşturulmayacağını seçmek bu sağlar.</span><span class="sxs-lookup"><span data-stu-id="59c6d-138">This lets you choose whether to re-create the target database every time you deploy or make incremental changes to bring the target database up to date with your schema.</span></span> <span data-ttu-id="59c6d-139">Veritabanını yeniden oluşturursanız, var olan veritabanındaki tüm verileri kaybedersiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-139">If you re-create the database, you'll lose any data in the existing database.</span></span> <span data-ttu-id="59c6d-140">Bu nedenle, genellikle bu ayar **false** hazırlık veya üretim ortamları için dağıtımlar için.</span><span class="sxs-lookup"><span data-stu-id="59c6d-140">As such, you should usually set this to **false** for deployments to staging or production environments.</span></span>
- <span data-ttu-id="59c6d-141">**Veri kaybı, artımlı dağıtım engelleme**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-141">**Block incremental deployment if data loss might occur**.</span></span> <span data-ttu-id="59c6d-142">Bu dağıtım veritabanı şeması değişiklik veri kaybına neden olup olmayacağını durması gerektiğini olup olmadığını seçmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="59c6d-142">This lets you choose whether deployment should stop if a change to the database schema will cause the loss of data.</span></span> <span data-ttu-id="59c6d-143">Genellikle bu ayar **true** müdahale ve herhangi bir önemli veri koruma olanağı vermek için bir üretim ortamında, dağıtılacak.</span><span class="sxs-lookup"><span data-stu-id="59c6d-143">You typically set this to **true** for a deployment to a production environment, to give you the opportunity to intervene and protect any important data.</span></span> <span data-ttu-id="59c6d-144">Ayarlamış olmanız durumunda **her zaman yeniden oluştur veritabanı** için **yanlış**, bu ayar hiçbir etkisi olmaz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-144">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="59c6d-145">**Dağıtım tek kullanıcı modunda çalıştır**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-145">**Execute deployment in single-user mode**.</span></span> <span data-ttu-id="59c6d-146">Bu genellikle geliştirme veya test ortamlarında bir sorun değildir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-146">This is not usually an issue in development or test environments.</span></span> <span data-ttu-id="59c6d-147">Bununla birlikte, genellikle bu ayarlamalıdır **true** hazırlık veya üretim ortamları için dağıtımlar için.</span><span class="sxs-lookup"><span data-stu-id="59c6d-147">However, you should typically set this to **true** for deployments to staging or production environments.</span></span> <span data-ttu-id="59c6d-148">Bu, kullanıcıların dağıtım devam ederken veritabanına değişiklikler yapmasını engeller.</span><span class="sxs-lookup"><span data-stu-id="59c6d-148">This prevents users from making changes to the database while the deployment is underway.</span></span>
- <span data-ttu-id="59c6d-149">**Dağıtımdan önce veritabanı yedekleme**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-149">**Back up database before deployment**.</span></span> <span data-ttu-id="59c6d-150">Genellikle bu ayar **true** dağıtımını yaparken bir üretim ortamı için veri kaybına karşı önlem olarak.</span><span class="sxs-lookup"><span data-stu-id="59c6d-150">You typically set this to **true** when you deploy to a production environment, as a precaution against data loss.</span></span> <span data-ttu-id="59c6d-151">Ayarlamak isteyebilirsiniz **true** dağıtırken hazırlama ortamına hazırlama, veritabanınızı çok miktarda veri içeriyorsa.</span><span class="sxs-lookup"><span data-stu-id="59c6d-151">You may also want to set it to **true** when you deploy to a staging environment, if your staging database contains a lot of data.</span></span>
- <span data-ttu-id="59c6d-152">**Hedef veritabanına olan ancak veritabanı projesi içinde olmayan nesneler için bırak deyimleri oluşturmak**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-152">**Generate DROP statements for objects that are in the target database but that are not in the database project**.</span></span> <span data-ttu-id="59c6d-153">Çoğu durumda, bu bir veritabanı için artımlı değişiklikler, tam sayı ve önemli bir bölümünü oluşturur.</span><span class="sxs-lookup"><span data-stu-id="59c6d-153">In most cases, this is an integral and essential part of making incremental changes to a database.</span></span> <span data-ttu-id="59c6d-154">Ayarlamış olmanız durumunda **her zaman yeniden oluştur veritabanı** için **yanlış**, bu ayar hiçbir etkisi olmaz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-154">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="59c6d-155">**CLR Türleri güncelleştirmek için ALTER ASSEMBLY deyimleri kullanmayın**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-155">**Do not use ALTER ASSEMBLY statements to update CLR types**.</span></span> <span data-ttu-id="59c6d-156">Bu ayar, SQL Server ortak dil çalışma zamanı (CLR) türleri için yeni derleme sürümleri nasıl güncelleştirmelidir belirler.</span><span class="sxs-lookup"><span data-stu-id="59c6d-156">This setting determines how SQL Server should update common language runtime (CLR) types to newer assembly versions.</span></span> <span data-ttu-id="59c6d-157">Bu ayarlanmalı **false** Çoğu senaryoda.</span><span class="sxs-lookup"><span data-stu-id="59c6d-157">This should be set to **false** in most scenarios.</span></span>

<span data-ttu-id="59c6d-158">Bu tablo farklı bir hedef ortamlar için tipik dağıtım ayarlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-158">This table shows typical deployment settings for different destination environments.</span></span> <span data-ttu-id="59c6d-159">Ancak, ayarlarınızı tam gereksinimlerinize bağlı olarak farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-159">However, your settings may be different depending on your exact requirements.</span></span>

|  | <span data-ttu-id="59c6d-160">Geliştirme ve Test</span><span class="sxs-lookup"><span data-stu-id="59c6d-160">Developer/Test</span></span> | <span data-ttu-id="59c6d-161">Hazırlama/tümleştirme</span><span class="sxs-lookup"><span data-stu-id="59c6d-161">Staging/Integration</span></span> | <span data-ttu-id="59c6d-162">Üretim</span><span class="sxs-lookup"><span data-stu-id="59c6d-162">Production</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="59c6d-163">**Dağıtım karşılaştırma harmanlama**</span><span class="sxs-lookup"><span data-stu-id="59c6d-163">**Deployment comparison collation**</span></span> | <span data-ttu-id="59c6d-164">Kaynak</span><span class="sxs-lookup"><span data-stu-id="59c6d-164">Source</span></span> | <span data-ttu-id="59c6d-165">Hedef</span><span class="sxs-lookup"><span data-stu-id="59c6d-165">Target</span></span> | <span data-ttu-id="59c6d-166">Hedef</span><span class="sxs-lookup"><span data-stu-id="59c6d-166">Target</span></span> |
| <span data-ttu-id="59c6d-167">**Veritabanı özellikleri dağıtma**</span><span class="sxs-lookup"><span data-stu-id="59c6d-167">**Deploy database properties**</span></span> | <span data-ttu-id="59c6d-168">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-168">True</span></span> | <span data-ttu-id="59c6d-169">Yalnızca ilk kez</span><span class="sxs-lookup"><span data-stu-id="59c6d-169">First time only</span></span> | <span data-ttu-id="59c6d-170">Yalnızca ilk kez</span><span class="sxs-lookup"><span data-stu-id="59c6d-170">First time only</span></span> |
| <span data-ttu-id="59c6d-171">**Veritabanı her zaman yeniden oluşturma**</span><span class="sxs-lookup"><span data-stu-id="59c6d-171">**Always re-create database**</span></span> | <span data-ttu-id="59c6d-172">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-172">True</span></span> | <span data-ttu-id="59c6d-173">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-173">False</span></span> | <span data-ttu-id="59c6d-174">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-174">False</span></span> |
| <span data-ttu-id="59c6d-175">**Veri kaybı, artımlı dağıtım engelle**</span><span class="sxs-lookup"><span data-stu-id="59c6d-175">**Block incremental deployment if data loss might occur**</span></span> | <span data-ttu-id="59c6d-176">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-176">False</span></span> | <span data-ttu-id="59c6d-177">Olabilir</span><span class="sxs-lookup"><span data-stu-id="59c6d-177">Maybe</span></span> | <span data-ttu-id="59c6d-178">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-178">True</span></span> |
| <span data-ttu-id="59c6d-179">**Dağıtım betiği tek kullanıcı modunda çalıştır**</span><span class="sxs-lookup"><span data-stu-id="59c6d-179">**Execute deployment script in single-user mode**</span></span> | <span data-ttu-id="59c6d-180">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-180">False</span></span> | <span data-ttu-id="59c6d-181">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-181">True</span></span> | <span data-ttu-id="59c6d-182">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-182">True</span></span> |
| <span data-ttu-id="59c6d-183">**Dağıtımdan önce veritabanını yedekleyin**</span><span class="sxs-lookup"><span data-stu-id="59c6d-183">**Back up database before deployment**</span></span> | <span data-ttu-id="59c6d-184">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-184">False</span></span> | <span data-ttu-id="59c6d-185">Olabilir</span><span class="sxs-lookup"><span data-stu-id="59c6d-185">Maybe</span></span> | <span data-ttu-id="59c6d-186">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-186">True</span></span> |
| <span data-ttu-id="59c6d-187">**Hedef veritabanındaki nesneler için bırak deyimleri oluşturur, ancak veritabanı projesi içinde olmayan**</span><span class="sxs-lookup"><span data-stu-id="59c6d-187">**Generate DROP statements for objects that are in the target database but that are not in the database project**</span></span> | <span data-ttu-id="59c6d-188">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-188">False</span></span> | <span data-ttu-id="59c6d-189">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-189">True</span></span> | <span data-ttu-id="59c6d-190">Doğru</span><span class="sxs-lookup"><span data-stu-id="59c6d-190">True</span></span> |
| <span data-ttu-id="59c6d-191">**CLR Türleri güncelleştirmek için ALTER ASSEMBLY deyimleri kullanmayın**</span><span class="sxs-lookup"><span data-stu-id="59c6d-191">**Do not use ALTER ASSEMBLY statements to update CLR types**</span></span> | <span data-ttu-id="59c6d-192">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-192">False</span></span> | <span data-ttu-id="59c6d-193">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-193">False</span></span> | <span data-ttu-id="59c6d-194">False</span><span class="sxs-lookup"><span data-stu-id="59c6d-194">False</span></span> |
  

> [!NOTE]
> <span data-ttu-id="59c6d-195">Veritabanı dağıtım özellikleri ve ortam konuları hakkında daha fazla bilgi için bkz: [bir genel bakış, veritabanı proje ayarları](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [nasıl yapılır: özelliklerini yapılandırmak için dağıtım ayrıntıları](https://msdn.microsoft.com/library/dd172125.aspx), [ Derleme ve veritabanı bir yalıtılmış geliştirme ortamına dağıtma](https://msdn.microsoft.com/library/dd193409.aspx), ve [derleme ve veritabanları bir hazırlık veya üretim ortamına dağıtma](https://msdn.microsoft.com/library/dd193413.aspx).</span><span class="sxs-lookup"><span data-stu-id="59c6d-195">For more information on database deployment properties and environment considerations, see [An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [How to: Configure Properties for Deployment Details](https://msdn.microsoft.com/library/dd172125.aspx), [Build and Deploy Database to an Isolated Development Environment](https://msdn.microsoft.com/library/dd193409.aspx), and [Build and Deploy Databases to a Staging or Production Environment](https://msdn.microsoft.com/library/dd193413.aspx).</span></span>


<span data-ttu-id="59c6d-196">Birden çok varış yeri için veritabanı projesi'nın dağıtımını desteklemek için her hedef ortam için bir dağıtım yapılandırma dosyası oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-196">To support the deployment of a database project to multiple destinations, you should create a deployment configuration file for each target environment.</span></span>

<span data-ttu-id="59c6d-197">**Bir ortama özgü yapılandırma dosyası oluşturmak için**</span><span class="sxs-lookup"><span data-stu-id="59c6d-197">**To create an environment-specific configuration file**</span></span>

1. <span data-ttu-id="59c6d-198">Visual Studio 2010 içinde **Çözüm Gezgini** penceresi, veritabanı projenize sağ tıklayın ve ardından **özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-198">In Visual Studio 2010, in the **Solution Explorer** window, right-click your database project, and then click **Properties**.</span></span>
2. <span data-ttu-id="59c6d-199">Veritabanı Proje özellikleri sayfasında üzerinde **dağıtma** sekmesinde **dağıtım yapılandırma dosyası** satır, tıklatın **yeni**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-199">On the database project properties page, on the **Deploy** tab, in the **Deployment configuration file** row, click **New**.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image1.png)
3. <span data-ttu-id="59c6d-200">İçinde **yeni bir dağıtım yapılandırma dosyası** iletişim kutusunda, dosya anlamlı bir ad verin (örneğin, **TestEnvironment.sqldeployment**) ve ardından **kaydetmek**.</span><span class="sxs-lookup"><span data-stu-id="59c6d-200">In the **New Deployment Configuration File** dialog box, give the file a meaningful name (for example, **TestEnvironment.sqldeployment**), and then click **Save**.</span></span>
4. <span data-ttu-id="59c6d-201">Üzerinde *[Filename] *** .sqldeployment** sayfasında, hedef ortamınızın gereksinimlerini karşılamak için dağıtım özellikleri ayarlayın ve ardından dosyayı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="59c6d-201">On the *[Filename]***.sqldeployment** page, set the deployment properties to match the requirements of your destination environment, and then save the file.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image2.png)
5. <span data-ttu-id="59c6d-202">Yeni dosya, veritabanı projenizi özellikleri klasöründe eklenir dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="59c6d-202">Notice that the new file is added to the Properties folder in your database project.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image3.png)

## <a name="specifying-the-deployment-configuration-file-in-vsdbcmd"></a><span data-ttu-id="59c6d-203">Dağıtım yapılandırma dosyası VSDBCMD içinde belirtme</span><span class="sxs-lookup"><span data-stu-id="59c6d-203">Specifying the Deployment Configuration File in VSDBCMD</span></span>

<span data-ttu-id="59c6d-204">Visual Studio 2010 içinden çözüm yapılandırmaları (örneğin, hata ayıklama ve yayın) kullandığınızda, bir dağıtım yapılandırma dosyası her yapılandırma ile ilişkilendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-204">When you use solution configurations (like Debug and Release) within Visual Studio 2010, you can associate a deployment configuration file with each configuration.</span></span> <span data-ttu-id="59c6d-205">Belirli bir yapılandırmasının derlerken, derleme işlemi özel yapılandırma dağıtım yapılandırma dosyasına işaret özel yapılandırma dağıtım bildirim dosyası oluşturur.</span><span class="sxs-lookup"><span data-stu-id="59c6d-205">When you build a particular configuration, the build process generates a configuration-specific deployment manifest file that points to the configuration-specific deployment configuration file.</span></span> <span data-ttu-id="59c6d-206">Ancak, bu öğreticileri açıklanan dağıtıma yaklaşımın ana amaçlar kişiler dağıtım işlemi Visual Studio 2010 ve çözüm yapılandırmaları kullanmadan denetleme olanağı vermek için biridir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-206">However, one of the main aims of the approach to deployment described in these tutorials is to give people the ability to control the deployment process without using Visual Studio 2010 and solution configurations.</span></span> <span data-ttu-id="59c6d-207">Bu yaklaşımda, çözüm yapılandırması hedef dağıtım ortamı bakılmaksızın aynı olacak.</span><span class="sxs-lookup"><span data-stu-id="59c6d-207">In this approach, the solution configuration is the same regardless of the target deployment environment.</span></span> <span data-ttu-id="59c6d-208">Veritabanı dağıtımınız belirli hedef ortamınıza uyarlamak için dağıtım yapılandırma dosyası belirtmek için VSDBCMD komut satırı seçeneklerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-208">To tailor your database deployment to a specific destination environment, you can use the VSDBCMD command-line options to specify your deployment configuration file.</span></span>

<span data-ttu-id="59c6d-209">Bir dağıtım yapılandırma dosyası, VSDBCMD belirtmek için kullanın **p:/DeploymentConfigurationFile** geçin ve dosyanızı tam yolunu girin.</span><span class="sxs-lookup"><span data-stu-id="59c6d-209">To specify a deployment configuration file in your VSDBCMD, use the **p:/DeploymentConfigurationFile** switch and provide the full path to your file.</span></span> <span data-ttu-id="59c6d-210">Bu dağıtım bildirimi tanımlayan dağıtım yapılandırma dosyası geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="59c6d-210">This will override the deployment configuration file that the deployment manifest identifies.</span></span> <span data-ttu-id="59c6d-211">Örneğin, dağıtmak için bu VSDBCMD komutu kullanabilirsiniz **ContactManager** veritabanı bir test ortamı için:</span><span class="sxs-lookup"><span data-stu-id="59c6d-211">For example, you could use this VSDBCMD command to deploy the **ContactManager** database to a test environment:</span></span>


[!code-console[Main](customizing-database-deployments-for-multiple-environments/samples/sample1.cmd)]


> [!NOTE]
> <span data-ttu-id="59c6d-212">Çıktı dizinine dosya kopyalarken yapı işlemi .sqldeployment dosyanızı adlandırın unutmayın.</span><span class="sxs-lookup"><span data-stu-id="59c6d-212">Note that the build process may rename your .sqldeployment file when it copies the file to the output directory.</span></span>


<span data-ttu-id="59c6d-213">Dağıtım öncesi veya dağıtım sonrası SQL komut dosyalarınızda SQL komutu değişkenleri kullanıyorsanız bir ortama özgü .sqlcmdvars dosyasını dağıtımınız ile ilişkilendirmek için benzer bir yaklaşım kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-213">If you use SQL command variables in your pre-deployment or post-deployment SQL scripts, you can use a similar approach to associate an environment-specific .sqlcmdvars file with your deployment.</span></span> <span data-ttu-id="59c6d-214">Bu durumda, kullandığınız **p:/SqlCommandVariablesFile** .sqlcmdvars dosyanızı tanımlamak için anahtar.</span><span class="sxs-lookup"><span data-stu-id="59c6d-214">In this case, you use the **p:/SqlCommandVariablesFile** switch to identify your .sqlcmdvars file.</span></span>

## <a name="running-the-vsdbcmd-command-from-an-msbuild-project-file"></a><span data-ttu-id="59c6d-215">MSBuild proje dosyasından VSDBCMD komutunu çalıştırma</span><span class="sxs-lookup"><span data-stu-id="59c6d-215">Running the VSDBCMD Command from an MSBuild Project File</span></span>

<span data-ttu-id="59c6d-216">Kullanarak bir MSBuild proje dosyası VSDBCMD komuttan çağırabileceği bir **Exec** MSBuild hedef içinde görev.</span><span class="sxs-lookup"><span data-stu-id="59c6d-216">You can invoke a VSDBCMD command from an MSBuild project file by using an **Exec** task within an MSBuild target.</span></span> <span data-ttu-id="59c6d-217">An basit haliyle, onu şöyle olabilir:</span><span class="sxs-lookup"><span data-stu-id="59c6d-217">In its simplest form, it would look like this:</span></span>


[!code-xml[Main](customizing-database-deployments-for-multiple-environments/samples/sample2.xml)]


- <span data-ttu-id="59c6d-218">Uygulamada, okuyup yeniden, proje dosyalarınıza kolaylaştırmak için çeşitli komut satırı parametreleri depolamak için özellikler oluşturmak istediğiniz.</span><span class="sxs-lookup"><span data-stu-id="59c6d-218">In practice, to make your project files easy to read and reuse, you'll want to create properties to store the various command-line parameters.</span></span> <span data-ttu-id="59c6d-219">Bu, kullanıcıların bir ortama özgü proje dosyasında özellik değerlerini sağlamak ya da MSBuild komut satırından varsayılan değerleri geçersiz kılmak için kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="59c6d-219">This makes it easier for users to provide property values in an environment-specific project file or to override default values from the MSBuild command line.</span></span> <span data-ttu-id="59c6d-220">Açıklanan bölünmüş proje dosyası yaklaşımı kullanırsanız [proje dosyası anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md), yapı yönergeler ve iki dosya arasında özellikleri buna göre bölme:</span><span class="sxs-lookup"><span data-stu-id="59c6d-220">If you use the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), you should divide your build instructions and properties between the two files accordingly:</span></span>
- <span data-ttu-id="59c6d-221">Dağıtım yapılandırma dosya adı, veritabanı bağlantı dizesi ve hedef veritabanı adı gibi ortama özgü ayarları ortama özgü proje dosyasında gitmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-221">Environment-specific settings, like the deployment configuration filename, the database connection string, and the target database name, should go in the environment-specific project file.</span></span>
- <span data-ttu-id="59c6d-222">VSDBCMD yürütülebilir dosyasının konumuna gibi Evrensel tüm özellikleri ile birlikte VSDBCMD komutu çalıştırır MSBuild hedef Evrensel proje dosyasında gitmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-222">The MSBuild target that runs the VSDBCMD command, together with any universal properties like the location of the VSDBCMD executable, should go in the universal project file.</span></span>

<span data-ttu-id="59c6d-223">Ayrıca, .deploymanifest dosya oluşturulur ve kullanıma hazır olmasını sağlamak VSDBCMD çağırma önce veritabanı projesi derleme de emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="59c6d-223">You should also ensure that you build the database project before you invoke VSDBCMD so that the .deploymanifest file is created and ready to use.</span></span> <span data-ttu-id="59c6d-224">Bu yaklaşımın konusunda tam bir örnek görebilirsiniz [oluşturma işlemini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md), hangi kılavuzluk, proje dosyalarında [Contact Manager örnek çözümü](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span><span class="sxs-lookup"><span data-stu-id="59c6d-224">You can see a full example of this approach in the topic [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), which walks you through the project files in the [Contact Manager sample solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="59c6d-225">Sonuç</span><span class="sxs-lookup"><span data-stu-id="59c6d-225">Conclusion</span></span>

<span data-ttu-id="59c6d-226">Bu konuda nasıl MSBuild ve VSDBCMD kullanarak veritabanı projeleri dağıtırken, farklı bir hedef ortamlar için veritabanı özellikleri uyarlayabileceğiniz açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="59c6d-226">This topic described how you can tailor database properties to different destination environments when you deploy database projects using MSBuild and VSDBCMD.</span></span> <span data-ttu-id="59c6d-227">Veritabanı projeleri büyük, Kurumsal ölçekte çözümleri bir parçası olarak dağıtmak gerektiğinde bu yararlı bir yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="59c6d-227">This approach is useful when you need to deploy database projects as part of larger, enterprise-scale solutions.</span></span> <span data-ttu-id="59c6d-228">Bu çözümler genellikle korumalı geliştirme veya test ortamları, hazırlama ya da tümleştirme Platform ve üretim veya dinamik ortamları gibi birden çok varış yeri için dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="59c6d-228">These solutions are often deployed to multiple destinations, like sandboxed development or test environments, staging or integration platforms, and production or live environments.</span></span> <span data-ttu-id="59c6d-229">Bu hedef ortamların her birinde, genellikle benzersiz bir veritabanı dağıtım özellikleri kümesi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="59c6d-229">Each of these target environments typically requires a unique set of database deployment properties.</span></span>

## <a name="further-reading"></a><span data-ttu-id="59c6d-230">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="59c6d-230">Further Reading</span></span>

<span data-ttu-id="59c6d-231">Veritabanı projeleri VSDBCMD.exe kullanarak dağıtma hakkında daha fazla bilgi için bkz: [dağıtma veritabanı projeleri](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="59c6d-231">For more information on deploying database projects using VSDBCMD.exe, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="59c6d-232">Dağıtım işlemi denetlemek için özel MSBuild proje dosyalarını kullanma hakkında daha fazla bilgi için bkz: [proje dosyası anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md) ve [oluşturma işlemini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="59c6d-232">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="59c6d-233">Bu makaleler MSDN'de veritabanı dağıtımı hakkında daha fazla genel rehberlik sağlar:</span><span class="sxs-lookup"><span data-stu-id="59c6d-233">These articles on MSDN provide more general guidance on database deployment:</span></span>

- <span data-ttu-id="59c6d-234">[Veritabanı projesi ayarlarına genel bakış](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span><span class="sxs-lookup"><span data-stu-id="59c6d-234">[An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span></span>
- [<span data-ttu-id="59c6d-235">Nasıl yapılır: özellikler için dağıtım ayrıntılarını Yapılandır</span><span class="sxs-lookup"><span data-stu-id="59c6d-235">How to: Configure Properties for Deployment Details</span></span>](https://msdn.microsoft.com/library/dd172125.aspx)
- [<span data-ttu-id="59c6d-236">Derleme ve veritabanları bir yalıtılmış geliştirme ortamına dağıtma</span><span class="sxs-lookup"><span data-stu-id="59c6d-236">Build and Deploy Databases to an Isolated Development Environment</span></span>](https://msdn.microsoft.com/library/dd193409.aspx)
- [<span data-ttu-id="59c6d-237">Derleme ve veritabanları bir hazırlık veya üretim ortamına dağıtma</span><span class="sxs-lookup"><span data-stu-id="59c6d-237">Build and Deploy Databases to a Staging or Production Environment</span></span>](https://msdn.microsoft.com/library/dd193413.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="59c6d-238">[Önceki](performing-a-what-if-deployment.md)
> [sonraki](deploying-database-role-memberships-to-test-environments.md)</span><span class="sxs-lookup"><span data-stu-id="59c6d-238">[Previous](performing-a-what-if-deployment.md)
[Next](deploying-database-role-memberships-to-test-environments.md)</span></span>

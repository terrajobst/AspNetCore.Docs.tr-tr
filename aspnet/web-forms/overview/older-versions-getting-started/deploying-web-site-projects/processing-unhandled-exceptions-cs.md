---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/processing-unhandled-exceptions-cs
title: "İşlenmeyen özel durumlar (C#) işleme | Microsoft Docs"
author: rick-anderson
description: "Üretim web uygulaması üzerinde bir çalışma zamanı hatası meydana geldiğinde önemli bir geliştiricisine bildirin ve böylece bu konumundaki bir la koydu için hata günlüğüne..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/09/2009
ms.topic: article
ms.assetid: 5bc1afd5-2484-4528-b158-ab218ba150e8
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/processing-unhandled-exceptions-cs
msc.type: authoredcontent
ms.openlocfilehash: 95102e5e6b3e8b78e2757a2bdee39976003011e3
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/24/2018
---
<a name="processing-unhandled-exceptions-c"></a><span data-ttu-id="32e7a-103">İşlenmeyen özel durumlar (C#) işleme</span><span class="sxs-lookup"><span data-stu-id="32e7a-103">Processing Unhandled Exceptions (C#)</span></span>
====================
<span data-ttu-id="32e7a-104">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="32e7a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="32e7a-105">[Kodu indirme](http://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_12_CS.zip) veya [PDF indirin](http://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial12_ErrorHandling_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="32e7a-105">[Download Code](http://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_12_CS.zip) or [Download PDF](http://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial12_ErrorHandling_cs.pdf)</span></span>

> <span data-ttu-id="32e7a-106">Üretim web uygulaması üzerinde bir çalışma zamanı hatası meydana geldiğinde Geliştirici bildirmek için ve böylece, daha sonraki bir noktada zamanında koydu için hata günlüğüne için önemlidir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-106">When a runtime error occurs on a web application in production it is important to notify a developer and to log the error so that it may be diagnosed at a later point in time.</span></span> <span data-ttu-id="32e7a-107">Bu öğretici, nasıl ASP.NET çalışma zamanı hataları işler ve özel kod işlenmeyen bir özel durum balonları her ASP.NET çalışma zamanı kadar yürütmek için bir yol bakan bir genel bakış sağlar.</span><span class="sxs-lookup"><span data-stu-id="32e7a-107">This tutorial provides an overview of how ASP.NET processes runtime errors and looks at one way to have custom code execute whenever an unhandled exception bubbles up to the ASP.NET runtime.</span></span>


## <a name="introduction"></a><span data-ttu-id="32e7a-108">Giriş</span><span class="sxs-lookup"><span data-stu-id="32e7a-108">Introduction</span></span>

<span data-ttu-id="32e7a-109">Bir ASP.NET uygulamasındaki işlenmeyen bir özel durum meydana geldiğinde başlatır ASP.NET çalışma kadar köpürür `Error` olay ve uygun hata sayfasına görüntüler.</span><span class="sxs-lookup"><span data-stu-id="32e7a-109">When an unhandled exception occurs in an ASP.NET application, it bubbles up to the ASP.NET runtime, which raises the `Error` event and displays the appropriate error page.</span></span> <span data-ttu-id="32e7a-110">Hata sayfaları üç farklı türde vardır: çalışma zamanı hata sarı ekran, ölüm (YSOD); özel durum ayrıntıları YSOD; ve özel hata sayfaları.</span><span class="sxs-lookup"><span data-stu-id="32e7a-110">There are three different types of error pages: the Runtime Error Yellow Screen of Death (YSOD); the Exception Details YSOD; and custom error pages.</span></span> <span data-ttu-id="32e7a-111">İçinde [önceki öğretici](displaying-a-custom-error-page-cs.md) biz uygulamayı uzak kullanıcılar ve yerel olarak ziyaret eden kullanıcılar için özel durum ayrıntıları YSOD için bir özel hata sayfası kullanacak şekilde yapılandırılmış.</span><span class="sxs-lookup"><span data-stu-id="32e7a-111">In the [preceding tutorial](displaying-a-custom-error-page-cs.md) we configured the application to use a custom error page for remote users and the Exception Details YSOD for users visiting locally.</span></span>

<span data-ttu-id="32e7a-112">Site Görünüm ve yapısını eşleşen bir insan kolay özel hata sayfası kullanarak çalışma zamanı hatası YSOD varsayılan olarak tercih edilir, ancak çözüm işleme kapsamlı bir hata yalnızca bir parçası olan bir özel hata sayfası görüntüleme.</span><span class="sxs-lookup"><span data-stu-id="32e7a-112">Using a human-friendly custom error page that matches the look and feel of the site is preferred to the default Runtime Error YSOD, but displaying a custom error page is only one part of a comprehensive error handling solution.</span></span> <span data-ttu-id="32e7a-113">Üretimde bir uygulamada bir hata oluştuğunda, böylece özel durumun nedeni yakalayın ve bu adresi geliştiricilerin hata bildirilir önemlidir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-113">When an error occurs in an application in production, it is important that the developers are notified of the error so that they can unearth the cause of the exception and address it.</span></span> <span data-ttu-id="32e7a-114">Ayrıca, böylece hata incelenmesi ve daha sonraki bir noktada zamanında tanı koydu hatanın ayrıntıları günlüğe.</span><span class="sxs-lookup"><span data-stu-id="32e7a-114">Furthermore, the error's details should be logged so that the error can be examined and diagnosed at a later point in time.</span></span>

<span data-ttu-id="32e7a-115">Bu öğretici, böylece kullanıcılar oturum işlenmeyen bir özel durum ayrıntıları erişme ve bildirim Geliştirici gösterir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-115">This tutorial shows how to access the details of an unhandled exception so that they can be logged and a developer notified.</span></span> <span data-ttu-id="32e7a-116">Bunu aşağıdaki iki öğreticileri, yapılandırma, biraz sonra otomatik olarak çalışma zamanı hataları, geliştiriciler bildir ve ayrıntılarını oturum hata günlüğü kitaplıkları keşfedin.</span><span class="sxs-lookup"><span data-stu-id="32e7a-116">The two tutorials following this one explore error logging libraries that, after a bit of configuration, will automatically notify developers of runtime errors and log their details.</span></span>

> [!NOTE]
> <span data-ttu-id="32e7a-117">Bu öğreticide incelenmesi bilgi bazı benzersiz veya özelleştirilmiş şekilde işlenmeyen özel durumları işlemek gerekiyorsa kullanışlıdır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-117">The information examined in this tutorial is most useful if you need to process unhandled exceptions in some unique or customized manner.</span></span> <span data-ttu-id="32e7a-118">Burada, yalnızca özel durum oturum ve geliştirici bildir gerekir durumlarda, bir hata günlüğü kitaplığını kullanarak Git yoludur.</span><span class="sxs-lookup"><span data-stu-id="32e7a-118">In cases where you only need to log the exception and notify a developer, using an error logging library is the way to go.</span></span> <span data-ttu-id="32e7a-119">Sonraki iki öğreticileri iki tür kitaplığı genel bir bakış sağlar.</span><span class="sxs-lookup"><span data-stu-id="32e7a-119">The next two tutorials provide an overview of two such libraries.</span></span>


## <a name="executing-code-when-theerrorevent-is-raised"></a><span data-ttu-id="32e7a-120">Yürütme, kod ne zaman`Error`olayı</span><span class="sxs-lookup"><span data-stu-id="32e7a-120">Executing Code When The`Error`Event Is Raised</span></span>

<span data-ttu-id="32e7a-121">Olayları bir nesne ilginç oluştuğunu sinyal ve yanıt olarak kod yürütmek için başka bir nesne için bir mekanizma sağlar.</span><span class="sxs-lookup"><span data-stu-id="32e7a-121">Events provide an object a mechanism for signaling that something interesting has occurred, and for another object to execute code in response.</span></span> <span data-ttu-id="32e7a-122">Bir ASP.NET geliştiricisi olarak, olarak düşünmeye Olayları açısından bilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="32e7a-122">As an ASP.NET developer you are accustomed to thinking in terms of events.</span></span> <span data-ttu-id="32e7a-123">Ziyaretçi belirli düğmesini tıklattığında bazı kodlar çalıştırmak istiyorsanız, bu düğmenin için bir olay işleyicisi oluşturun `Click` olay ve kodunuzu oraya yerleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-123">If you want to run some code when the visitor clicks a particular Button, you create an event handler for that Button's `Click` event and put your code there.</span></span> <span data-ttu-id="32e7a-124">ASP.NET çalışma zamanı başlatır o kendi [ `Error` olay](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) işlenmeyen bir özel durum oluştuğunda bir olay işleyicisi hatanın ayrıntıları günlüğü kodunu geçecek, kendisini izleyen.</span><span class="sxs-lookup"><span data-stu-id="32e7a-124">Given that the ASP.NET runtime raises its [`Error` event](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) whenever an unhandled exception occurs, it follows that the code for logging the error's details would go in an event handler.</span></span> <span data-ttu-id="32e7a-125">Ancak ne bir olay işleyicisi için oluşturduğunuz `Error` olay?</span><span class="sxs-lookup"><span data-stu-id="32e7a-125">But how do you create an event handler for the `Error` event?</span></span>

<span data-ttu-id="32e7a-126">`Error` Olay birçok olayları biridir [ `HttpApplication` sınıfı](https://msdn.microsoft.com/library/system.web.httpapplication.aspx) oluşturuldu HTTP ardışık düzen belirli aşamalarında bir istek ömrü boyunca.</span><span class="sxs-lookup"><span data-stu-id="32e7a-126">The `Error` event is one of many events in the [`HttpApplication` class](https://msdn.microsoft.com/library/system.web.httpapplication.aspx) that are raised at certain stages in the HTTP pipeline during the lifetime of a request.</span></span> <span data-ttu-id="32e7a-127">Örneğin, `HttpApplication` sınıfının [ `BeginRequest` olay](https://msdn.microsoft.com/library/system.web.httpapplication.beginrequest.aspx) her istek; başlangıcında tetiklenir kendi [ `AuthenticateRequest` olay](https://msdn.microsoft.com/library/system.web.httpapplication.authenticaterequest.aspx) güvenlik modülü istek sahibinin belirledi tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-127">For example, the `HttpApplication` class's [`BeginRequest` event](https://msdn.microsoft.com/library/system.web.httpapplication.beginrequest.aspx) is raised at the start of every request; its [`AuthenticateRequest` event](https://msdn.microsoft.com/library/system.web.httpapplication.authenticaterequest.aspx) is raised when a security module has identified the requestor.</span></span> <span data-ttu-id="32e7a-128">Bunlar `HttpApplication` olayları bir isteğin yaşam süresi çeşitli noktalarında özel mantığı yürütmek için bir yol sayfasında Geliştirici verin.</span><span class="sxs-lookup"><span data-stu-id="32e7a-128">These `HttpApplication` events give the page developer a means to execute custom logic at the various points in the lifetime of a request.</span></span>

<span data-ttu-id="32e7a-129">Olay işleyicileri için `HttpApplication` olayları adlı özel bir dosyada yerleştirilebilen `Global.asax`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-129">Event handlers for the `HttpApplication` events can be placed in a special file named `Global.asax`.</span></span> <span data-ttu-id="32e7a-130">Web sitenizi bu dosyayı oluşturmak için kök Web sitenizin adıyla genel uygulama sınıfı şablonu kullanarak yeni öğe Ekle `Global.asax`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-130">To create this file in your website, add a new item to the root of your website using the Global Application Class template with the name `Global.asax`.</span></span>

[![](processing-unhandled-exceptions-cs/_static/image2.png)](processing-unhandled-exceptions-cs/_static/image1.png)

<span data-ttu-id="32e7a-131">**Şekil 1**: eklemek `Global.asax` Web uygulamanız için</span><span class="sxs-lookup"><span data-stu-id="32e7a-131">**Figure 1**: Add `Global.asax` To Your Web Application</span></span>  
<span data-ttu-id="32e7a-132">([Tam boyutlu görüntüyü görüntülemek için tıklatın](processing-unhandled-exceptions-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="32e7a-132">([Click to view full-size image](processing-unhandled-exceptions-cs/_static/image3.png))</span></span>

<span data-ttu-id="32e7a-133">İçeriği ve yapısı `Global.asax` Visual Studio tarafından oluşturulan dosya bir Web uygulaması projesi (WAP) veya Web sitesi projesi (WSP) kullanmakta olduğunuz biraz göre değişir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-133">The contents and structure of the `Global.asax` file created by Visual Studio differ slightly based on whether you are using a Web Application Project (WAP) or Web Site Project (WSP).</span></span> <span data-ttu-id="32e7a-134">Bir WAP ile `Global.asax` iki ayrı dosyalar olarak - uygulanan `Global.asax` ve `Global.asax.cs`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-134">With a WAP, the `Global.asax` is implemented as two separate files - `Global.asax` and `Global.asax.cs`.</span></span> <span data-ttu-id="32e7a-135">`Global.asax` Dosyası hiçbir şey içerir ancak bir `@Application` başvuruyor yönergesi `.cs` dosya; ilgi işleyicileri tanımlanmış olay `Global.asax.cs` dosya.</span><span class="sxs-lookup"><span data-stu-id="32e7a-135">The `Global.asax` file contains nothing but an `@Application` directive that references the `.cs` file; the event handlers of interest are defined in the `Global.asax.cs` file.</span></span> <span data-ttu-id="32e7a-136">WSPs için yalnızca tek bir dosya oluşturulur, `Global.asax`, ve olay işleyicileri olarak tanımlanan bir `<script runat="server">` bloğu.</span><span class="sxs-lookup"><span data-stu-id="32e7a-136">For WSPs, only a single file is created, `Global.asax`, and the event handlers are defined in a `<script runat="server">` block.</span></span>

<span data-ttu-id="32e7a-137">`Global.asax` Bir WAP Visual Studio'nun genel uygulama sınıfı şablonu tarafından oluşturulan dosya içeren olay işleyicileri adlı `Application_BeginRequest`, `Application_AuthenticateRequest`, ve `Application_Error`, olay işleyicileri için olan `HttpApplication` olayları `BeginRequest`, `AuthenticateRequest`, ve `Error`sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="32e7a-137">The `Global.asax` file created in a WAP by Visual Studio's Global Application Class template includes event handlers named `Application_BeginRequest`, `Application_AuthenticateRequest`, and `Application_Error`, which are event handlers for the `HttpApplication` events `BeginRequest`, `AuthenticateRequest`, and `Error`, respectively.</span></span> <span data-ttu-id="32e7a-138">Ayrıca olay işleyicileri adlı olan `Application_Start`, `Session_Start`, `Application_End`, ve `Session_End`, hangi uygulamanın sona erdiğinde web uygulaması, yeni bir oturum başlatır, başlatıldığında, yangın olay işleyicileri ve bir oturum sona erdiğinde, sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="32e7a-138">There are also event handlers named `Application_Start`, `Session_Start`, `Application_End`, and `Session_End`, which are event handlers that fire when the web application starts, when a new session starts, when the application ends, and when a session ends, respectively.</span></span> <span data-ttu-id="32e7a-139">`Global.asax` Bir WSP Visual Studio tarafından oluşturulan dosya içeren yalnızca `Application_Error`, `Application_Start`, `Session_Start`, `Application_End`, ve `Session_End` olay işleyicileri.</span><span class="sxs-lookup"><span data-stu-id="32e7a-139">The `Global.asax` file created in a WSP by Visual Studio contains just the `Application_Error`, `Application_Start`, `Session_Start`, `Application_End`, and `Session_End` event handlers.</span></span>

> [!NOTE]
> <span data-ttu-id="32e7a-140">ASP.NET Uygulama dağıtırken kopyalamalısınız `Global.asax` üretim ortamına dosya.</span><span class="sxs-lookup"><span data-stu-id="32e7a-140">When deploying the ASP.NET application you need to copy the `Global.asax` file to the production environment.</span></span> <span data-ttu-id="32e7a-141">`Global.asax.cs` WAP oluşturulur, dosya, çünkü bu kod projenin derlemeye derlenir üretime kopyalanması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="32e7a-141">The `Global.asax.cs` file, which is created in the WAP, does not need to be copied to production because this code is compiled into the project's assembly.</span></span>


<span data-ttu-id="32e7a-142">Visual Studio'nun genel uygulama sınıfı şablonu tarafından oluşturulan olay işleyicileri eksiksiz değildir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-142">The event handlers created by Visual Studio's Global Application Class template are not exhaustive.</span></span> <span data-ttu-id="32e7a-143">İçin herhangi bir olay işleyicisi ekleyebilirsiniz `HttpApplication` olay işleyicisi adlandırma tarafından olay `Application_EventName`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-143">You can add an event handler for any `HttpApplication` event by naming the event handler `Application_EventName`.</span></span> <span data-ttu-id="32e7a-144">Örneğin, aşağıdaki kodu ekleyebilirsiniz `Global.asax` için bir olay işleyicisi oluşturmak için dosya [ `AuthorizeRequest` olay](https://msdn.microsoft.com/library/system.web.httpapplication.authorizerequest.aspx):</span><span class="sxs-lookup"><span data-stu-id="32e7a-144">For example, you could add the following code to the `Global.asax` file to create an event handler for the [`AuthorizeRequest` event](https://msdn.microsoft.com/library/system.web.httpapplication.authorizerequest.aspx):</span></span>

[!code-vb[Main](processing-unhandled-exceptions-cs/samples/sample1.vb)]

<span data-ttu-id="32e7a-145">Benzer şekilde, gerekli olmayan genel uygulama sınıfı şablonu tarafından oluşturulan tüm olay işleyicileri kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="32e7a-145">Likewise, you can remove any event handlers created by the Global Application Class template that are not needed.</span></span> <span data-ttu-id="32e7a-146">Bu öğretici için biz yalnızca bir olay işleyicisi için gereksinim `Error` olay; kullanımında diğer olay işleyicilerini kaldırmak ücretsiz `Global.asax` dosya.</span><span class="sxs-lookup"><span data-stu-id="32e7a-146">For this tutorial we only require an event handler for the `Error` event; feel free to remove the other event handlers from the `Global.asax` file.</span></span>

> [!NOTE]
> <span data-ttu-id="32e7a-147">*HTTP modülleri* olay işleyicileri için tanımlamak için başka bir yol sunar `HttpApplication` olaylar.</span><span class="sxs-lookup"><span data-stu-id="32e7a-147">*HTTP Modules* offer another way to define event handlers for `HttpApplication` events.</span></span> <span data-ttu-id="32e7a-148">HTTP modülleri ayrı Sınıf Kitaplığı'na doğrudan web uygulama projesi içinde yerleştirilen veya ayrılmış bir sınıf dosyası olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="32e7a-148">HTTP Modules are created as a class file that can be placed directly within the web application project or separated out into a separate class library.</span></span> <span data-ttu-id="32e7a-149">Bir sınıf kitaplığı'na bunlar ayrılabilir çünkü HTTP modülleri oluşturmak için daha esnek ve yeniden kullanılabilir bir modeli sunar `HttpApplication` olay işleyicileri.</span><span class="sxs-lookup"><span data-stu-id="32e7a-149">Because they can be separated out into a class library, HTTP Modules offer a more flexible and reusable model for creating `HttpApplication` event handlers.</span></span> <span data-ttu-id="32e7a-150">Ancak `Global.asax` dosyasıdır belirli HTTP modülleri bulunduğu web uygulaması için bu noktada bir Web sitesine HTTP modülü ekleme derleme bırakma olarak basit derlemeler içine derlenebilir `Bin` klasörü ve kaydetme Modülünde `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-150">Whereas the `Global.asax` file is specific to the web application where it resides, HTTP Modules can be compiled into assemblies, at which point adding the HTTP Module to a website is as simple as dropping the assembly in the `Bin` folder and registering the Module in `Web.config`.</span></span> <span data-ttu-id="32e7a-151">Bu öğretici, oluşturma ve HTTP modülleri kullanarak aramaz, ancak aşağıdaki iki öğreticilerde kullanılan iki hata günlüğünü kitaplıkları HTTP modülleri uygulanır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-151">This tutorial does not look at creating and using HTTP Modules, but the two error logging libraries used in the following two tutorials are implemented as HTTP Modules.</span></span> <span data-ttu-id="32e7a-152">HTTP modülleri avantajları hakkında daha fazla arka plan için başvurmak [kullanarak HTTP modülleri ve takılabilir ASP.NET bileşenleri oluşturması işleyicilerine](https://msdn.microsoft.com/library/aa479332.aspx).</span><span class="sxs-lookup"><span data-stu-id="32e7a-152">For more background on the benefits of HTTP Modules refer to [Using HTTP Modules and Handlers to Create Pluggable ASP.NET Components](https://msdn.microsoft.com/library/aa479332.aspx).</span></span>


## <a name="retrieving-information-about-the-unhandled-exception"></a><span data-ttu-id="32e7a-153">İşlenmeyen özel durum hakkında bilgi alma</span><span class="sxs-lookup"><span data-stu-id="32e7a-153">Retrieving Information About the Unhandled Exception</span></span>

<span data-ttu-id="32e7a-154">Global.asax dosyası ile bu noktada sahibiz bir `Application_Error` olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="32e7a-154">At this point we have a Global.asax file with an `Application_Error` event handler.</span></span> <span data-ttu-id="32e7a-155">Bu olay işleyicisi yürüttüğünde biz hata geliştiricisine bildirin ve ayrıntılarını oturum gerekir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-155">When this event handler executes we need to notify a developer of the error and log its details.</span></span> <span data-ttu-id="32e7a-156">Bu görevleri gerçekleştirmek üzere biz öncelikle gerçekleşmesine neden olan özel durum ayrıntıları belirlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-156">To accomplish these tasks we first need to determine the details of the exception that was raised.</span></span> <span data-ttu-id="32e7a-157">Sunucu nesnesi kullanın [ `GetLastError` yöntemi](https://msdn.microsoft.com/library/system.web.httpserverutility.getlasterror.aspx) nedeniyle işlenmeyen bir özel durum ayrıntılarını alma `Error` tetiklenecek olay.</span><span class="sxs-lookup"><span data-stu-id="32e7a-157">Use the Server object's [`GetLastError` method](https://msdn.microsoft.com/library/system.web.httpserverutility.getlasterror.aspx) to retrieve details of the unhandled exception that caused the `Error` event to fire.</span></span>

[!code-csharp[Main](processing-unhandled-exceptions-cs/samples/sample2.cs)]

<span data-ttu-id="32e7a-158">`GetLastError` Yöntemi türünde bir nesne döndürür `Exception`, .NET Framework'teki tüm özel durumlar için temel tür değil.</span><span class="sxs-lookup"><span data-stu-id="32e7a-158">The `GetLastError` method returns an object of type `Exception`, which is the base type for all exceptions in the .NET Framework.</span></span> <span data-ttu-id="32e7a-159">Ancak, yukarıdaki kod ı tarafından döndürülen özel durum nesnesi atama `GetLastError` içine bir `HttpException` nesnesi.</span><span class="sxs-lookup"><span data-stu-id="32e7a-159">However, in the code above I am casting the Exception object returned by `GetLastError` into an `HttpException` object.</span></span> <span data-ttu-id="32e7a-160">Varsa `Error` olay şu içinde oluşturulan özel durum Sarmalanan sonra bir ASP.NET kaynağı işleme sırasında özel durum oluştu çünkü bir `HttpException`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-160">If the `Error` event is being fired because an exception was thrown during the processing of an ASP.NET resource then the exception that was thrown is wrapped within an `HttpException`.</span></span> <span data-ttu-id="32e7a-161">Hata olayı kullanım precipitated gerçek özel durum almak için `InnerException` özelliği.</span><span class="sxs-lookup"><span data-stu-id="32e7a-161">To get the actual exception that precipitated the Error event use the `InnerException` property.</span></span> <span data-ttu-id="32e7a-162">Varsa `Error` olay, bir HTTP tabanlı özel durum nedeniyle, mevcut olmayan sayfa istekleri gibi yükseltildi bir `HttpException` oluşturulur, ancak bir iç özel duruma sahip değil.</span><span class="sxs-lookup"><span data-stu-id="32e7a-162">If the `Error` event was raised because of an HTTP-based exception, such as a request for a non-existent page, an `HttpException` is thrown, but it does not have an inner exception.</span></span>

<span data-ttu-id="32e7a-163">Aşağıdaki kod `GetLastErrormessage` tetiklenen özel durum hakkında bilgi almak için `Error` olay, depolama `HttpException` adlı bir değişkende `lastErrorWrapper`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-163">The following code uses the `GetLastErrormessage` to retrieve information about the exception that triggered the `Error` event, storing the `HttpException` in a variable named `lastErrorWrapper`.</span></span> <span data-ttu-id="32e7a-164">Ardından türü, ileti ve kaynak özel durum yığın izlemesi olup olmadığını denetleme üç dize değişkenlerde depoladığı `lastErrorWrapper` tetiklenen gerçek özel durum `Error` olayı (söz konusu olduğunda özel durumlar HTTP tabanlı) veya yalnızca olup olmadığını bir istek işlenirken bir durum oluştu bir özel durum için sarmalayıcı.</span><span class="sxs-lookup"><span data-stu-id="32e7a-164">It then stores the type, message, and stack trace of the originating exception in three string variables, checking to see if the `lastErrorWrapper` is the actual exception that triggered the `Error` event (in the case of HTTP-based exceptions) or if it's merely a wrapper for an exception that was thrown while processing the request.</span></span>

[!code-csharp[Main](processing-unhandled-exceptions-cs/samples/sample3.cs)]

<span data-ttu-id="32e7a-165">Bu noktada özel durum ayrıntıları bir veritabanı tablosuna oturum kod yazmak gereken tüm bilgileri vardır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-165">At this point you have all the information you need to write code that will log the exception's details to a database table.</span></span> <span data-ttu-id="32e7a-166">Her istenen sayfanın URL'sini ve şu anda oturum açmış kullanıcı adı gibi bilgileri yararlı diğer parçalarını birlikte - türü, iletisi, yığın izleme ve benzeri - ilgi hata ayrıntılarının sütunların bulunduğu bir veritabanı tablosu oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="32e7a-166">You could create a database table with columns for each of the error details of interest - the type, the message, the stack trace, and so on - along with other useful pieces of information, such as the URL of the requested page and the name of the currently logged on user.</span></span> <span data-ttu-id="32e7a-167">İçinde `Application_Error` daha sonra veritabanına bağlanmak ve bir kayıt tablosuna Ekle olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="32e7a-167">In the `Application_Error` event handler you would then connect to the database and insert a record into the table.</span></span> <span data-ttu-id="32e7a-168">Benzer şekilde, e-posta yoluyla hatasının bir geliştirici uyarmak için kod ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="32e7a-168">Likewise, you could add code to alert a developer of the error via e-mail.</span></span>

<span data-ttu-id="32e7a-169">Böylece bu hata günlüğü ve bildirim kendiniz yapılandırmak gerekmez sonraki iki eğitimlerine incelenmesi hata günlüğü kitaplıkları kutudan çıktığında, bu tür işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="32e7a-169">The error logging libraries examined in the next two tutorials provide such functionality out of the box, so there's no need to build this error logging and notification yourself.</span></span> <span data-ttu-id="32e7a-170">Ancak, göstermeye `Error` olayı ve `Application_Error` olay işleyicisi hata ayrıntıları oturum ve geliştirici bildir, bir hata oluştuğunda bir geliştirici bildirir kod ekleyelim için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-170">However, to illustrate that the `Error` event is being raised and that the `Application_Error` event handler can be used to log error details and notify a developer, let's add code that notifies a developer when an error occurs.</span></span>

## <a name="notifying-a-developer-when-an-unhandled-exception-occurs"></a><span data-ttu-id="32e7a-171">İşlenmeyen bir özel durum oluştuğunda bir geliştirici bildirme</span><span class="sxs-lookup"><span data-stu-id="32e7a-171">Notifying a Developer When an Unhandled Exception Occurs</span></span>

<span data-ttu-id="32e7a-172">Üretim ortamında işlenmeyen bir özel durum oluştuğunda hata değerlendirmek ve eylem yapılması gerektiğini belirlemek ve geliştirme ekibi uyarı önemlidir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-172">When an unhandled exception occurs in the production environment it is important to alert the development team so that they can assess the error and determine what actions need to be taken.</span></span> <span data-ttu-id="32e7a-173">Örneğin, varsa, çift gerekir sonra veritabanına bağlanırken bir hata bağlantı dizenizi denetleyin ve, belki de bir destek bileti web şirket barındırma ile açın.</span><span class="sxs-lookup"><span data-stu-id="32e7a-173">For example, if there is an error in connecting to the database then you'll need to double check your connection string and, perhaps, open a support ticket with your web hosting company.</span></span> <span data-ttu-id="32e7a-174">Özel bir programlama hatası nedeniyle oluştuysa, ek kod veya doğrulama mantığını gibi hataları gelecekte oluşmasını engellemek için eklenmesi gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-174">If the exception occurred because of a programming error, additional code or validation logic may need to be added to prevent such errors in the future.</span></span>

<span data-ttu-id="32e7a-175">.NET Framework sınıfları [ `System.Net.Mail` ad alanı](https://msdn.microsoft.com/library/system.net.mail.aspx) bir e-posta göndermek kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-175">The .NET Framework classes in the [`System.Net.Mail` namespace](https://msdn.microsoft.com/library/system.net.mail.aspx) make it easy to send an email.</span></span> <span data-ttu-id="32e7a-176">[ `MailMessage` Sınıfı](https://msdn.microsoft.com/library/system.net.mail.mailmessage.aspx) e-posta iletisine temsil eder ve benzer özelliklere sahip `To`, `From`, `Subject`, `Body`, ve `Attachments`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-176">The [`MailMessage` class](https://msdn.microsoft.com/library/system.net.mail.mailmessage.aspx) represents an e-mail message and has properties like `To`, `From`, `Subject`, `Body`, and `Attachments`.</span></span> <span data-ttu-id="32e7a-177">`SmtpClass` Göndermek için kullanılan bir `MailMessage` SMTP sunucu ayarlarını program aracılığıyla veya bildirimli olarak belirtilebilir; belirtilen bir SMTP sunucusu kullanarak nesne [ `<system.net>` öğesi](https://msdn.microsoft.com/library/6484zdc1.aspx) içinde `Web.config file`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-177">The `SmtpClass` is used to send a `MailMessage` object using a specified SMTP server; the SMTP server settings can be specified programmatically or declaratively in the [`<system.net>` element](https://msdn.microsoft.com/library/6484zdc1.aspx) in the `Web.config file`.</span></span> <span data-ttu-id="32e7a-178">E-posta gönderme hakkında daha fazla bilgi için bir ASP.NET uygulamasında iletileri my makalesine göz atın [ASP.NET e-posta gönderme](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx)ve [System.Net.Mail SSS](http://systemnetmail.com/).</span><span class="sxs-lookup"><span data-stu-id="32e7a-178">For more information on sending e-mail messages in an ASP.NET application check out my article, [Sending Email in ASP.NET](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx), and the [System.Net.Mail FAQ](http://systemnetmail.com/).</span></span>

> [!NOTE]
> <span data-ttu-id="32e7a-179">`<system.net>` Öğesi tarafından kullanılan SMTP sunucusu ayarlarını içeren `SmtpClient` bir e-posta gönderirken, sınıf.</span><span class="sxs-lookup"><span data-stu-id="32e7a-179">The `<system.net>` element contains the SMTP server settings used by the `SmtpClient` class when sending an e-mail.</span></span> <span data-ttu-id="32e7a-180">Şirket büyük olasılıkla barındırma web uygulamanızdan e-posta göndermek için kullanabileceğiniz bir SMTP sunucusu vardır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-180">Your web hosting company likely has an SMTP server that you can use to send e-mail from your application.</span></span> <span data-ttu-id="32e7a-181">Web uygulamanızda kullanması gereken SMTP sunucusu ayarları hakkında bilgi için web ana bilgisayarın destek bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="32e7a-181">Consult your web host's support section for information on the SMTP server settings you should use in your web application.</span></span>


<span data-ttu-id="32e7a-182">Aşağıdaki kodu ekleyin `Application_Error` bir hata oluştuğunda bir geliştirici bir e-posta göndermek için olay işleyicisi:</span><span class="sxs-lookup"><span data-stu-id="32e7a-182">Add the following code to the `Application_Error` event handler to send a developer an e-mail when an error occurs:</span></span>

[!code-csharp[Main](processing-unhandled-exceptions-cs/samples/sample4.cs)]

<span data-ttu-id="32e7a-183">Yukarıdaki kod oldukça uzun olsa da, bunu toplu görüntülenen HTML geliştiriciye gönderilen e-posta oluşturur.</span><span class="sxs-lookup"><span data-stu-id="32e7a-183">While the above code is quite lengthy, the bulk of it creates the HTML that appears in the e-mail sent to the developer.</span></span> <span data-ttu-id="32e7a-184">Kod başvurarak başlatır `HttpException` tarafından döndürülen `GetLastError` yöntemi (`lastErrorWrapper`).</span><span class="sxs-lookup"><span data-stu-id="32e7a-184">The code starts by referencing the `HttpException` returned by the `GetLastError` method (`lastErrorWrapper`).</span></span> <span data-ttu-id="32e7a-185">İstek tarafından başlatılan özel durumu aracılığıyla alınır `lastErrorWrapper.InnerException` ve değişkenine atanan `lastError`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-185">The actual exception that was raised by the request is retrieved via `lastErrorWrapper.InnerException` and is assigned to the variable `lastError`.</span></span> <span data-ttu-id="32e7a-186">Türü, iletisi ve yığın izleme bilgileri alınır `lastError` ve üç dize değişkenleri depolanır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-186">The type, message, and stack trace information is retrieved from `lastError` and stored in three string variables.</span></span>

<span data-ttu-id="32e7a-187">Ardından, bir `MailMessage` adlı nesne `mm` oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="32e7a-187">Next, a `MailMessage` object named `mm` is created.</span></span> <span data-ttu-id="32e7a-188">E-posta gövdesi HTML biçimli olduğundan ve istenen sayfanın URL'sini, şu anda oturum açmış kullanıcı ve (türünü, iletisi ve yığın izlemesi) özel durum hakkında bilgi adını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="32e7a-188">The e-mail body is HTML formatted and displays the URL of the requested page, the name of the currently logged on user, and information about the exception (the type, message, and stack trace).</span></span> <span data-ttu-id="32e7a-189">Seyrek erişimli çalışmalarıdır birini `HttpException` sınıfı olan özel durum ayrıntıları sarı ekran, ölüm (YSOD) çağırarak oluşturmak için kullanılan HTML oluşturabileceğiniz [GetHtmlErrorMessage yöntemi](https://msdn.microsoft.com/library/system.web.httpexception.gethtmlerrormessage.aspx).</span><span class="sxs-lookup"><span data-stu-id="32e7a-189">One of the cool things about the `HttpException` class is that you can generate the HTML used to create the Exception Details Yellow Screen of Death (YSOD) by calling the [GetHtmlErrorMessage method](https://msdn.microsoft.com/library/system.web.httpexception.gethtmlerrormessage.aspx).</span></span> <span data-ttu-id="32e7a-190">Bu yöntem, burada özel durum ayrıntıları YSOD biçimlendirme almak ve e-posta eki olarak eklemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-190">This method is used here to retrieve the Exception Details YSOD markup and add it to the email as an attachment.</span></span> <span data-ttu-id="32e7a-191">Uyarı bir sözcük: özel durum, tetiklenen varsa `Error` olay bir HTTP tabanlı özel durum oluştu (örneğin, mevcut olmayan sayfa için bir istek) sonra `GetHtmlErrorMessage` yöntemi döndürür `null`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-191">One word of caution: if the exception that triggered the `Error` event was an HTTP-based exception (such as a request for a non-existent page) then the `GetHtmlErrorMessage` method will return `null`.</span></span>

<span data-ttu-id="32e7a-192">Son adım göndermektir `MailMessage`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-192">The final step is to send the `MailMessage`.</span></span> <span data-ttu-id="32e7a-193">Bu yeni bir oluşturarak yapılır `SmtpClient` yöntemi ve çağırma kendi `Send` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="32e7a-193">This is done by creating a new `SmtpClient` method and calling its `Send` method.</span></span>

> [!NOTE]
> <span data-ttu-id="32e7a-194">Bu kod, web uygulamanızda kullanmadan önce değerleri değiştirmek istersiniz `ToAddress` ve `FromAddress` arasındaki sabitleri support@example.com hangi e-posta adresine hata bildirim e-posta gönderilmesi gereken ve kaynaklanan.</span><span class="sxs-lookup"><span data-stu-id="32e7a-194">Before using this code in your web application you'll want to change the values in the `ToAddress` and `FromAddress` constants from support@example.com to whatever e-mail address the error notification e-mail should be sent to and originate from.</span></span> <span data-ttu-id="32e7a-195">SMTP sunucusu ayarlarını belirtmek gerekir `<system.net>` bölümüne `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-195">You'll also need to specify SMTP server settings in the `<system.net>` section in `Web.config`.</span></span> <span data-ttu-id="32e7a-196">Kullanmak için SMTP sunucusu ayarlarını belirlemek için web ana bilgisayar sağlayıcınıza başvurun.</span><span class="sxs-lookup"><span data-stu-id="32e7a-196">Consult your web host provider to determine the SMTP server settings to use.</span></span>


<span data-ttu-id="32e7a-197">Bu kod yerinde Geliştirici var. zaman hata hata özetler ve YSOD içeren bir e-posta iletisi gönderilir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-197">With this code in place anytime there's an error the developer is sent an e-mail message that summarizes the error and includes the YSOD.</span></span> <span data-ttu-id="32e7a-198">Önceki öğreticide şu çalışma zamanı hatası Genre.aspx ziyaret edip geçersiz bir geçirme tarafından gösterilen `ID` querystring gibi değer `Genre.aspx?ID=foo`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-198">In the preceding tutorial we demonstrated a runtime error by visiting Genre.aspx and passing in an invalid `ID` value through the querystring, like `Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="32e7a-199">İle sayfasını ziyaret `Global.asax` dosyayı yerinde önceki öğreticide - geliştirme ortamında üretim ortamında artıracaksınız sırasında özel durum ayrıntıları sarı ekran, ölüm, görmeye devam gibi aynı kullanıcı deneyimini üretir Özel Hata sayfasına bakın.</span><span class="sxs-lookup"><span data-stu-id="32e7a-199">Visiting the page with the `Global.asax` file in place produces the same user experience as in the preceding tutorial - in the development environment you'll continue to see the Exception Details Yellow Screen of Death, while in the production environment you'll see the custom error page.</span></span> <span data-ttu-id="32e7a-200">Var olan bu davranışa ek olarak, geliştirici bir e-posta gönderilir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-200">In addition to this existing behavior, the developer is sent an e-mail.</span></span>

<span data-ttu-id="32e7a-201">**Şekil 2** ziyaret eden alınan e-posta gösterir `Genre.aspx?ID=foo`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-201">**Figure 2** shows the e-mail received when visiting `Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="32e7a-202">E-posta gövdesi özel durum bilgileri özetler sırada `YSOD.htm` ek özel durum ayrıntıları YSOD gösterilen içerik görüntülenir (bkz **Şekil 3**).</span><span class="sxs-lookup"><span data-stu-id="32e7a-202">The e-mail body summarizes the exception information, while the `YSOD.htm` attachment displays the content that is shown in the Exception Details YSOD (see **Figure 3**).</span></span>

[![](processing-unhandled-exceptions-cs/_static/image5.png)](processing-unhandled-exceptions-cs/_static/image4.png)

<span data-ttu-id="32e7a-203">**Şekil 2**: işlenmeyen bir özel durum olduğunda geliştirici bir e-posta bildirimi gönderilir</span><span class="sxs-lookup"><span data-stu-id="32e7a-203">**Figure 2**: The Developer Is Sent An E-Mail Notification Whenever There's An Unhandled Exception</span></span>  
<span data-ttu-id="32e7a-204">([Tam boyutlu görüntüyü görüntülemek için tıklatın](processing-unhandled-exceptions-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="32e7a-204">([Click to view full-size image](processing-unhandled-exceptions-cs/_static/image6.png))</span></span>

[![](processing-unhandled-exceptions-cs/_static/image8.png)](processing-unhandled-exceptions-cs/_static/image7.png)

<span data-ttu-id="32e7a-205">**Şekil 3**: özel durum ayrıntıları YSOD ek olarak e-posta bildirimi içerir</span><span class="sxs-lookup"><span data-stu-id="32e7a-205">**Figure 3**: The E-Mail Notification Includes the Exception Details YSOD As An Attachment</span></span>  
<span data-ttu-id="32e7a-206">([Tam boyutlu görüntüyü görüntülemek için tıklatın](processing-unhandled-exceptions-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="32e7a-206">([Click to view full-size image](processing-unhandled-exceptions-cs/_static/image9.png))</span></span>

## <a name="what-about-using-the-custom-error-page"></a><span data-ttu-id="32e7a-207">Ne hakkında özel hata sayfası kullanıyor?</span><span class="sxs-lookup"><span data-stu-id="32e7a-207">What About Using the Custom Error Page?</span></span>

<span data-ttu-id="32e7a-208">Bu öğreticide gösterilen nasıl kullanılacağını `Global.asax` ve `Application_Error` işlenmeyen bir özel durum oluştuğunda kod yürütmek için olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="32e7a-208">This tutorial showed how to use `Global.asax` and the `Application_Error` event handler to execute code when an unhandled exception occurs.</span></span> <span data-ttu-id="32e7a-209">Özellikle, bu olay işleyicisi bir hatanın bir geliştirici bildirmek için kullandık; biz de hata ayrıntılarını bir veritabanında oturum için genişletebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="32e7a-209">Specifically, we used this event handler to notify a developer of an error; we could extend it to also log the error details in a database.</span></span> <span data-ttu-id="32e7a-210">Varlığını `Application_Error` olay işleyicisi son kullanıcı deneyimi etkilemez.</span><span class="sxs-lookup"><span data-stu-id="32e7a-210">The presence of the `Application_Error` event handler does not affect the end user's experience.</span></span> <span data-ttu-id="32e7a-211">Hala hata ayrıntıları YSOD, çalışma zamanı hatası YSOD veya özel hata sayfasının olması yapılandırılmış hata sayfası görürler.</span><span class="sxs-lookup"><span data-stu-id="32e7a-211">They still see the configured error page, be it the Error Details YSOD, the Runtime Error YSOD, or the custom error page.</span></span>

<span data-ttu-id="32e7a-212">Merak ediyor doğal olup olmadığını `Global.asax` dosya ve `Application_Error` olay, bir özel hata sayfası kullanılırken gereklidir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-212">It's natural to wonder whether the `Global.asax` file and `Application_Error` event is necessary when using a custom error page.</span></span> <span data-ttu-id="32e7a-213">Bir hata oluştuğunda kullanıcının özel hata sayfası gösterildiği şekilde neden olamaz biz put geliştiricisine bildirin ve hata ayrıntılarını özel hata sayfası arka plan kodu sınıfına oturum için kodu?</span><span class="sxs-lookup"><span data-stu-id="32e7a-213">When an error occurs the user is shown the custom error page so why can't we put the code to notify the developer and log the error details into the code-behind class of the custom error page?</span></span> <span data-ttu-id="32e7a-214">Özel hata sayfasının arka plandaki kod sınıfı için kod kesinlikle ekleyebilirsiniz ancak tetiklenen özel durum ayrıntıları erişiminiz yok `Error` biz incelediniz önceki öğreticide teknik kullanırken olay.</span><span class="sxs-lookup"><span data-stu-id="32e7a-214">While you can certainly add code to the custom error page's code-behind class you do not have access to the details of the exception that triggered the `Error` event when using the technique we explored in the preceding tutorial.</span></span> <span data-ttu-id="32e7a-215">Çağırma `GetLastError` özel hata sayfası yönteminden döndürür `Nothing`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-215">Calling the `GetLastError` method from the custom error page returns `Nothing`.</span></span>

<span data-ttu-id="32e7a-216">Özel hata sayfası yeniden yönlendirme ulaştığından bu davranışı için nedenidir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-216">The reason for this behavior is because the custom error page is reached via a redirect.</span></span> <span data-ttu-id="32e7a-217">İşlenmeyen bir özel durum ASP.NET altyapısı ASP.NET çalışma zamanı ulaştığında başlatır, `Error` olay (hangi yürütür `Application_Error` olay işleyicisi) ve ardından *yönlendirir* kullanıcıya bir gönderereközelhatasayfası`Response.Redirect(customErrorPageUrl)`.</span><span class="sxs-lookup"><span data-stu-id="32e7a-217">When an unhandled exception reaches the ASP.NET runtime the ASP.NET engine raises its `Error` event (which executes the `Application_Error` event handler) and then *redirects* the user to the custom error page by issuing a `Response.Redirect(customErrorPageUrl)`.</span></span> <span data-ttu-id="32e7a-218">`Response.Redirect` Yöntemi yeni bir URL, yani özel hata sayfası istemek için tarayıcı bilgilendirerek istemci bir HTTP 302 durum koduyla bir yanıt gönderir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-218">The `Response.Redirect` method sends a response to the client with an HTTP 302 status code, instructing the browser to request a new URL, namely the custom error page.</span></span> <span data-ttu-id="32e7a-219">Tarayıcı sonra bu yeni sayfa otomatik olarak ister.</span><span class="sxs-lookup"><span data-stu-id="32e7a-219">The browser then automatically requests this new page.</span></span> <span data-ttu-id="32e7a-220">Size özel hata sayfası, sayfayı ayrı olarak istendi tarayıcının adres çubuğunda özel hata sayfasının URL'sini değiştiğinden hata nereden geldiğini söyleyebilir (bkz **Şekil 4**).</span><span class="sxs-lookup"><span data-stu-id="32e7a-220">You can tell that the custom error page was requested separately from the page where the error originated because the browser's Address bar changes to the custom error page URL (see **Figure 4**).</span></span>

[![](processing-unhandled-exceptions-cs/_static/image11.png)](processing-unhandled-exceptions-cs/_static/image10.png)

<span data-ttu-id="32e7a-221">**Şekil 4**: bir hata oluştuğunda tarayıcının özel hata sayfasının URL'sini yeniden yönlendirilen</span><span class="sxs-lookup"><span data-stu-id="32e7a-221">**Figure 4**: When an Error Occurs the Browser Gets Redirected to the Custom Error Page URL</span></span>  
<span data-ttu-id="32e7a-222">([Tam boyutlu görüntüyü görüntülemek için tıklatın](processing-unhandled-exceptions-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="32e7a-222">([Click to view full-size image](processing-unhandled-exceptions-cs/_static/image12.png))</span></span>

<span data-ttu-id="32e7a-223">Sunucu HTTP 302 yönlendirmesi ile yanıtladığında işlenmeyen bir özel durum meydana geldiği istek sona ereceğini net etkisidir.</span><span class="sxs-lookup"><span data-stu-id="32e7a-223">The net effect is that the request where the unhandled exception occurred ends when the server responds with the HTTP 302 redirect.</span></span> <span data-ttu-id="32e7a-224">Taleplerde özel hata sayfası için yepyeni bir istektir; Bu nokta ASP.NET altyapısı hata bilgilerini iptal etti ve ayrıca, önceki istek içinde işlenmeyen bir özel özel hata sayfası için yeni istek ilişkilendirmek için hiçbir yolu yoktur.</span><span class="sxs-lookup"><span data-stu-id="32e7a-224">The subsequent request to the custom error page is a brand new request; by this point the ASP.NET engine has discarded the error information and, moreover, has no way to associate the unhandled exception in the previous request with the new request for the custom error page.</span></span> <span data-ttu-id="32e7a-225">Nedeni budur `GetLastError` döndürür `null` özel hata sayfasından çağrıldığında.</span><span class="sxs-lookup"><span data-stu-id="32e7a-225">This is why `GetLastError` returns `null` when called from the custom error page.</span></span>

<span data-ttu-id="32e7a-226">Ancak, hatanın nedeni aynı istek sırasında çalıştırılan özel hata sayfasının olması mümkündür.</span><span class="sxs-lookup"><span data-stu-id="32e7a-226">However, it is possible to have the custom error page executed during the same request that caused the error.</span></span> <span data-ttu-id="32e7a-227">[ `Server.Transfer(url)` ](https://msdn.microsoft.com/library/system.web.httpserverutility.transfer.aspx) Yöntemi belirtilen URL'ye yürütme aktarır ve içinde aynı isteğini işler.</span><span class="sxs-lookup"><span data-stu-id="32e7a-227">The [`Server.Transfer(url)`](https://msdn.microsoft.com/library/system.web.httpserverutility.transfer.aspx) method transfers execution to the specified URL and processes it within the same request.</span></span> <span data-ttu-id="32e7a-228">Kod taşıma `Application_Error` özel hata sayfasının arka plandaki kod sınıfı içinde değiştirerek, olay işleyicisi `Global.asax` aşağıdaki kod ile:</span><span class="sxs-lookup"><span data-stu-id="32e7a-228">You could move the code in the `Application_Error` event handler to the custom error page's code-behind class, replacing it in `Global.asax` with the following code:</span></span>

[!code-csharp[Main](processing-unhandled-exceptions-cs/samples/sample5.cs)]

<span data-ttu-id="32e7a-229">İşlenmeyen bir özel durum oluştuğunda artık `Application_Error` olay işleyicisi HTTP durum kodu göre uygun özel hata sayfası için Denetim aktarır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-229">Now when an unhandled exception occurs the `Application_Error` event handler transfers control to the appropriate custom error page based on the HTTP status code.</span></span> <span data-ttu-id="32e7a-230">Denetim aktarılmış olduğu için özel hata sayfası işlenmeyen bir özel durum bilgisini erişimi `Server.GetLastError` ve hata geliştiricisine bildirin ve ayrıntılarını oturum açın.</span><span class="sxs-lookup"><span data-stu-id="32e7a-230">Because control was transferred, the custom error page has access to the unhandled exception information via `Server.GetLastError` and can notify a developer of the error and log its details.</span></span> <span data-ttu-id="32e7a-231">`Server.Transfer` Çağrısı kullanıcı için özel hata sayfası yeniden yönlendirme gelen ASP.NET altyapısı durdurur.</span><span class="sxs-lookup"><span data-stu-id="32e7a-231">The `Server.Transfer` call stops the ASP.NET engine from redirecting the user to the custom error page.</span></span> <span data-ttu-id="32e7a-232">Bunun yerine, özel hata sayfasının içeriği hata sayfası için yanıt olarak döndürülür.</span><span class="sxs-lookup"><span data-stu-id="32e7a-232">Instead, the custom error page's content is returned as the response to the page that generated the error.</span></span>

## <a name="summary"></a><span data-ttu-id="32e7a-233">Özet</span><span class="sxs-lookup"><span data-stu-id="32e7a-233">Summary</span></span>

<span data-ttu-id="32e7a-234">Bir ASP.NET web uygulamasında işlenmeyen bir özel durum oluştuğunda ASP.NET çalışma zamanı başlatır `Error` olay ve yapılandırılmış hata sayfasını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="32e7a-234">When an unhandled exception occurs in an ASP.NET web application the ASP.NET runtime raises the `Error` event and displays the configured error page.</span></span> <span data-ttu-id="32e7a-235">Hata Geliştirici bildirmemizi ayrıntılarını oturum veya hata olayı için bir olay işleyicisi oluşturarak bazı diğer biçimde işlenemedi.</span><span class="sxs-lookup"><span data-stu-id="32e7a-235">We can notify the developer of the error, log its details, or process it in some other fashion, by creating an event handler for the Error event.</span></span> <span data-ttu-id="32e7a-236">Bir olay işleyicisi oluşturmanın iki yolu vardır `HttpApplication` olayları ister `Error`: içinde `Global.asax` dosya veya HTTP modülü.</span><span class="sxs-lookup"><span data-stu-id="32e7a-236">There are two ways to create an event handler for `HttpApplication` events like `Error`: in the `Global.asax` file or from an HTTP Module.</span></span> <span data-ttu-id="32e7a-237">Bu öğreticide gösterilen nasıl oluşturulacağı bir `Error` olay işleyicisini `Global.asax` hata geliştiricileri e-posta iletisine yoluyla uyarır dosya.</span><span class="sxs-lookup"><span data-stu-id="32e7a-237">This tutorial showed how to create an `Error` event handler in the `Global.asax` file that notifies developers of an error by means of an e-mail message.</span></span>

<span data-ttu-id="32e7a-238">Oluşturma bir `Error` olay işleyicisi, bazı benzersiz veya özelleştirilmiş şekilde işlenmeyen özel durumları işlemek gerekiyorsa yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="32e7a-238">Creating an `Error` event handler is useful if you need to process unhandled exceptions in some unique or customized manner.</span></span> <span data-ttu-id="32e7a-239">Bununla birlikte, kendi oluşturmak `Error` olay işleyicisi özel durumu günlüğe kaydetmek için veya bir geliştirici bildirmek için değil zamanınızı en etkili şekilde kullanımına zaten var gibi ayarlanabilir birkaç dakika içinde ücretsiz ve kullanımı kolay hata günlüğü kitaplıkları.</span><span class="sxs-lookup"><span data-stu-id="32e7a-239">However, creating your own `Error` event handler to log the exception or to notify a developer is not the most efficient use of your time as there already exist free and easy to use error logging libraries that can be setup in a matter of minutes.</span></span> <span data-ttu-id="32e7a-240">Sonraki iki öğreticileri iki tür kitaplıklarını inceleyin.</span><span class="sxs-lookup"><span data-stu-id="32e7a-240">The next two tutorials examine two such libraries.</span></span>

<span data-ttu-id="32e7a-241">Mutluluk programlama!</span><span class="sxs-lookup"><span data-stu-id="32e7a-241">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="32e7a-242">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="32e7a-242">Further Reading</span></span>

<span data-ttu-id="32e7a-243">Bu öğreticide konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="32e7a-243">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="32e7a-244">ASP.NET HTTP modülleri ve HTTP işleyicileri genel bakış</span><span class="sxs-lookup"><span data-stu-id="32e7a-244">ASP.NET HTTP Modules and HTTP Handlers Overview</span></span>](https://support.microsoft.com/kb/307985)
- [<span data-ttu-id="32e7a-245">İşlenmeyen özel durum işleme işlenmeyen özel durumlar için - düzgün bir şekilde yanıt</span><span class="sxs-lookup"><span data-stu-id="32e7a-245">Gracefully Responding to Unhandled Exceptions - Processing Unhandled Exceptions</span></span>](http://aspnet.4guysfromrolla.com/articles/091306-1.aspx)
- [<span data-ttu-id="32e7a-246">`HttpApplication`Sınıf ve ASP.NET uygulama nesnesi</span><span class="sxs-lookup"><span data-stu-id="32e7a-246">`HttpApplication` Class and the ASP.NET Application Object</span></span>](http://www.eggheadcafe.com/articles/20030211.asp)
- [<span data-ttu-id="32e7a-247">HTTP işleyicileri ve ASP.NET HTTP modülleri</span><span class="sxs-lookup"><span data-stu-id="32e7a-247">HTTP Handlers and HTTP Modules in ASP.NET</span></span>](http://www.15seconds.com/Issue/020417.htm)
- [<span data-ttu-id="32e7a-248">ASP.NET e-posta gönderme</span><span class="sxs-lookup"><span data-stu-id="32e7a-248">Sending Email in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx)
- [<span data-ttu-id="32e7a-249">Anlama `Global.asax` dosyası</span><span class="sxs-lookup"><span data-stu-id="32e7a-249">Understanding the `Global.asax` File</span></span>](http://aspalliance.com/1114_Understanding_the_Globalasax_file.all)
- [<span data-ttu-id="32e7a-250">HTTP modülleri ve işleyicileri takılabilir ASP.NET bileşenleri oluşturmak için kullanma</span><span class="sxs-lookup"><span data-stu-id="32e7a-250">Using HTTP Modules and Handlers to Create Pluggable ASP.NET Components</span></span>](https://msdn.microsoft.com/library/aa479332.aspx)
- [<span data-ttu-id="32e7a-251">ASP.NET ile çalışma `Global.asax` dosyası</span><span class="sxs-lookup"><span data-stu-id="32e7a-251">Working with the ASP.NET `Global.asax` File</span></span>](http://articles.techrepublic.com.com/5100-10878_11-5771721.html)
- [<span data-ttu-id="32e7a-252">İle çalışma `HttpApplication` örnekleri</span><span class="sxs-lookup"><span data-stu-id="32e7a-252">Working with `HttpApplication` Instances</span></span>](https://msdn.microsoft.com/library/a0xez8f2.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="32e7a-253">[Önceki](displaying-a-custom-error-page-cs.md)
[sonraki](logging-error-details-with-asp-net-health-monitoring-cs.md)</span><span class="sxs-lookup"><span data-stu-id="32e7a-253">[Previous](displaying-a-custom-error-page-cs.md)
[Next](logging-error-details-with-asp-net-health-monitoring-cs.md)</span></span>

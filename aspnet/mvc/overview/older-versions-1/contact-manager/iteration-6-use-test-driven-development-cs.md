---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Yineleme #6 – kullanmak teste dayalı geliştirme (C#) | Microsoft Docs'
author: microsoft
description: Bu altıncı yinelemede yeni işlevsellik uygulamamız için birim testleri ilk yazma ve birim testleri karşı kod yazma ekleriz. Bu yinelemede...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: 94502625f66d3eb08a24b8f2a369bf456a3367b1
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="8e01a-104">Yineleme #6 – kullanmak teste dayalı geliştirme (C#)</span><span class="sxs-lookup"><span data-stu-id="8e01a-104">Iteration #6 – Use test-driven development (C#)</span></span>
====================
<span data-ttu-id="8e01a-105">tarafından [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="8e01a-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="8e01a-106">Kodu indirme</span><span class="sxs-lookup"><span data-stu-id="8e01a-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="8e01a-107">Bu altıncı yinelemede yeni işlevsellik uygulamamız için birim testleri ilk yazma ve birim testleri karşı kod yazma ekleriz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="8e01a-108">Bu yinelemede kişi grupları ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="8e01a-109">Bir kişi yönetim ASP.NET MVC uygulaması (C#) oluşturma</span><span class="sxs-lookup"><span data-stu-id="8e01a-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="8e01a-110">Bu öğretici serisinde tamamlamak için tüm kişi yönetim uygulamanın başından oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8e01a-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="8e01a-111">Kişi Yöneticisi uygulama kişi listesi için kişi bilgilerini - adları, telefon numarası ve e-posta adresleri - depolamak sağlar.</span><span class="sxs-lookup"><span data-stu-id="8e01a-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="8e01a-112">Biz uygulamayı birden çok kez oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8e01a-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="8e01a-113">Her bir yineleme, biz kademeli olarak uygulama geliştirin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="8e01a-114">Bu birden çok yineleme yaklaşımı, her değişiklik nedeni anlamak etkinleştirmek için hedefidir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="8e01a-115">Yineleme #1 - uygulama oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8e01a-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="8e01a-116">İlk yinelemede Contact Manager en basit yolu olası oluşturuyoruz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="8e01a-117">Temel veritabanı işlemleri için destek eklediğimiz: oluşturma, okuma, güncelleştirme ve silme (CRUD).</span><span class="sxs-lookup"><span data-stu-id="8e01a-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="8e01a-118">Yineleme #2 - iyi Ara uygulama olun.</span><span class="sxs-lookup"><span data-stu-id="8e01a-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="8e01a-119">Bu yinelemede biz ana görünüm sayfası, ASP.NET MVC varsayılan değiştirme ve geçişli stil sayfası uygulama görünümünü geliştirir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="8e01a-120">Yineleme #3 - form doğrulama ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="8e01a-121">Üçüncü yinelemede temel form doğrulama ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="8e01a-122">Biz, kişilerin gerekli form alanları tamamlamadan bir form gönderme engelleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="8e01a-123">Biz de e-posta adresleri ve telefon numaralarını doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="8e01a-124">Yineleme #4 - gevşek uygulama olun.</span><span class="sxs-lookup"><span data-stu-id="8e01a-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="8e01a-125">Bu üçüncü yinelemede biz Bakım ve ilgili kişi Yöneticisi uygulaması değişiklik kolaylaştırmak için çeşitli yazılım tasarım desenleri yararlanın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-125">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="8e01a-126">Örneğin, uygulamamız havuz deseni ve bağımlılık ekleme düzeni kullanmak üzere yeniden.</span><span class="sxs-lookup"><span data-stu-id="8e01a-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="8e01a-127">Yineleme #5 - birim testleri oluşturma.</span><span class="sxs-lookup"><span data-stu-id="8e01a-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="8e01a-128">Beşinci yinelemede biz uygulamamız korumak ve birim testleri ekleyerek değiştirmek kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="8e01a-129">Biz bizim veri modeli sınıflarını mock ve bizim denetleyicileri ve Doğrulama mantığı için birim testleri oluşturma.</span><span class="sxs-lookup"><span data-stu-id="8e01a-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="8e01a-130">Yineleme #6 - teste dayalı geliştirme kullanın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="8e01a-131">Bu altıncı yinelemede yeni işlevsellik uygulamamız için birim testleri ilk yazma ve birim testleri karşı kod yazma ekleriz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="8e01a-132">Bu yinelemede kişi grupları ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="8e01a-133">Yineleme #7 - Ajax işlevselliği ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="8e01a-134">Yedinci yinelemede biz uygulamamız performansını ve yanıt hızını Ajax için destek ekleyerek geliştirin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="8e01a-135">Bu yineleme</span><span class="sxs-lookup"><span data-stu-id="8e01a-135">This Iteration</span></span>

<span data-ttu-id="8e01a-136">Contact Manager uygulamasının önceki yinelemede kodumuza için bir güvenlik ağı sağlamak için birim testleri oluşturduk.</span><span class="sxs-lookup"><span data-stu-id="8e01a-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="8e01a-137">Bizim kodu değiştirmek için daha esnek olmak için birim testleri oluşturmak için motivasyon oluştu.</span><span class="sxs-lookup"><span data-stu-id="8e01a-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="8e01a-138">Yerinde birim testleri biz sonsuza dek kodumuza için herhangi bir değişiklik yapmak ve hemen biz mevcut işlevselliğini kıran olup olmadığını bilmek.</span><span class="sxs-lookup"><span data-stu-id="8e01a-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="8e01a-139">Bu yinelemede tamamen farklı bir amaç için birim testleri kullanırız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="8e01a-140">Bu yinelemede birim testleri adlı bir uygulama tasarımı felsefesi bir parçası olarak kullandığımız *teste dayalı geliştirme*.</span><span class="sxs-lookup"><span data-stu-id="8e01a-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="8e01a-141">Teste dayalı geliştirme alıştırma, testleri ilk yazmak ve testleri karşı kod yazma.</span><span class="sxs-lookup"><span data-stu-id="8e01a-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="8e01a-142">Daha hassas bir şekilde teste dayalı geliştirme kapattığınızdan, kod oluştururken tamamlaması üç adım vardır (kırmızı / yeşil/düzenleme):</span><span class="sxs-lookup"><span data-stu-id="8e01a-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="8e01a-143">(Kırmızı) başarısız olan birim testi yazma</span><span class="sxs-lookup"><span data-stu-id="8e01a-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="8e01a-144">Birim testi (yeşil) geçirir kod yazma</span><span class="sxs-lookup"><span data-stu-id="8e01a-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="8e01a-145">Kodunuzu (düzenleme) yeniden Düzenle</span><span class="sxs-lookup"><span data-stu-id="8e01a-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="8e01a-146">İlk olarak, birim testi yazma.</span><span class="sxs-lookup"><span data-stu-id="8e01a-146">First, you write the unit test.</span></span> <span data-ttu-id="8e01a-147">Birim testi davranışlarını kodunuzun nasıl beklediğiniz için amacınız hızlı.</span><span class="sxs-lookup"><span data-stu-id="8e01a-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="8e01a-148">Birim testi ilk oluşturduğunuzda, birim testi başarısız olması.</span><span class="sxs-lookup"><span data-stu-id="8e01a-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="8e01a-149">Henüz test karşılayan herhangi bir uygulama kodu yazdığınız değil çünkü test başarısız olması.</span><span class="sxs-lookup"><span data-stu-id="8e01a-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="8e01a-150">Ardından, sırayla geçirmek birim testi için yeterli bir kod yazın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="8e01a-151">Hedef laziest, sloppiest ve hızlı olası yolla kod yazmaktır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="8e01a-152">Uygulamanızın mimarisini zaman düşünmek harcamamalısınız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="8e01a-153">Bunun yerine, kod birim testi tarafından ifade amacınıza karşılamak için gerekli en düşük düzeyde yazma odaklanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="8e01a-154">Son olarak, yeterli kodu yazdıktan sonra geri adım ve uygulamanızı genel mimarisi göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8e01a-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="8e01a-155">Bu adımda, (düzenleme) yeniden yazma yazılım tasarımı yararlanarak kodunuzu düzenleri--havuz deseni gibi--kodunuzu daha rahat olmasını sağlayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="8e01a-156">Kodunuzu birim testleri tarafından kapatıldığından kodunuzu bu adımda fearlessly yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="8e01a-157">Teste dayalı geliştirme kapattığınızdan neden birçok avantaj vardır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="8e01a-158">Birincisi, test güdümlü geliştirme gerçekte yazılması gereken kodu odaklanmanızı zorlar.</span><span class="sxs-lookup"><span data-stu-id="8e01a-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="8e01a-159">Yalnızca belirli bir testi geçirmek için yeterli kod yazmaya sürekli odaklanmıştır çünkü konuları wandering ve hiçbir zaman kullanacağınız kodu oldukça büyük miktardaki yazma engellenir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="8e01a-160">İkinci olarak, bir "ilk test" tasarım Metodoloji kodunuzu nasıl kullanılacağını perspektifinden kod yazmaya zorlar.</span><span class="sxs-lookup"><span data-stu-id="8e01a-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="8e01a-161">Diğer bir deyişle, teste dayalı geliştirme kapattığınızdan, sürekli bir kullanıcı açısından testlerinizi yazıyorsanız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="8e01a-162">Bu nedenle, teste dayalı geliştirme temizleyici ve daha anlaşılır API'leri neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="8e01a-163">Son olarak, teste dayalı geliştirme normal bir uygulama yazma işleminin bir parçası olarak birim testleri yazma zorlar.</span><span class="sxs-lookup"><span data-stu-id="8e01a-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="8e01a-164">Bir proje süre sonu yaklaştığında test penceresindeki gider ilk şey genellikle etmektir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="8e01a-165">Teste dayalı geliştirme kapattığınızdan, diğer yandan, teste dayalı geliştirme birim testleri uygulama oluşturma işlemi için merkezi bir kezden birim testleri yazma hakkında virtuous olmasını daha yüksektir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="8e01a-166">Teste dayalı geliştirme hakkında daha fazla bilgi için ı Michael geçiş yumuşatma kitap okumanızı öneririz **eski kod ile verimli çalışan**.</span><span class="sxs-lookup"><span data-stu-id="8e01a-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="8e01a-167">Bu yinelemede Contact Manager uygulamamız için yeni bir özellik ekleriz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="8e01a-168">İlgili kişi grupları için destek ekleriz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-168">We add support for Contact Groups.</span></span> <span data-ttu-id="8e01a-169">İlgili kişi iş gibi kategorilere kişilerinizi düzenlemek için gruplar ve arkadaş grupları kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="8e01a-170">Bu yeni işlevsellik uygulamamız için teste dayalı geliştirme sürecini izleyerek ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="8e01a-171">Bizim birim testleri ilk yazma ve biz tüm bu testleri karşı bizim kod yazacaksınız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="8e01a-172">Test</span><span class="sxs-lookup"><span data-stu-id="8e01a-172">What Gets Tested</span></span>

<span data-ttu-id="8e01a-173">Biz önceki bir yinelemede anlatıldığı gibi genellikle değil veri erişim mantığı için birim testleri yazma veya mantığı görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="8e01a-174">Bir veritabanına erişirken görece yavaş bir işlem olduğundan veri erişimi mantığı için t yazma birim testleri istemiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="8e01a-175">Bir görünüm erişme dönen görece yavaş işlemi olan bir web sunucusu gerektirdiğinden görünüm mantığı için t yazma birim testleri istemiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="8e01a-176">Test tekrar tekrar çok hızlı yürütülebilir sürece, shouldn t yazma birim testi</span><span class="sxs-lookup"><span data-stu-id="8e01a-176">You shouldn t write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="8e01a-177">Teste dayalı geliştirme birim testleri tarafından yönlendirilen olduğundan, denetleyici ve iş mantığı yazmaya başlangıçta odaklanır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="8e01a-178">Veritabanı veya görünümler temas kaçının.</span><span class="sxs-lookup"><span data-stu-id="8e01a-178">We avoid touching the database or views.</span></span> <span data-ttu-id="8e01a-179">Biz t won veritabanını değiştirme veya Bu öğreticide sonuna kadar bizim görünümler oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8e01a-179">We won t modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="8e01a-180">Ne test edilebilir ile başlatın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="8e01a-181">Kullanıcı hikayeleri oluşturma</span><span class="sxs-lookup"><span data-stu-id="8e01a-181">Creating User Stories</span></span>

<span data-ttu-id="8e01a-182">Teste dayalı geliştirme kapattığınızdan, her zaman bir sınama yazarak başlattığınızda.</span><span class="sxs-lookup"><span data-stu-id="8e01a-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="8e01a-183">Bu sorunun hemen başlatır: nasıl karar ilk yazmak için hangi test?</span><span class="sxs-lookup"><span data-stu-id="8e01a-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="8e01a-184">Bu soruya karşılık olarak bir dizi yazmalısınız [ **kullanıcı hikayeleri**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="8e01a-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="8e01a-185">Kullanıcı hikayesi yazılım gereksinimi çok kısa (genellikle bir cümle) açıklamasıdır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="8e01a-186">Teknik olmayan bir kullanıcı açısından yazılmış bir gereksinim açıklamasını olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="8e01a-187">Burada s yeni kişi grubu işlevsellikten gerekli özellikleri açıklamak kullanıcı hikayeleri kümesi:</span><span class="sxs-lookup"><span data-stu-id="8e01a-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="8e01a-188">Kullanıcı, kişi grupları listesini görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="8e01a-189">Kullanıcı yeni bir kişi grubu oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="8e01a-190">Kullanıcı, var olan bir kişi grubunu silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="8e01a-191">Kullanıcı bir kişi grubuna yeni bir kişi oluştururken seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="8e01a-192">Kullanıcı, var olan bir kişi düzenlerken kişi grubunu seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="8e01a-193">Kişi grupları listesini dizin görünümünde görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="8e01a-194">Bir kullanıcı bir kişi grubu tıkladığında, kişiler eşleşen bir listesi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="8e01a-195">Bu kullanıcı hikayeleri listesinin bir müşteri tarafından tamamen anlaşılabilir olduğuna dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="8e01a-196">Teknik uygulamadan ayrıntılarının hiçbir Bahsetme yoktur.</span><span class="sxs-lookup"><span data-stu-id="8e01a-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="8e01a-197">Uygulamanızı oluşturma sırasında sürecinde kullanıcı hikayeleri kümesinde daha gelişmiş haline gelebilir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="8e01a-198">Birden çok hikayeleri (gereksinimlerini) kullanıcı hikayesi kesintiye uğrayabilir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="8e01a-199">Örneğin, yeni bir kişi grubu oluşturmayı doğrulama içermelidir karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="8e01a-200">Adı olmayan bir kişi grubu gönderme bir doğrulama hatası döndürmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="8e01a-201">Kullanıcı hikayeleri listesini oluşturduktan sonra ilk birim testi yazmaya hazırsınız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="8e01a-202">Kişi grupları listesini görüntülemek için bir birim testi oluşturarak başlayacağız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="8e01a-203">Kişi grupları listeleme</span><span class="sxs-lookup"><span data-stu-id="8e01a-203">Listing Contact Groups</span></span>

<span data-ttu-id="8e01a-204">Bizim ilk kullanıcı hikayesi, bir kullanıcı kişi grupları listesini görüntülemek için ' dir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="8e01a-205">Bir test ile bu yazıyı ifade etmek gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-205">We need to express this story with a test.</span></span>

<span data-ttu-id="8e01a-206">ContactManager.Tests proje denetleyicileri klasörüne sağ tıklayarak yeni bir birim testi oluşturma seçme **Ekle, Yeni Test**, seçerek **birim testi** şablonu (bkz: Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="8e01a-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="8e01a-207">Yeni birim GroupControllerTest.cs test ve tıklatın adı **Tamam** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="8e01a-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


<span data-ttu-id="8e01a-208">[![GroupControllerTest birim testi ekleme](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="8e01a-209">**Şekil 01**: GroupControllerTest birim testi ekleme ([tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="8e01a-210">Bizim ilk birim testi listeleme 1'de yer alır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="8e01a-211">Bu test grubu denetleyicisi İNDİS() yöntemini grupların kümesini döndürür doğrular.</span><span class="sxs-lookup"><span data-stu-id="8e01a-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="8e01a-212">Test grupları koleksiyonu görünümünde veriler döndürülür doğrular.</span><span class="sxs-lookup"><span data-stu-id="8e01a-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="8e01a-213">**1 - Controllers\GroupControllerTest.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="8e01a-214">İlk listeleme 1. Visual Studio'da kod yazdığınızda, çok sayıda kırmızı dalgalı çizgiler elde edersiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="8e01a-215">GroupController veya grup sınıfları oluşturmadınız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="8e01a-216">Bu noktada, t bile yapı geçebiliriz uygulamamız biz t, bu nedenle ilk bizim birim testi yürütün.</span><span class="sxs-lookup"><span data-stu-id="8e01a-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="8e01a-217">İyi o s.</span><span class="sxs-lookup"><span data-stu-id="8e01a-217">That s good.</span></span> <span data-ttu-id="8e01a-218">Bu, başarısız olan test olarak sayar.</span><span class="sxs-lookup"><span data-stu-id="8e01a-218">That counts as a failing test.</span></span> <span data-ttu-id="8e01a-219">Bu nedenle, biz şimdi uygulama kod yazmaya başlamak için izne sahip.</span><span class="sxs-lookup"><span data-stu-id="8e01a-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="8e01a-220">Bizim test yürütmek için yeterli kod yazmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="8e01a-221">Listeleme 2 grubu denetleyicisi sınıfında tam minimum birim testi geçirmek için gerekli kod içerir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="8e01a-222">İNDİS() Eylem grupları (Grup sınıfı listeleme 3'te tanımlanır) statik olarak kodlanmış bir listesini döndürür.</span><span class="sxs-lookup"><span data-stu-id="8e01a-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="8e01a-223">**2 - Controllers\GroupController.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="8e01a-224">**3 - Models\Group.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="8e01a-225">Sizi Projemizin için GroupController ve Grup sınıfları ekledikten sonra ilk bizim birim testi başarılı bir şekilde tamamlandıktan (bkz: Şekil 2).</span><span class="sxs-lookup"><span data-stu-id="8e01a-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="8e01a-226">Biz testi geçmesi gereken en düşük iş yaptınız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="8e01a-227">Karşılayın dalmaya geldi.</span><span class="sxs-lookup"><span data-stu-id="8e01a-227">It is time to celebrate.</span></span>


<span data-ttu-id="8e01a-228">[![Başarılı!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="8e01a-229">**Şekil 02**: başarılı! () [Tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="8e01a-230">Kişi grupları oluşturma</span><span class="sxs-lookup"><span data-stu-id="8e01a-230">Creating Contact Groups</span></span>

<span data-ttu-id="8e01a-231">Şimdi biz ikinci kullanıcı hikayesine geçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="8e01a-232">Yeni kişi grupları oluşturma olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="8e01a-233">Bu amaç ile bir test ifade etmek gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="8e01a-234">Test listeleme 4'teki yeni bir grup yöntemiyle İNDİS() yöntemi tarafından döndürülen gruplarının listesini grup ekler Create() çağıran doğrular.</span><span class="sxs-lookup"><span data-stu-id="8e01a-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="8e01a-235">Yeni bir grubu oluşturursanız, diğer bir deyişle, sonra ı yeni Grup İNDİS() yöntemi tarafından döndürülen gruplarının listesini geri almanız mümkün olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="8e01a-236">**4 - Controllers\GroupControllerTest.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="8e01a-237">Listeleme 4 test grubu Denetleyicisi Grup yeni kişiyle Create() yöntemi çağırır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="8e01a-238">Ardından, test grubu denetleyicisi İNDİS() yöntemi çağırma yeni Grup görünümü içinde döndürüldüğünü doğrular.</span><span class="sxs-lookup"><span data-stu-id="8e01a-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="8e01a-239">Değiştirilen Grup denetleyicisi listeleme 5'te tam en yeni test geçirmek için gerekli değişiklikleri içerir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="8e01a-240">**5 - Controllers\GroupController.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="8e01a-241">Grup denetleyicisi listeleme 5'teki yeni bir Create() eylem vardır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="8e01a-242">Bu eylem, bir grup gruplarının bir koleksiyona ekler.</span><span class="sxs-lookup"><span data-stu-id="8e01a-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="8e01a-243">İNDİS() eylem Grup koleksiyonu içeriğini döndürmek için değişiklik dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="8e01a-244">Bir kez daha, biz tam birim testi geçmesi gereken iş miktarına gerçekleştirdiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="8e01a-245">Grup denetleyiciye Biz bu değişiklikleri yaptıktan sonra tüm bizim biriminin testler geçişi.</span><span class="sxs-lookup"><span data-stu-id="8e01a-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="8e01a-246">Doğrulama ekleme</span><span class="sxs-lookup"><span data-stu-id="8e01a-246">Adding Validation</span></span>

<span data-ttu-id="8e01a-247">Bu gereksinim açıkça kullanıcı hikayesi belirtmiştik değil.</span><span class="sxs-lookup"><span data-stu-id="8e01a-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="8e01a-248">Ancak, makul bir gruba bir ada sahip olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="8e01a-249">Aksi takdirde, kişileri gruplar halinde düzenleme çok yararlı olmaz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="8e01a-250">6 listeleme bu amaç belirtmez yeni bir test içerir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="8e01a-251">Bu test, model durumundaki bir doğrulama hata iletisi adı sonuçlarında girmeden bir grup oluşturmayı denemeden doğrular.</span><span class="sxs-lookup"><span data-stu-id="8e01a-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="8e01a-252">**6 - Controllers\GroupControllerTest.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="8e01a-253">Bu test karşılamak için size bir Name özelliğine bizim Grup sınıfı (7 listeleme bakın) eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="8e01a-254">Ayrıca, biz bizim grubu denetleyicisi s Create() eylemi (8 listeleme bakın) küçük bir bit Doğrulama mantığı eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="8e01a-255">**7 - Models\Group.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="8e01a-256">**8 - Controllers\GroupController.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="8e01a-257">Grup denetleyicisi Create() eylemi şimdi doğrulama ve veritabanı mantığı içerdiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="8e01a-258">Şu anda bir bellek içi koleksiyonu fazlasını grubu denetleyicisi tarafından kullanılan veritabanı oluşur.</span><span class="sxs-lookup"><span data-stu-id="8e01a-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="8e01a-259">Yeniden düzenleme süresi</span><span class="sxs-lookup"><span data-stu-id="8e01a-259">Time to Refactor</span></span>

<span data-ttu-id="8e01a-260">Yeşil/Kırmızı/düzenleme Üçüncü adımda düzenleme parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="8e01a-261">Bu noktada, biz bizim koddan adım ve biz uygulamamız tasarımını geliştirmek için nasıl yeniden göz önünde bulundurun gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="8e01a-262">Düzenleme aşaması, yazılım tasarım ilkeleri ve modeller uygulamanın en iyi şekilde sabit düşünüyoruz aşamasıdır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="8e01a-263">Biz kodumuza kodu tasarımını geliştirmek için seçeneğini belirledik herhangi bir şekilde değiştirmek ücretsizdir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="8e01a-264">Bir güvenlik ağı bize mevcut işlevselliğini kesilmesini önlemek birim testleri sunuyoruz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="8e01a-265">Şu anda, iyi yazılım tasarımı perspektifinden karmakarışık bizim Grup denetleyicisidir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="8e01a-266">Grup denetleyicisi tangled karmakarışık doğrulama ve veri erişim kodu içerir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="8e01a-267">Tek sorumluluk ilkesini ihlal önlemek için Biz bu sorunları farklı sınıflara ayırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="8e01a-268">Bizim işlenmiş Grup denetleyicisi sınıfı listeleme 9'yer alır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="8e01a-269">Denetleyici ContactManager hizmet katmanı kullanmak üzere değiştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="8e01a-270">Bu kişi denetleyicisiyle kullandığımız aynı hizmet katmanıdır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="8e01a-271">10 listeleme ContactManager hizmet katmana doğrulanıyor, listeleme ve grupları oluşturma desteklemek için eklenen yeni yöntemler içerir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="8e01a-272">IContactManagerService arabirimi yeni yöntemleri içerecek şekilde güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="8e01a-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="8e01a-273">11 listeleme IContactManagerRepository arabirimini uygulayan yeni bir FakeContactManagerRepository sınıfı içerir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="8e01a-274">Ayrıca IContactManagerRepository arabirimini uygulayan EntityContactManagerRepository sınıfı farklı olarak, yeni bizim FakeContactManagerRepository sınıfı veritabanıyla iletişim kurmaz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="8e01a-275">FakeContactManagerRepository sınıfı bir bellek içi koleksiyonu veritabanı için bir proxy olarak kullanır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="8e01a-276">Sahte deposu katmanı olarak bu sınıfın bizim birim testleri kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="8e01a-277">**9 - Controllers\GroupController.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="8e01a-278">**10 - Controllers\ContactManagerService.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="8e01a-279">**11 - Controllers\FakeContactManagerRepository.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="8e01a-280">EntityContactManagerRepository sınıfında CreateGroup() ve ListGroups() yöntemleri uygulamak için arabirimi gerektirir IContactManagerRepository değiştirme kullanın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="8e01a-281">Bunu yapmak için laziest ve en hızlı yolu şuna saplama yöntemleri eklemektir:</span><span class="sxs-lookup"><span data-stu-id="8e01a-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="8e01a-282">Son olarak, bu değişiklikleri uygulamamız tasarımını bizim birim testleri bazı değişiklikler yapmak için bize gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="8e01a-283">Şimdi FakeContactManagerRepository birim testleri gerçekleştirirken kullanmamız gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8e01a-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="8e01a-284">Güncelleştirilmiş GroupControllerTest sınıfı listeleme 12'de yer alır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="8e01a-285">**12 - Controllers\GroupControllerTest.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="8e01a-286">Bunların tümü vermiyoruz sonra bir kez daha, tüm bizim birim testleri geçişi değiştirir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="8e01a-287">Biz yeşil/kırmızı/düzenleme tüm döngüsünü tamamladınız.</span><span class="sxs-lookup"><span data-stu-id="8e01a-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="8e01a-288">Biz ilk iki kullanıcı hikayeleri uyguladık.</span><span class="sxs-lookup"><span data-stu-id="8e01a-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="8e01a-289">Kullanıcı hikayelerini ifade gereksinimleri için birim testleri destekleme artık vardır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="8e01a-290">Kullanıcı hikayeleri kalanı uygulama yeşil/kırmızı/düzenleme aynı döngüsünü yinelenen içerir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="8e01a-291">Veritabanımıza değiştirme</span><span class="sxs-lookup"><span data-stu-id="8e01a-291">Modifying our Database</span></span>

<span data-ttu-id="8e01a-292">Ne yazık ki, biz bizim birim testleri tarafından ifade gereksinimlerinin tümüne uyduğunuzdan olsa bile, bizim İş yapılmadı.</span><span class="sxs-lookup"><span data-stu-id="8e01a-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="8e01a-293">Biz yine Veritabanımıza değiştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-293">We still need to modify our database.</span></span>

<span data-ttu-id="8e01a-294">Yeni bir grup veritabanı tablosu oluşturmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-294">We need to create a new Group database table.</span></span> <span data-ttu-id="8e01a-295">Aşağıdaki adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="8e01a-295">Follow these steps:</span></span>

1. <span data-ttu-id="8e01a-296">Sunucu Gezgini penceresinde Tables klasörünü sağ tıklatın ve menü seçeneğini belirleyin **Yeni Tablo Ekle**.</span><span class="sxs-lookup"><span data-stu-id="8e01a-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="8e01a-297">Aşağıdaki tablo Tasarımcısı'nda açıklanan iki sütun girin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="8e01a-298">Kimlik sütunu birincil anahtar ve kimlik sütunu olarak işaretleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="8e01a-299">Yeni bir tablo adı gruplarıyla disket simgesini tıklatarak kaydedin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| <span data-ttu-id="8e01a-300">**Sütun adı**</span><span class="sxs-lookup"><span data-stu-id="8e01a-300">**Column Name**</span></span> | <span data-ttu-id="8e01a-301">**Veri türü**</span><span class="sxs-lookup"><span data-stu-id="8e01a-301">**Data Type**</span></span> | <span data-ttu-id="8e01a-302">**Null değerlere izin ver**</span><span class="sxs-lookup"><span data-stu-id="8e01a-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8e01a-303">Kimliği</span><span class="sxs-lookup"><span data-stu-id="8e01a-303">Id</span></span> | <span data-ttu-id="8e01a-304">int</span><span class="sxs-lookup"><span data-stu-id="8e01a-304">int</span></span> | <span data-ttu-id="8e01a-305">False</span><span class="sxs-lookup"><span data-stu-id="8e01a-305">False</span></span> |
| <span data-ttu-id="8e01a-306">Ad</span><span class="sxs-lookup"><span data-stu-id="8e01a-306">Name</span></span> | <span data-ttu-id="8e01a-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="8e01a-307">nvarchar(50)</span></span> | <span data-ttu-id="8e01a-308">False</span><span class="sxs-lookup"><span data-stu-id="8e01a-308">False</span></span> |


<span data-ttu-id="8e01a-309">Ardından, kişiler tablosundan tüm verileri silmek ihtiyacımız (Aksi durumda, biz won t kişiler ve gruplar tabloları arasında bir ilişki oluşturmak için).</span><span class="sxs-lookup"><span data-stu-id="8e01a-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won t be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="8e01a-310">Aşağıdaki adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="8e01a-310">Follow these steps:</span></span>

1. <span data-ttu-id="8e01a-311">Kişiler tablosuna sağ tıklayın ve menü seçeneğini **Show Table Data**.</span><span class="sxs-lookup"><span data-stu-id="8e01a-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="8e01a-312">Tüm satırlar silin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-312">Delete all of the rows.</span></span>

<span data-ttu-id="8e01a-313">Ardından, biz grupları veritabanı tablosu ve var olan kişileri veritabanı tablosu arasında bir ilişki tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="8e01a-314">Aşağıdaki adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="8e01a-314">Follow these steps:</span></span>

1. <span data-ttu-id="8e01a-315">Sunucu Gezgini penceresini Tablo Tasarımcısı kişiler tabloda çift tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="8e01a-316">Yeni bir tamsayı sütunu GroupID adlı kişiler tabloya ekleyin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="8e01a-317">Yabancı anahtar ilişkilerini iletişim kutusunu açmak için ilişki düğmesini (bkz: Şekil 3).</span><span class="sxs-lookup"><span data-stu-id="8e01a-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="8e01a-318">Ekle düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-318">Click the Add button.</span></span>
5. <span data-ttu-id="8e01a-319">Tablo ve sütun belirtimi yanındaki düğmesinin üç nokta düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="8e01a-320">Tablolar ve sütunlar iletişim kutusunda, birincil anahtar tablosu ve birincil anahtar sütunu olarak kimliği olarak gruplarını seçin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="8e01a-321">Yabancı anahtar sütunu olarak GroupID ve yabancı anahtar tablosu olarak kişileri seçin (Şekil 4'e bakın).</span><span class="sxs-lookup"><span data-stu-id="8e01a-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="8e01a-322">Tamam düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-322">Click the OK button.</span></span>
7. <span data-ttu-id="8e01a-323">Altında **ekleme ve güncelleştirme belirtimi**, değeri seçin **Cascade** için **silme kuralı**.</span><span class="sxs-lookup"><span data-stu-id="8e01a-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="8e01a-324">Yabancı anahtar ilişkilerini iletişim kutusunu kapatmak için Kapat düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="8e01a-325">Kişiler tablosuna değişiklikleri kaydetmek için Kaydet düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="8e01a-326">[![Bir veritabanı tablosu ilişkisi oluşturma](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="8e01a-327">**Şekil 03**: bir veritabanı tablosu ilişkisi oluşturma ([tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


<span data-ttu-id="8e01a-328">[![Tablo ilişkileri belirtme](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="8e01a-329">**Şekil 04**: Tablo ilişkileri belirtme ([tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="8e01a-330">Veri Modelimizi güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="8e01a-330">Updating our Data Model</span></span>

<span data-ttu-id="8e01a-331">Ardından, biz yeni veritabanı tablosunun temsil etmek için veri modelimizi güncelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="8e01a-332">Aşağıdaki adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="8e01a-332">Follow these steps:</span></span>

1. <span data-ttu-id="8e01a-333">Entity Designer açmak için modelleri klasöründeki ContactManagerModel.edmx dosyasını çift tıklatın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="8e01a-334">Tasarımcı yüzeyine sağ tıklayın ve menü seçeneğini **güncelleştirme modeli veritabanından**.</span><span class="sxs-lookup"><span data-stu-id="8e01a-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="8e01a-335">Güncelleştirme Sihirbazı'nda seçin grupları tablo ve Son'u tıklatın (bkz. Şekil 5) düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="8e01a-336">Grupları varlık sağ tıklayın ve menü seçeneğini **yeniden adlandırma**.</span><span class="sxs-lookup"><span data-stu-id="8e01a-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="8e01a-337">Adını değiştirmek *grupları* varlığa *grup* (tekil).</span><span class="sxs-lookup"><span data-stu-id="8e01a-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="8e01a-338">Kişi varlığı en altında görüntülenen grupları gezinti özelliği sağ tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="8e01a-339">Adını değiştirmek *grupları* Gezinti özelliğine *grup* (tekil).</span><span class="sxs-lookup"><span data-stu-id="8e01a-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="8e01a-340">[![Bir Entity Framework modelini veritabanından güncelleştiriliyor](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="8e01a-341">**Şekil 05**: bir Entity Framework modelini veritabanından güncelleştirme ([tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="8e01a-342">Bu adımları tamamladıktan sonra kişiler ve gruplar tabloları veri modelinizi temsil eder.</span><span class="sxs-lookup"><span data-stu-id="8e01a-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="8e01a-343">Entity Designer hem varlıklar göstermesi gerekir (bkz. Şekil 6).</span><span class="sxs-lookup"><span data-stu-id="8e01a-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="8e01a-344">[![Entity Designer grup ve ilgili kişi görüntüleme](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="8e01a-345">**Şekil 06**: Grup ve ilgili kişi görüntüleme Entity Designer ([tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="8e01a-346">Bizim depo sınıflarını oluşturma</span><span class="sxs-lookup"><span data-stu-id="8e01a-346">Creating our Repository Classes</span></span>

<span data-ttu-id="8e01a-347">Ardından, biz bizim depo sınıfına uygulamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="8e01a-348">Bu yineleme süresince birkaç yeni yöntemleri IContactManagerRepository arabirimine bizim birim testleri karşılamak için kod yazarken eklediğimiz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="8e01a-349">IContactManagerRepository arabiriminin son sürümünü listeleme 14'te yer alır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="8e01a-350">**14 - Models\IContactManagerRepository.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="8e01a-351">Biz başlattıysanız t gerçekte uygulanan herhangi bir kişi grupları ile çalışmayla ilgili yöntemlerinin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-351">We haven t actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="8e01a-352">Şu anda EntityContactManagerRepository sınıfı IContactManagerRepository arabiriminde listelenen kişi grubu yöntemlerin her biri için saplama yöntemlerine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="8e01a-353">Örneğin, ListGroups() yöntemi şu anda şöyle görünür:</span><span class="sxs-lookup"><span data-stu-id="8e01a-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="8e01a-354">Saplama yöntemleri bizi uygulamamız derlemek ve birim testlerini geçmesi etkin.</span><span class="sxs-lookup"><span data-stu-id="8e01a-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="8e01a-355">Bununla birlikte, artık, aslında bu yöntemleri uygulamak için gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8e01a-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="8e01a-356">EntityContactManagerRepository sınıfı son sürümünü listeleme 13'te yer alır.</span><span class="sxs-lookup"><span data-stu-id="8e01a-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="8e01a-357">**13 - Models\EntityContactManagerRepository.cs listeleme**</span><span class="sxs-lookup"><span data-stu-id="8e01a-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="8e01a-358">Görünümler oluşturma</span><span class="sxs-lookup"><span data-stu-id="8e01a-358">Creating the Views</span></span>

<span data-ttu-id="8e01a-359">Varsayılan ASP.NET Görünüm altyapısı kullandığınızda, ASP.NET MVC uygulaması.</span><span class="sxs-lookup"><span data-stu-id="8e01a-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="8e01a-360">Bu nedenle, t tan oluşturma görünümleri belirli birim testi için yanıt.</span><span class="sxs-lookup"><span data-stu-id="8e01a-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="8e01a-361">Bir uygulama görünümler olmadan gereksiz olacağından, ancak t geçebiliriz oluşturma ve değiştirme Contact Manager uygulamada bulunan görünümler olmadan bu yineleme tamamlayın.</span><span class="sxs-lookup"><span data-stu-id="8e01a-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="8e01a-362">(Bkz. Şekil 7) kişi grupları yönetmek için aşağıdaki yeni görünümler oluşturmak ihtiyacımız var:</span><span class="sxs-lookup"><span data-stu-id="8e01a-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="8e01a-363">Views\Group\Index.aspx - kişi grupları listesini görüntüler</span><span class="sxs-lookup"><span data-stu-id="8e01a-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="8e01a-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span><span class="sxs-lookup"><span data-stu-id="8e01a-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="8e01a-365">[![Grup dizini görünümü](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="8e01a-366">**Şekil 07**: grubu dizini görünümü ([tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="8e01a-367">Kişi grupları eklemek için aşağıdaki varolan görünümleri değiştirmek ihtiyacımız var:</span><span class="sxs-lookup"><span data-stu-id="8e01a-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="8e01a-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="8e01a-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="8e01a-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="8e01a-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="8e01a-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="8e01a-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="8e01a-371">Bu öğretici eşlik eden Visual Studio uygulamayı bakarak değiştirilmiş görünümlerini görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="8e01a-372">Örneğin, Şekil 8 kişi dizini görünümü gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="8e01a-373">[![Kişi dizini görünümü](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="8e01a-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="8e01a-374">**Şekil 08**: kişi dizini görünümü ([tam boyutlu görüntüyü görüntülemek için tıklatın](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="8e01a-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="8e01a-375">Özet</span><span class="sxs-lookup"><span data-stu-id="8e01a-375">Summary</span></span>

<span data-ttu-id="8e01a-376">Bu yinelemede yeni işlevsellik Contact Manager uygulamamız bir teste dayalı geliştirme uygulama tasarım Metodoloji izleyerek eklediğimiz.</span><span class="sxs-lookup"><span data-stu-id="8e01a-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="8e01a-377">Kullanıcı hikayeleri kümesi oluşturarak başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="8e01a-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="8e01a-378">Kullanıcı hikayeleri ifade edilen gereksinimleri karşılık gelen birim testleri kümesi oluşturduk.</span><span class="sxs-lookup"><span data-stu-id="8e01a-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="8e01a-379">Son olarak, birim testleri tarafından ifade gereksinimlerini karşılamak için yeterli kod yazıldı.</span><span class="sxs-lookup"><span data-stu-id="8e01a-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="8e01a-380">Birim testleri tarafından ifade gereksinimlerini karşılamak için yeterli kod yazma tamamladıktan sonra veritabanı ve görünümler güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="8e01a-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="8e01a-381">Biz Veritabanımıza yeni bir grup tablo eklenir ve bizim Entity Framework veri modeli güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="8e01a-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="8e01a-382">Biz de oluşturulabilir ve bir görünüm kümesi değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="8e01a-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="8e01a-383">Sonraki yinelemede--son yineleme--uygulamamız Ajax yararlanmak için yeniden.</span><span class="sxs-lookup"><span data-stu-id="8e01a-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="8e01a-384">Ajax yararlanarak, biz yanıtlama ve ilgili kişi Yöneticisi uygulama performansını artırmak.</span><span class="sxs-lookup"><span data-stu-id="8e01a-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8e01a-385">[Önceki](iteration-5-create-unit-tests-cs.md)
> [sonraki](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8e01a-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>

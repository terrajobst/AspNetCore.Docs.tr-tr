---
uid: mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
title: "Sıralama, filtreleme ve (3 10) ASP.NET MVC uygulamasındaki Entity Framework disk belleği | Microsoft Docs"
author: tdykstra
description: "Contoso University örnek web uygulaması Entity Framework 5 Code First ve Visual Studio kullanarak ASP.NET MVC 4 uygulamaları oluşturmak nasıl gösteren..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/30/2013
ms.topic: article
ms.assetid: 8af630e0-fffa-4110-9eca-c96e201b2724
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: f9b68abeba19561a327bad5ee4be80d79af1a550
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/24/2018
---
<a name="sorting-filtering-and-paging-with-the-entity-framework-in-an-aspnet-mvc-application-3-of-10"></a><span data-ttu-id="ff5e7-103">Sıralama, filtreleme ve (3 10) ASP.NET MVC uygulamasındaki Entity Framework disk belleği</span><span class="sxs-lookup"><span data-stu-id="ff5e7-103">Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application (3 of 10)</span></span>
====================
<span data-ttu-id="ff5e7-104">by [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="ff5e7-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="ff5e7-105">Tamamlanan projenizi indirin</span><span class="sxs-lookup"><span data-stu-id="ff5e7-105">Download Completed Project</span></span>](http://code.msdn.microsoft.com/Getting-Started-with-dd0e2ed8)

> <span data-ttu-id="ff5e7-106">Contoso University örnek web uygulaması Entity Framework 5 Code First ve Visual Studio 2012 kullanarak ASP.NET MVC 4 uygulamalarının nasıl oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 4 applications using the Entity Framework 5 Code First and Visual Studio 2012.</span></span> <span data-ttu-id="ff5e7-107">Eğitmen serisi hakkında daha fazla bilgi için bkz: [serideki ilk öğreticide](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span> <span data-ttu-id="ff5e7-108">Eğitmen serisi baştan başlayabilirsiniz veya [Bu bölüm için bir başlangıç projesi indirme](building-the-ef5-mvc4-chapter-downloads.md) ve buradan başlayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-108">You can start the tutorial series from the beginning or [download a starter project for this chapter](building-the-ef5-mvc4-chapter-downloads.md) and start here.</span></span>
> 
> > [!NOTE] 
> > 
> > <span data-ttu-id="ff5e7-109">Olamaz gidermek, bir sorunla çalıştırırsanız [tamamlanmış bölüm karşıdan](building-the-ef5-mvc4-chapter-downloads.md) ve sorunu yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-109">If you run into a problem you can't resolve, [download the completed chapter](building-the-ef5-mvc4-chapter-downloads.md) and try to reproduce your problem.</span></span> <span data-ttu-id="ff5e7-110">Tamamlanan kodu kodunuzu karşılaştırarak genellikle soruna çözüm bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-110">You can generally find the solution to the problem by comparing your code to the completed code.</span></span> <span data-ttu-id="ff5e7-111">Bazı yaygın hatalar ve bunları çözmek nasıl için bkz: [hatalarını ve geçici çözümler.](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span><span class="sxs-lookup"><span data-stu-id="ff5e7-111">For some common errors and how to solve them, see [Errors and Workarounds.](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span></span>


<span data-ttu-id="ff5e7-112">Web sayfaları için temel CRUD işlemleri için bir dizi uygulanan önceki öğreticide `Student` varlıklar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-112">In the previous tutorial you implemented a set of web pages for basic CRUD operations for `Student` entities.</span></span> <span data-ttu-id="ff5e7-113">Bu öğreticide, sıralama, filtreleme ve disk belleği işlevsellik ekleyeceksiniz **Öğrenciler** dizin sayfası.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-113">In this tutorial you'll add sorting, filtering, and paging functionality to the **Students** Index page.</span></span> <span data-ttu-id="ff5e7-114">Ayrıca, basit gruplandırma yapan bir sayfa oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-114">You'll also create a page that does simple grouping.</span></span>

<span data-ttu-id="ff5e7-115">Aşağıdaki çizimde tamamladığınızda sayfa nasıl görüneceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-115">The following illustration shows what the page will look like when you're done.</span></span> <span data-ttu-id="ff5e7-116">Sütun başlıkları kullanıcının sütuna göre sıralamak için tıklatabileceği bağlantı bulunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-116">The column headings are links that the user can click to sort by that column.</span></span> <span data-ttu-id="ff5e7-117">Bir sütun başlığına sürekli olarak artan veya azalan sıralama düzeni arasında geçiş yapar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-117">Clicking a column heading repeatedly toggles between ascending and descending sort order.</span></span>

![Students_Index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

## <a name="add-column-sort-links-to-the-students-index-page"></a><span data-ttu-id="ff5e7-119">Öğrenciler dizin sayfasına Sütun sıralama bağlantılar ekleme</span><span class="sxs-lookup"><span data-stu-id="ff5e7-119">Add Column Sort Links to the Students Index Page</span></span>

<span data-ttu-id="ff5e7-120">Öğrenci dizin sayfasına sıralama eklemek için değiştireceğiz `Index` yöntemi `Student` denetleyicisi ve kodu ekleyin `Student` dizin görünümü.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-120">To add sorting to the Student Index page, you'll change the `Index` method of the `Student` controller and add code to the `Student` Index view.</span></span>

### <a name="add-sorting-functionality-to-the-index-method"></a><span data-ttu-id="ff5e7-121">Dizin yöntemi işlevsellik sıralama Ekle</span><span class="sxs-lookup"><span data-stu-id="ff5e7-121">Add Sorting Functionality to the Index Method</span></span>

<span data-ttu-id="ff5e7-122">İçinde *Controllers\StudentController.cs*, yerine `Index` aşağıdaki kod ile yöntemi:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-122">In *Controllers\StudentController.cs*, replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs)]

<span data-ttu-id="ff5e7-123">Bu kod alan bir `sortOrder` URL'deki sorgu dizesi parametresi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-123">This code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="ff5e7-124">Sorgu dizesi değerini eylem yönteminin bir parametresi olarak ASP.NET MVC tarafından sağlanır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-124">The query string value is provided by ASP.NET MVC as a parameter to the action method.</span></span> <span data-ttu-id="ff5e7-125">Parametre "Ad" veya "Tarih", ardından isteğe bağlı olarak bir alt çizgi ve azalan belirtmek için "desc" dizesi olan bir dize olur.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-125">The parameter will be a string that's either "Name" or "Date", optionally followed by an underscore and the string "desc" to specify descending order.</span></span> <span data-ttu-id="ff5e7-126">Varsayılan sıralama düzeni artan.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-126">The default sort order is ascending.</span></span>

<span data-ttu-id="ff5e7-127">Dizin sayfası istenen ilk kez hiçbir sorgu dizesi yok.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-127">The first time the Index page is requested, there's no query string.</span></span> <span data-ttu-id="ff5e7-128">Öğrenciler göre artan sırada görüntülenen `LastName`, başarısızlık durumunda tarafından belirlenen varsayılan değerdir `switch` deyimi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-128">The students are displayed in ascending order by `LastName`, which is the default as established by the fall-through case in the `switch` statement.</span></span> <span data-ttu-id="ff5e7-129">Kullanıcı uygun sütun başlığını köprü tıkladığında `sortOrder` değeri, sorgu dizesinde sağlanır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-129">When the user clicks a column heading hyperlink, the appropriate `sortOrder` value is provided in the query string.</span></span>

<span data-ttu-id="ff5e7-130">İki `ViewBag` değişkenleri görünümü uygun sorgu dizesi değerlerini sütun başlığını köprüler yapılandırabilmeniz kullanılır:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-130">The two `ViewBag` variables are used so that the view can configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs)]

<span data-ttu-id="ff5e7-131">Üçlü deyimleri bunlar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-131">These are ternary statements.</span></span> <span data-ttu-id="ff5e7-132">Birinci anlama gelir `sortOrder` parametresi null veya boş, `ViewBag.NameSortParm` ayarlanması gerekir "adı\_desc"; Aksi halde, boş bir dize olarak ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-132">The first one specifies that if the `sortOrder` parameter is null or empty, `ViewBag.NameSortParm` should be set to "name\_desc"; otherwise, it should be set to an empty string.</span></span> <span data-ttu-id="ff5e7-133">Bu iki ifade sütun başlığını köprüler şu şekilde ayarlamak görünümü etkinleştirin:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-133">These two statements enable the view to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="ff5e7-134">Geçerli bir sıralama düzeni</span><span class="sxs-lookup"><span data-stu-id="ff5e7-134">Current sort order</span></span> | <span data-ttu-id="ff5e7-135">Son adı köprü</span><span class="sxs-lookup"><span data-stu-id="ff5e7-135">Last Name Hyperlink</span></span> | <span data-ttu-id="ff5e7-136">Tarih köprü</span><span class="sxs-lookup"><span data-stu-id="ff5e7-136">Date Hyperlink</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ff5e7-137">Ad artan en son</span><span class="sxs-lookup"><span data-stu-id="ff5e7-137">Last Name ascending</span></span> | <span data-ttu-id="ff5e7-138">descending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-138">descending</span></span> | <span data-ttu-id="ff5e7-139">ascending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-139">ascending</span></span> |
| <span data-ttu-id="ff5e7-140">Ad azalan en son</span><span class="sxs-lookup"><span data-stu-id="ff5e7-140">Last Name descending</span></span> | <span data-ttu-id="ff5e7-141">ascending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-141">ascending</span></span> | <span data-ttu-id="ff5e7-142">ascending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-142">ascending</span></span> |
| <span data-ttu-id="ff5e7-143">Artan tarihi</span><span class="sxs-lookup"><span data-stu-id="ff5e7-143">Date ascending</span></span> | <span data-ttu-id="ff5e7-144">ascending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-144">ascending</span></span> | <span data-ttu-id="ff5e7-145">descending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-145">descending</span></span> |
| <span data-ttu-id="ff5e7-146">Azalan tarihi</span><span class="sxs-lookup"><span data-stu-id="ff5e7-146">Date descending</span></span> | <span data-ttu-id="ff5e7-147">ascending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-147">ascending</span></span> | <span data-ttu-id="ff5e7-148">ascending</span><span class="sxs-lookup"><span data-stu-id="ff5e7-148">ascending</span></span> |

<span data-ttu-id="ff5e7-149">Bir yöntem [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) göre sıralamak için sütun belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-149">The method uses [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) to specify the column to sort by.</span></span> <span data-ttu-id="ff5e7-150">Kod oluşturur bir [Iqueryable](https://msdn.microsoft.com/library/bb351562.aspx) önce değişken `switch` deyimi içinde değiştirir `switch` deyimi ve çağrıları `ToList` sonra yöntemi `switch` deyimi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-150">The code creates an [IQueryable](https://msdn.microsoft.com/library/bb351562.aspx) variable before the `switch` statement, modifies it in the `switch` statement, and calls the `ToList` method after the `switch` statement.</span></span> <span data-ttu-id="ff5e7-151">Ne zaman oluşturma ve değiştirme `IQueryable` değişkenleri, sorgu veritabanına gönderilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-151">When you create and modify `IQueryable` variables, no query is sent to the database.</span></span> <span data-ttu-id="ff5e7-152">Dönüştürülünceye kadar sorgu yürütülmedi `IQueryable` gibi bir yöntemini çağırarak bir koleksiyon nesnesine `ToList`.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-152">The query is not executed until you convert the `IQueryable` object into a collection by calling a method such as `ToList`.</span></span> <span data-ttu-id="ff5e7-153">Bu nedenle, bu kod kadar yürütülmedi tek bir sorgu sonuçları `return View` deyimi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-153">Therefore, this code results in a single query that is not executed until the `return View` statement.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-view"></a><span data-ttu-id="ff5e7-154">Sütun başlığı Öğrenci dizini görüntülemek için köprü ekleme</span><span class="sxs-lookup"><span data-stu-id="ff5e7-154">Add Column Heading Hyperlinks to the Student Index View</span></span>

<span data-ttu-id="ff5e7-155">İçinde *Views\Student\Index.cshtml*, yerine `<tr>` ve `<th>` vurgulanmış kodu başlık satırı için öğeleri:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-155">In *Views\Student\Index.cshtml*, replace the `<tr>` and `<th>` elements for the heading row with the highlighted code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cshtml?highlight=5-15)]

<span data-ttu-id="ff5e7-156">Bu kod bilgileri kullanan `ViewBag` uygun sorguyla köprüler ayarlamak için özellikler dize değerleri.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-156">This code uses the information in the `ViewBag` properties to set up hyperlinks with the appropriate query string values.</span></span>

<span data-ttu-id="ff5e7-157">Sayfayı çalıştırın ve tıklatın **Soyadı** ve **kayıt tarihi** Bu sıralama doğrulamak için sütun başlıkları çalışır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-157">Run the page and click the **Last Name** and **Enrollment Date** column headings to verify that sorting works.</span></span>

![Students_Index_page_with_sort_hyperlinks](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="ff5e7-159">Tıklattıktan sonra **Soyadı** başlığı Öğrenciler son adı azalan sırada görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-159">After you click the **Last Name** heading, students are displayed in descending last name order.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="ff5e7-160">Bir arama kutusu Öğrenciler dizin sayfasına ekleme</span><span class="sxs-lookup"><span data-stu-id="ff5e7-160">Add a Search Box to the Students Index Page</span></span>

<span data-ttu-id="ff5e7-161">Öğrenciler dizin sayfasına filtre eklemek için metin kutusu ve bir gönderme düğmesi görünümüne ekleyin ve karşılık gelen değişiklik `Index` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-161">To add filtering to the Students Index page, you'll add a text box and a submit button to the view and make corresponding changes in the `Index` method.</span></span> <span data-ttu-id="ff5e7-162">Metin kutusunda, ad ve soyadı alanları aramak için bir dize girin olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-162">The text box will let you enter a string to search for in the first name and last name fields.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="ff5e7-163">Filtreleme işlevselliği dizin yöntemine ekleyin</span><span class="sxs-lookup"><span data-stu-id="ff5e7-163">Add Filtering Functionality to the Index Method</span></span>

<span data-ttu-id="ff5e7-164">İçinde *Controllers\StudentController.cs*, yerine `Index` (değişiklikleri vurgulanır) aşağıdaki kod ile yöntemi:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-164">In *Controllers\StudentController.cs*, replace the `Index` method with the following code (the changes are highlighted):</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs?highlight=1,7-11)]

<span data-ttu-id="ff5e7-165">Eklediğiniz bir `searchString` parametresi `Index` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-165">You've added a `searchString` parameter to the `Index` method.</span></span> <span data-ttu-id="ff5e7-166">LINQ ifadesi de eklediğiniz bir `where` clausethat yalnızca, ad ve Soyadı arama dizesini içeren Öğrenciler seçer.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-166">You've also added to the LINQ statement a `where` clausethat selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="ff5e7-167">Bir metin kutusundan dizin görünümüne ekleyeceksiniz arama dizesi değeri alındı. Ekler deyimi [burada](https://msdn.microsoft.com/library/bb535040.aspx) yan tümcesi yalnızca arama için bir değer ise gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-167">The search string value is received from a text box that you'll add to the Index view.The statement that adds the [where](https://msdn.microsoft.com/library/bb535040.aspx) clause is executed only if there's a value to search for.</span></span>

> [!NOTE]
> <span data-ttu-id="ff5e7-168">Çoğu durumda aynı yöntemi bir Entity Framework varlık kümesi veya bir bellek içi koleksiyonda bir genişletme yöntemi olarak çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-168">In many cases you can call the same method either on an Entity Framework entity set or as an extension method on an in-memory collection.</span></span> <span data-ttu-id="ff5e7-169">Sonuçları normalde aynıdır, ancak bazı durumlarda farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-169">The results are normally the same but in some cases may be different.</span></span> <span data-ttu-id="ff5e7-170">Örneğin, .NET Framework uygulamasını `Contains` yöntem boş bir dizeyi geçirmek, ancak SQL Server Compact 4.0 için Entity Framework sağlayıcısı boş dizeler için sıfır satır döndürür tüm satırları döndürür.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-170">For example, the .NET Framework implementation of the `Contains` method returns all rows when you pass an empty string to it, but the Entity Framework provider for SQL Server Compact 4.0 returns zero rows for empty strings.</span></span> <span data-ttu-id="ff5e7-171">Bu nedenle örnek kodda (koyma `Where` deyimi içinde bir `if` deyimi) SQL Server'ın tüm sürümleri için aynı sonucu elde emin olur.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-171">Therefore the code in the example (putting the `Where` statement inside an `if` statement) makes sure that you get the same results for all versions of SQL Server.</span></span> <span data-ttu-id="ff5e7-172">Ayrıca, .NET Framework uygulamasını `Contains` yöntemi, varsayılan olarak büyük küçük harfe duyarlı karşılaştırma gerçekleştirir, ancak Entity Framework SQL Server sağlayıcıları varsayılan olarak büyük küçük harf duyarlı karşılaştırmalar gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-172">Also, the .NET Framework implementation of the `Contains` method performs a case-sensitive comparison by default, but Entity Framework SQL Server providers perform case-insensitive comparisons by default.</span></span> <span data-ttu-id="ff5e7-173">Bu nedenle, çağırma `ToUpper` test açıkça büyük küçük harf duyarsız yapmak için yöntem sağlar, döndürülecek bir depo daha sonra kullanmak için kodu değiştirdiğinizde sonuçları değiştirmeyin bir `IEnumerable` koleksiyon yerine bir `IQueryable` nesnesi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-173">Therefore, calling the `ToUpper` method to make the test explicitly case-insensitive ensures that results do not change when you change the code later to use a repository, which will return an `IEnumerable` collection instead of an `IQueryable` object.</span></span> <span data-ttu-id="ff5e7-174">(Çağırdığınızda `Contains` yöntemi bir `IEnumerable` koleksiyonu, .NET Framework uygulamasını alın; çağırdığınızda, üzerinde bir `IQueryable` nesnesi, veritabanı sağlayıcısı uygulaması alın.)</span><span class="sxs-lookup"><span data-stu-id="ff5e7-174">(When you call the `Contains` method on an `IEnumerable` collection, you get the .NET Framework implementation; when you call it on an `IQueryable` object, you get the database provider implementation.)</span></span>


### <a name="add-a-search-box-to-the-student-index-view"></a><span data-ttu-id="ff5e7-175">Bir arama kutusu Öğrenci dizin görünümüne ekleyin</span><span class="sxs-lookup"><span data-stu-id="ff5e7-175">Add a Search Box to the Student Index View</span></span>

<span data-ttu-id="ff5e7-176">İçinde *Views\Student\Index.cshtml*, açmadan önce hemen vurgulanmış kodu ekleyin `table` resim yazısı, bir metin kutusu oluşturmak için etiket ve **arama** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-176">In *Views\Student\Index.cshtml*, add the highlighted code immediately before the opening `table` tag in order to create a caption, a text box, and a **Search** button.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cshtml?highlight=5-10)]

<span data-ttu-id="ff5e7-177">Sayfayı çalıştırın, bir arama dizesi girin ve tıklayın **arama** filtreleme çalıştığını doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-177">Run the page, enter a search string, and click **Search** to verify that filtering is working.</span></span>

![Students_Index_page_with_search_box](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="ff5e7-179">URL içermiyor. Bu sayfaya yer işareti varsa, yer işareti kullandığınızda, filtrelenmiş liste vermeyecektir, yani "bir", arama dizesi dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-179">Notice the URL doesn't contain the "an" search string, which means that if you bookmark this page, you won't get the filtered list when you use the bookmark.</span></span> <span data-ttu-id="ff5e7-180">Değiştireceğiz **arama** sorgu dizeleri için filtre ölçütlerini daha sonra öğreticide kullanmak üzere düğmesi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-180">You'll change the **Search** button to use query strings for filter criteria later in the tutorial.</span></span>

## <a name="add-paging-to-the-students-index-page"></a><span data-ttu-id="ff5e7-181">Disk belleği Öğrenciler dizin sayfasına ekleme</span><span class="sxs-lookup"><span data-stu-id="ff5e7-181">Add Paging to the Students Index Page</span></span>

<span data-ttu-id="ff5e7-182">Disk belleği Öğrenciler dizin sayfasına eklemek için yükleyerek başlayacaksınız **PagedList.Mvc** NuGet paketi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-182">To add paging to the Students Index page, you'll start by installing the **PagedList.Mvc** NuGet package.</span></span> <span data-ttu-id="ff5e7-183">Ek değişiklikler hale getireceğiz sonra `Index` yöntemi ve disk belleği bağlantılar ekleyebilir `Index` görünümü.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-183">Then you'll make additional changes in the `Index` method and add paging links to the `Index` view.</span></span> <span data-ttu-id="ff5e7-184">**PagedList.Mvc** pek çok iyi disk belleği ve ASP.NET MVC için paketler sıralama biridir ve kendi burada yalnızca bir örnek olarak, onun için bir öneri diğer seçenekleri üzerinden olarak değil kullanılmaya yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-184">**PagedList.Mvc** is one of many good paging and sorting packages for ASP.NET MVC, and its use here is intended only as an example, not as a recommendation for it over other options.</span></span> <span data-ttu-id="ff5e7-185">Aşağıdaki çizimde, disk belleği bağlantılarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-185">The following illustration shows the paging links.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)

### <a name="install-the-pagedlistmvc-nuget-package"></a><span data-ttu-id="ff5e7-187">PagedList.MVC NuGet paketini yükleyin</span><span class="sxs-lookup"><span data-stu-id="ff5e7-187">Install the PagedList.MVC NuGet Package</span></span>

<span data-ttu-id="ff5e7-188">NuGet **PagedList.Mvc** paketi otomatik olarak yükler **PagedList** paketi bir bağımlılık olarak.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-188">The NuGet **PagedList.Mvc** package automatically installs the **PagedList** package as a dependency.</span></span> <span data-ttu-id="ff5e7-189">**PagedList** paketini yükler bir `PagedList` için koleksiyon türü ve uzantı yöntemleri `IQueryable` ve `IEnumerable` koleksiyonları.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-189">The **PagedList** package installs a `PagedList` collection type and extension methods for `IQueryable` and `IEnumerable` collections.</span></span> <span data-ttu-id="ff5e7-190">Genişletme yöntemleri verilerde tek sayfalık oluşturma bir `PagedList` dışı koleksiyonu, `IQueryable` veya `IEnumerable`ve `PagedList` koleksiyon çeşitli özellikleri ve disk belleği kolaylaştırmak yöntemleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-190">The extension methods create a single page of data in a `PagedList` collection out of your `IQueryable` or `IEnumerable`, and the `PagedList` collection provides several properties and methods that facilitate paging.</span></span> <span data-ttu-id="ff5e7-191">**PagedList.Mvc** paketi, disk belleği düğmeleri görüntüler sayfalama bir yardımcı yükler.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-191">The **PagedList.Mvc** package installs a paging helper that displays the paging buttons.</span></span>

<span data-ttu-id="ff5e7-192">Gelen **Araçları** menüsünde, select **kitaplık Paket Yöneticisi** ve ardından **çözüm için NuGet paketlerini Yönet**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-192">From the **Tools** menu, select **Library Package Manager** and then **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="ff5e7-193">İçinde **NuGet paketlerini Yönet** iletişim kutusu, tıklatın **çevrimiçi** sol tarafta sekmesini ve ardından arama kutusuna "disk belleğine alınan" girin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-193">In the **Manage NuGet Packages** dialog box, click the **Online** tab on the left and then enter "paged" in the search box.</span></span> <span data-ttu-id="ff5e7-194">Gördüğünüzde **PagedList.Mvc** paketini, tıklatın **yükleme**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-194">When you see the **PagedList.Mvc** package, click **Install**.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="ff5e7-195">İçinde **projeleri seçin** kutusunda, **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-195">In the **Select Projects** box, click **OK**.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image7.png)

### <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="ff5e7-196">Sayfalama işlevselliğinin dizin yöntemine ekleyin</span><span class="sxs-lookup"><span data-stu-id="ff5e7-196">Add Paging Functionality to the Index Method</span></span>

<span data-ttu-id="ff5e7-197">İçinde *Controllers\StudentController.cs*, ekleme bir `using` bildirimi `PagedList` ad alanı:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-197">In *Controllers\StudentController.cs*, add a `using` statement for the `PagedList` namespace:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs)]

<span data-ttu-id="ff5e7-198">Değiştir `Index` aşağıdaki kod ile yöntemi:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-198">Replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs)]

<span data-ttu-id="ff5e7-199">Bu kod ekleyen bir `page` parametre, geçerli bir sıralama sipariş parametresi ve aşağıda gösterildiği gibi yöntemi imzası geçerli bir filtre parametresi:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-199">This code adds a `page` parameter, a current sort order parameter, and a current filter parameter to the method signature, as shown here:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="ff5e7-200">Kullanıcı bir disk belleği veya bağlantı sıralama kurmadı tıkladıysanız, tüm parametreleri null veya ilk kez sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-200">The first time the page is displayed, or if the user hasn't clicked a paging or sorting link, all the parameters will be null.</span></span> <span data-ttu-id="ff5e7-201">Disk belleği bağlantıya tıkladıysanız `page` değişkeni görüntülemek için sayfa numarasını içerir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-201">If a paging link is clicked, the `page` variable will contain the page number to display.</span></span>

<span data-ttu-id="ff5e7-202">`A ViewBag`Bu disk belleği bağlantıları sıralama sırasında disk belleği aynı tutmak için dahil edilmesi için geçerli sıralama düzenini görünümüyle özelliği sağlar:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-202">`A ViewBag` property provides the view with the current sort order, because this must be included in the paging links in order to keep the sort order the same while paging:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample9.cs)]

<span data-ttu-id="ff5e7-203">Başka bir özellik `ViewBag.CurrentFilter`, görünümü ile geçerli filtre dizesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-203">Another property, `ViewBag.CurrentFilter`, provides the view with the current filter string.</span></span> <span data-ttu-id="ff5e7-204">Bu değer, disk belleği bağlantıları sırasında disk belleği filtre ayarlarını korumak için eklenmelidir ve sayfası görüntülendiğinde, metin kutusuna geri yüklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-204">This value must be included in the paging links in order to maintain the filter settings during paging, and it must be restored to the text box when the page is redisplayed.</span></span> <span data-ttu-id="ff5e7-205">Arama dizesi sırasında disk belleği değiştirdiyseniz, 1'e sıfırlamak için sayfanın yeni filtre görüntülemek için farklı veri kaybına neden çünkü gerekir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-205">If the search string is changed during paging, the page has to be reset to 1, because the new filter can result in different data to display.</span></span> <span data-ttu-id="ff5e7-206">Arama dizesi, metin kutusuna girilen değer ve Gönder düğmesine basıldığında değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-206">The search string is changed when a value is entered in the text box and the submit button is pressed.</span></span> <span data-ttu-id="ff5e7-207">Bu durumda, `searchString` parametresi null değil.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-207">In that case, the `searchString` parameter is not null.</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample10.cs)]

<span data-ttu-id="ff5e7-208">Yöntemi, sonunda `ToPagedList` genişletme yöntemi Öğrenciler üzerinde `IQueryable` nesnesi Öğrenci sorgu disk belleği destekleyen bir koleksiyon türü öğrencinin tek sayfalık dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-208">At the end of the method, the `ToPagedList` extension method on the students `IQueryable` object converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="ff5e7-209">Bu sayfada Öğrenciler daha sonra görünümüne geçirilir:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-209">That single page of students is then passed to the view:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample11.cs)]

<span data-ttu-id="ff5e7-210">`ToPagedList` Yöntemi bir sayfa numarasını alır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-210">The `ToPagedList` method takes a page number.</span></span> <span data-ttu-id="ff5e7-211">İki soru işaretleri temsil [null birleşim işlecinin](https://msdn.microsoft.com/library/ms173224.aspx).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-211">The two question marks represent the [null-coalescing operator](https://msdn.microsoft.com/library/ms173224.aspx).</span></span> <span data-ttu-id="ff5e7-212">Null birleşim işleci, null atanabilir bir tür için varsayılan bir değer tanımlar; ifade `(page ?? 1)` anlamına gelir dönüş değerini `page` değerine sahip veya 1 döndürür, `page` null.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-212">The null-coalescing operator defines a default value for a nullable type; the expression `(page ?? 1)` means return the value of `page` if it has a value, or return 1 if `page` is null.</span></span>

### <a name="add-paging-links-to-the-student-index-view"></a><span data-ttu-id="ff5e7-213">Disk belleği bağlantılar Öğrenci dizin görünümüne ekleyin</span><span class="sxs-lookup"><span data-stu-id="ff5e7-213">Add Paging Links to the Student Index View</span></span>

<span data-ttu-id="ff5e7-214">İçinde *Views\Student\Index.cshtml*, var olan kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-214">In *Views\Student\Index.cshtml*, replace the existing code with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample12.cshtml?highlight=6,9,14-20,56-58)]

<span data-ttu-id="ff5e7-215">`@model` Sayfanın üst kısmındaki deyimi belirtir görünümü şimdi alır bir `PagedList` yerine Nesne bir `List` nesnesi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-215">The `@model` statement at the top of the page specifies that the view now gets a `PagedList` object instead of a `List` object.</span></span>

<span data-ttu-id="ff5e7-216">`using` Bildirimi `PagedList.Mvc` erişimi verir MVC Yardımcısı için disk belleği düğmeler.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-216">The `using` statement for `PagedList.Mvc` gives access to the MVC helper for the paging buttons.</span></span>

<span data-ttu-id="ff5e7-217">Kod bir aşırı yüklemesini kullanır [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) belirtmek için sağlayan [FormMethod.Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-217">The code uses an overload of [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) that allows it to specify [FormMethod.Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample13.cshtml?highlight=1)]

<span data-ttu-id="ff5e7-218">Varsayılan [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) parametreleri HTTP ileti gövdesi yer alan ve URL sorgu dizeleri geçirilir, yani bir POST ile form verileri gönderir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-218">The default [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) submits form data with a POST, which means that parameters are passed in the HTTP message body and not in the URL as query strings.</span></span> <span data-ttu-id="ff5e7-219">HTTP GET belirttiğinizde, form verilerini URL'de sorgu dizeleri kullanıcıların URL yer işareti sağlayan geçirilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-219">When you specify HTTP GET, the form data is passed in the URL as query strings, which enables users to bookmark the URL.</span></span> <span data-ttu-id="ff5e7-220">[HTTP GET kullanımı için W3C yönergeleri](http://www.w3.org/2001/tag/doc/whenToUseGet.html) eylemi bir güncelleştirmede sonuçlanmaz zaman GET kullanması gerektiğini belirtin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-220">The [W3C guidelines for the use of HTTP GET](http://www.w3.org/2001/tag/doc/whenToUseGet.html) specify that you should use GET when the action does not result in an update.</span></span>

<span data-ttu-id="ff5e7-221">Yeni bir sayfa tıklattığınızda geçerli arama dizesi görebilmeniz için metin kutusunda geçerli arama dizesiyle başlatıldı.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-221">The text box is initialized with the current search string so when you click a new page you can see the current search string.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample14.cshtml?highlight=1)]

<span data-ttu-id="ff5e7-222">Sütun başlığı bağlantıları sorgu dizesi kullanıcı içinde filtre sonuçlarını sıralayabilmesi geçerli arama dizesi denetleyiciye geçirmek için kullanın:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-222">The column header links use the query string to pass the current search string to the controller so that the user can sort within filter results:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample15.cshtml?highlight=1)]

<span data-ttu-id="ff5e7-223">Sayfa geçerli sayfa ve toplam sayısı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-223">The current page and total number of pages are displayed.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample16.cshtml)]

<span data-ttu-id="ff5e7-224">Görüntülenecek sayfa varsa, "Sayfa 0 0" gösterilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-224">If there are no pages to display, "Page 0 of 0" is shown.</span></span> <span data-ttu-id="ff5e7-225">(Bu durumda sayfa numarası sayfa sayısından büyük olduğundan `Model.PageNumber` 1 ' dir ve `Model.PageCount` 0'dır.)</span><span class="sxs-lookup"><span data-stu-id="ff5e7-225">(In that case the page number is greater than the page count because `Model.PageNumber` is 1, and `Model.PageCount` is 0.)</span></span>

<span data-ttu-id="ff5e7-226">Disk belleği düğmeleri tarafından görüntülenen `PagedListPager` Yardımcısı:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-226">The paging buttons are displayed by the `PagedListPager` helper:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample17.cshtml)]

<span data-ttu-id="ff5e7-227">`PagedListPager` Yardımcısı, çeşitli stil oluşturma ve URL'leri dahil özelleştirebilirsiniz seçenekler sağlar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-227">The `PagedListPager` helper provides a number of options that you can customize, including URLs and styling.</span></span> <span data-ttu-id="ff5e7-228">Daha fazla bilgi için bkz: [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) GitHub sitesinde.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-228">For more information, see [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) on the GitHub site.</span></span>

<span data-ttu-id="ff5e7-229">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-229">Run the page.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image8.png)

<span data-ttu-id="ff5e7-231">Disk belleği çalıştığından emin olmak için farklı sıralamalar disk belleği bağlantıları tıklatın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-231">Click the paging links in different sort orders to make sure paging works.</span></span> <span data-ttu-id="ff5e7-232">Ardından bir arama dizesi girin ve yeniden disk belleği de doğru sıralama ve filtreleme ile çalıştığını doğrulamak için disk belleği deneyin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-232">Then enter a search string and try paging again to verify that paging also works correctly with sorting and filtering.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image9.png)

## <a name="create-an-about-page-that-shows-student-statistics"></a><span data-ttu-id="ff5e7-233">Oluşturma bir öğrenci istatistiklerini gösterir sayfa hakkında</span><span class="sxs-lookup"><span data-stu-id="ff5e7-233">Create an About Page That Shows Student Statistics</span></span>

<span data-ttu-id="ff5e7-234">Contoso University Web sitesinin için sayfa hakkında kaç tane Öğrenciler her kayıt tarihi için kayıtlı olan görüntülersiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-234">For the Contoso University website's About page, you'll display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="ff5e7-235">Bu grupları gruplandırma ve basit hesaplamaları gerektirir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-235">This requires grouping and simple calculations on the groups.</span></span> <span data-ttu-id="ff5e7-236">Bunu gerçekleştirmek için şunları yapmanız:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-236">To accomplish this, you'll do the following:</span></span>

- <span data-ttu-id="ff5e7-237">Görünüme iletmek için gereken verileri için bir görünüm model sınıfı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-237">Create a view model class for the data that you need to pass to the view.</span></span>
- <span data-ttu-id="ff5e7-238">Değiştirme `About` yönteminde `Home` denetleyicisi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-238">Modify the `About` method in the `Home` controller.</span></span>
- <span data-ttu-id="ff5e7-239">Değiştirme `About` görünümü.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-239">Modify the `About` view.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="ff5e7-240">Görünüm modeli oluşturma</span><span class="sxs-lookup"><span data-stu-id="ff5e7-240">Create the View Model</span></span>

<span data-ttu-id="ff5e7-241">Oluşturma bir *ViewModels* klasör.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-241">Create a *ViewModels* folder.</span></span> <span data-ttu-id="ff5e7-242">Bu klasörde sınıf dosyası ekleyin *EnrollmentDateGroup.cs* ve var olan kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-242">In that folder, add a class file *EnrollmentDateGroup.cs* and replace the existing code with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample18.cs)]

### <a name="modify-the-home-controller"></a><span data-ttu-id="ff5e7-243">Ev denetleyicisi değiştirme</span><span class="sxs-lookup"><span data-stu-id="ff5e7-243">Modify the Home Controller</span></span>

<span data-ttu-id="ff5e7-244">İçinde *HomeController.cs*, aşağıdakileri ekleyin `using` dosyanın en üstüne deyimlerini:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-244">In *HomeController.cs*, add the following `using` statements at the top of the file:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample19.cs)]

<span data-ttu-id="ff5e7-245">Veritabanı bağlamı için bir sınıf değişkeni parantezinden sınıfı için hemen sonra ekleyin:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-245">Add a class variable for the database context immediately after the opening curly brace for the class:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample20.cs?highlight=3)]

<span data-ttu-id="ff5e7-246">Değiştir `About` aşağıdaki kod ile yöntemi:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-246">Replace the `About` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample21.cs)]

<span data-ttu-id="ff5e7-247">LINQ ifadesi Öğrenci varlıklar kayıt tarihe göre gruplar, her grup içindeki varlıkların sayısı hesaplar ve sonuçları bir koleksiyondaki depolar `EnrollmentDateGroup` model nesneleri görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-247">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="ff5e7-248">Ekleme bir `Dispose` yöntemi:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-248">Add a `Dispose` method:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample22.cs)]

### <a name="modify-the-about-view"></a><span data-ttu-id="ff5e7-249">Değiştirme Görünüm hakkında</span><span class="sxs-lookup"><span data-stu-id="ff5e7-249">Modify the About View</span></span>

<span data-ttu-id="ff5e7-250">Kodla *Views\Home\About.cshtml* aşağıdaki kod ile dosya:</span><span class="sxs-lookup"><span data-stu-id="ff5e7-250">Replace the code in the *Views\Home\About.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample23.cshtml)]

<span data-ttu-id="ff5e7-251">Uygulamayı çalıştırın ve tıklatın **hakkında** bağlantı.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-251">Run the app and click the **About** link.</span></span> <span data-ttu-id="ff5e7-252">Öğrenciler için her kayıt tarihi sayısı bir tabloda görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-252">The count of students for each enrollment date is displayed in a table.</span></span>

![About_page](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image10.png)

## <a name="optional-deploy-the-app-to-windows-azure"></a><span data-ttu-id="ff5e7-254">İsteğe bağlı: uygulama Windows Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="ff5e7-254">Optional: Deploy the app to Windows Azure</span></span>

<span data-ttu-id="ff5e7-255">Şu ana kadar uygulamanızı yerel olarak IIS Express'te geliştirme bilgisayarınızda çalıştığı.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-255">So far your application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="ff5e7-256">Internet üzerinden kullanmak diğer kişiler için kullanılabilir hale getirmek için bir web barındırma sağlayıcısına dağıtmak zorunda.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-256">To make it available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="ff5e7-257">Öğreticinin isteğe bağlı bu bölümde bir Windows Azure Web sitesi dağıtacaksınız.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-257">In this optional section of the tutorial you'll deploy it to a Windows Azure Web Site.</span></span>

### <a name="using-code-first-migrations-to-deploy-the-database"></a><span data-ttu-id="ff5e7-258">Veritabanını dağıtmak için Code First geçişleri kullanma</span><span class="sxs-lookup"><span data-stu-id="ff5e7-258">Using Code First Migrations to Deploy the Database</span></span>

<span data-ttu-id="ff5e7-259">Veritabanını dağıtmak için Code First Migrations kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-259">To deploy the database you'll use Code First Migrations.</span></span> <span data-ttu-id="ff5e7-260">Visual Studio'dan dağıtmak için ayarları yapılandırmak için kullandığınız yayımlama profili oluşturduğunuzda, etiketli onay kutusu seçersiniz **yürütme önce kod uygulamalı geçişler (uygulama başlatılırken çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-260">When you create the publish profile that you use to configure settings for deploying from Visual Studio, you'll select a check box that is labeled **Execute Code First Migrations (runs on application start)**.</span></span> <span data-ttu-id="ff5e7-261">Bu ayar uygulamayı otomatik olarak yapılandırmak dağıtım işlemi neden *Web.config* Code First kullanmayacağından hedef sunucuda dosya `MigrateDatabaseToLatestVersion` Başlatıcı sınıfı.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-261">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>

<span data-ttu-id="ff5e7-262">Visual Studio dağıtım işlemi sırasında veritabanı ile herhangi bir şey yapmaz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-262">Visual Studio does not do anything with the database during the deployment process.</span></span> <span data-ttu-id="ff5e7-263">Dağıtılmış uygulamanın veritabanı dağıtımdan sonra ilk kez eriştiğinde Code First otomatik olarak bir veritabanı oluşturur veya veritabanı şeması en son sürüme güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-263">When the deployed application accesses the database for the first time after deployment, Code First automatically creates the database or updates the database schema to the latest version.</span></span> <span data-ttu-id="ff5e7-264">Uygulama bir geçişler uyguluyorsa `Seed` yöntemi, veritabanı oluşturulur veya şema güncelleştirildikten sonra yöntemi çalışır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-264">If the application implements a Migrations `Seed` method, the method runs after the database is created or the schema is updated.</span></span>

<span data-ttu-id="ff5e7-265">Geçişler `Seed` yöntemi test verilerini ekler.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-265">Your Migrations `Seed` method inserts test data.</span></span> <span data-ttu-id="ff5e7-266">Bir üretim ortamına dağıtılmadan, değiştirmeniz gerekecektir `Seed` şekilde yalnızca üretim veritabanınıza eklenmesini istediğiniz veri ekleyen şekilde yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-266">If you were deploying to a production environment, you would have to change the `Seed` method so that it only inserts data that you want to be inserted into your production database.</span></span> <span data-ttu-id="ff5e7-267">Örneğin, geçerli veri modelinizi gerçek kurslar ancak kurgusal Öğrenciler geliştirme veritabanında olan isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-267">For example, in your current data model you might want to have real courses but fictional students in the development database.</span></span> <span data-ttu-id="ff5e7-268">Yazma bir `Seed` hem de geliştirme yüklenemedi ve üretim için dağıtmadan önce kurgusal Öğrenciler açıklama yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-268">You can write a `Seed` method to load both in development, and then comment out the fictional students before you deploy to production.</span></span> <span data-ttu-id="ff5e7-269">Veya yazabilirsiniz bir `Seed` yalnızca kurslar yüklenip kurgusal Öğrenciler uygulamanın kullanıcı arabirimini kullanarak test veritabanında el ile girin. yöntemi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-269">Or you can write a `Seed` method to load only courses, and enter the fictional students in the test database manually by using the application's UI.</span></span>

### <a name="get-a-windows-azure-account"></a><span data-ttu-id="ff5e7-270">Bir Windows Azure hesabı edinin</span><span class="sxs-lookup"><span data-stu-id="ff5e7-270">Get a Windows Azure account</span></span>

<span data-ttu-id="ff5e7-271">Windows Azure hesabınızın olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-271">You'll need a Windows Azure account.</span></span> <span data-ttu-id="ff5e7-272">Zaten yoksa, yalnızca birkaç dakika içinde ücretsiz bir deneme hesabı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-272">If you don't already have one, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="ff5e7-273">Ayrıntılar için bkz [Windows Azure ücretsiz deneme](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-273">For details, see [Windows Azure Free Trial](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span>

### <a name="create-a-web-site-and-a-sql-database-in-windows-azure"></a><span data-ttu-id="ff5e7-274">Windows Azure'da bir web sitesi ve bir SQL veritabanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="ff5e7-274">Create a web site and a SQL database in Windows Azure</span></span>

<span data-ttu-id="ff5e7-275">Windows Azure Web sitenizi, diğer Windows Azure istemcilerle paylaşılan sanal makineler (VM'ler) üzerinde çalışan anlamına gelir paylaşılan bir barındırma ortamında çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-275">Your Windows Azure Web Site will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other Windows Azure clients.</span></span> <span data-ttu-id="ff5e7-276">Paylaşılan bir barındırma ortamı, bulutta çalışmaya başlamak için bir düşük maliyetli yoludur.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-276">A shared hosting environment is a low-cost way to get started in the cloud.</span></span> <span data-ttu-id="ff5e7-277">Daha sonra web trafiği artarsa, uygulama ayrılmış VM'ler üzerinde çalıştırılan tarafından gereksinimini karşılayacak şekilde ölçeklendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-277">Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.</span></span> <span data-ttu-id="ff5e7-278">Daha karmaşık bir mimari gerekiyorsa, bir Windows Azure bulut hizmetine geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-278">If you need a more complex architecture, you can migrate to a Windows Azure Cloud Service.</span></span> <span data-ttu-id="ff5e7-279">Bulut Hizmetleri, sizin ihtiyaçlarınıza göre yapılandırabilirsiniz özel VM'ler çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-279">Cloud services run on dedicated VMs that you can configure according to your needs.</span></span>

<span data-ttu-id="ff5e7-280">Windows Azure SQL veritabanı, SQL Server teknolojilerini yerleşik olarak bulunan bir bulut tabanlı ilişkisel veritabanı hizmetidir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-280">Windows Azure SQL Database is a cloud-based relational database service that is built on SQL Server technologies.</span></span> <span data-ttu-id="ff5e7-281">Araçları ve SQL Server ile çalışan uygulamalar da SQL veritabanı ile çalışır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-281">Tools and applications that work with SQL Server also work with SQL Database.</span></span>

1. <span data-ttu-id="ff5e7-282">İçinde [Windows Azure Yönetim Portalı](https://manage.windowsazure.com/), tıklatın **Web siteleri** sol sekmesini ve ardından **yeni**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-282">In the [Windows Azure Management Portal](https://manage.windowsazure.com/), click **Web Sites** in the left tab, and then click **New**.</span></span>

    ![Yönetim Portalı'nda yeni düğmesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image11.png)
2. <span data-ttu-id="ff5e7-284">Tıklatın **özel Oluştur**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-284">Click **CUSTOM CREATE**.</span></span>

    ![Yönetim Portalı'nda veritabanı bağlantısı oluşturun](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image12.png)

 <span data-ttu-id="ff5e7-286">**Yeni Web sitesi - özel Oluştur** Sihirbazı açılır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-286">The **New Web Site - Custom Create** wizard opens.</span></span>
3. <span data-ttu-id="ff5e7-287">İçinde **yeni Web sitesi** adım Sihirbazı'nın bir dize girin **URL** kutusunu uygulamanız için benzersiz bir URL olarak kullanın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-287">In the **New Web Site** step of the wizard, enter a string in the **URL** box to use as the unique URL for your application.</span></span> <span data-ttu-id="ff5e7-288">Tam URL ne buraya girdiğiniz ve metin kutusunun yanında göreceğiniz sonekine oluşur.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-288">The complete URL will consist of what you enter here plus the suffix that you see next to the text box.</span></span> <span data-ttu-id="ff5e7-289">"ConU" çizimde gösterilmektedir, ancak farklı bir seçmek olması için bu URL'yi büyük olasılıkla alınır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-289">The illustration shows "ConU", but that URL is probably taken so you will have to choose a different one.</span></span>

    ![Yönetim Portalı'nda veritabanı bağlantısı oluşturun](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image13.png)
4. <span data-ttu-id="ff5e7-291">İçinde **bölge** aşağı açılan listesinde, yakın bir bölge seçin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-291">In the **Region** drop-down list, choose a region close to you.</span></span> <span data-ttu-id="ff5e7-292">Bu ayar, web sitenizi çalışacak hangi veri merkezi belirtir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-292">This setting specifies which data center your web site will run in.</span></span>
5. <span data-ttu-id="ff5e7-293">İçinde **veritabanı** aşağı açılan listesinde, seçin **ücretsiz 20 MB SQL veritabanı oluşturma**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-293">In the **Database** drop-down list, choose **Create a free 20 MB SQL database**.</span></span>

    ![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image14.png)
6. <span data-ttu-id="ff5e7-294">İçinde **DB bağlantı DİZESİ adı**, girin *SchoolContext*.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-294">In the **DB CONNECTION STRING NAME**, enter *SchoolContext*.</span></span>

    ![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image15.png)
7. <span data-ttu-id="ff5e7-295">Sağ taraftaki kutusunun alt kısmındaki işaret oka tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-295">Click the arrow that points to the right at the bottom of the box.</span></span> <span data-ttu-id="ff5e7-296">İçin sihirbaz ilerler **veritabanı ayarlarını** adım.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-296">The wizard advances to the **Database Settings** step.</span></span>
8. <span data-ttu-id="ff5e7-297">İçinde **adı** kutusuna *ContosoUniversityDB*.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-297">In the **Name** box, enter *ContosoUniversityDB*.</span></span>
9. <span data-ttu-id="ff5e7-298">İçinde **Server** kutusunda **yeni SQL veritabanı sunucusu**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-298">In the **Server** box, select **New SQL Database server**.</span></span> <span data-ttu-id="ff5e7-299">Alternatif olarak, daha önce bir sunucu oluşturduysanız, bu sunucu aşağı açılan listeden seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-299">Alternatively, if you previously created a server, you can select that server from the drop-down list.</span></span>
10. <span data-ttu-id="ff5e7-300">Bir yönetici girin **oturum açma adı** ve **parola**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-300">Enter an administrator **LOGIN NAME** and **PASSWORD**.</span></span> <span data-ttu-id="ff5e7-301">Seçtiyseniz **yeni SQL veritabanı sunucusu** mevcut bir ad ve burada parola girmezsiniz, yeni bir ad ve daha sonra veritabanına eriştiğinizde kullanmak üzere şimdi tanımlayacağınız parolayı girersiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-301">If you selected **New SQL Database server** you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database.</span></span> <span data-ttu-id="ff5e7-302">Daha önce oluşturduğunuz bir sunucuyu seçtiyseniz, bu sunucu için kimlik bilgilerini girin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-302">If you selected a server that you created previously, you'll enter credentials for that server.</span></span> <span data-ttu-id="ff5e7-303">Bu öğretici için seçtiğiniz olmaz ***Gelişmiş*** onay kutusu.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-303">For this tutorial, you won't select the ***Advanced*** check box.</span></span> <span data-ttu-id="ff5e7-304">***Gelişmiş*** seçeneklerini veritabanını ayarlamak etkinleştirme [harmanlama](https://msdn.microsoft.com/library/aa174903(v=SQL.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-304">The ***Advanced*** options enable you to set the database [collation](https://msdn.microsoft.com/library/aa174903(v=SQL.80).aspx).</span></span>
11. <span data-ttu-id="ff5e7-305">Aynı seçin **bölge** web sitesi için seçtiğiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-305">Choose the same **Region** that you chose for the web site.</span></span>
12. <span data-ttu-id="ff5e7-306">Tamamlanmış belirtmek üzere kutusunun sağ altındaki onay işaretine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-306">Click the check mark at the bottom right of the box to indicate that you're finished.</span></span>   
  
    ![Veritabanı ayarlarını adım Veritabanı Sihirbazı ile yeni Web sitesi - oluşturun](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image16.png)  

 <span data-ttu-id="ff5e7-308">Aşağıdaki resimde bir var olan SQL Server ve oturum açma kullanarak gösterir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-308">The following image shows using an existing SQL Server and Login.</span></span>   
  
    ![Veritabanı ayarlarını adım Veritabanı Sihirbazı ile yeni Web sitesi - oluşturun](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image17.png)  
  
 <span data-ttu-id="ff5e7-310">Yönetim Portalı Web siteleri sayfasına döndürür ve **durum** sütunda görüntülenir site oluşturulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-310">The Management Portal returns to the Web Sites page, and the **Status** column shows that the site is being created.</span></span> <span data-ttu-id="ff5e7-311">(Genellikle bir dakikadan az), bir süre sonra **durum** sütunda görüntülenir sitesi başarıyla oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-311">After a while (typically less than a minute), the **Status** column shows that the site was successfully created.</span></span> <span data-ttu-id="ff5e7-312">Sol gezinti çubuğunda hesabınızda kullandığınız sitelerin sayısı görüntülenir **Web siteleri** simgesini ve veritabanı sayısı görünür yanına **SQL veritabanları** simgesi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-312">In the navigation bar at the left, the number of sites you have in your account appears next to the **Web Sites** icon, and the number of databases appears next to the **SQL Databases** icon.</span></span>

## <a name="deploy-the-application-to-windows-azure"></a><span data-ttu-id="ff5e7-313">Windows Azure için uygulama dağıtma</span><span class="sxs-lookup"><span data-stu-id="ff5e7-313">Deploy the application to Windows Azure</span></span>

1. <span data-ttu-id="ff5e7-314">Visual Studio'da'nde projeye sağ **Çözüm Gezgini** seçip **Yayımla** ve bağlam menüsünden.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-314">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>  
  
    ![Proje bağlam menüsünde Yayımla](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image18.png)
2. <span data-ttu-id="ff5e7-316">İçinde **profil** sekmesinde **Web'i Yayımla** Sihirbazı'nı tıklatın **alma**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-316">In the **Profile** tab of the **Publish Web** wizard, click **Import**.</span></span>  
  
    ![Yayımlama ayarlarını İçeri Aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image19.png)
3. <span data-ttu-id="ff5e7-318">Visual Studio'da daha önce Windows Azure aboneliğiniz eklemediyseniz, aşağıdaki adımları gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-318">If you have not previously added your Windows Azure subscription in Visual Studio, perform the following steps.</span></span> <span data-ttu-id="ff5e7-319">Aşağı açılan listeden altında Bu adımlarda, aboneliğiniz ekleyebilirsiniz, böylece **bir Windows Azure web sitesinden içeri aktarma** web sitenizi dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-319">In these steps you add your subscription so that the drop-down list under **Import from a Windows Azure web site** will include your web site.</span></span>

    <span data-ttu-id="ff5e7-320">a.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-320">a.</span></span> <span data-ttu-id="ff5e7-321">İçinde **yayımlama profilini içeri aktarma** iletişim kutusu, tıklatın **bir Windows Azure web sitesinden içeri aktarma**ve ardından **Ekle Windows Azure abonelik**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-321">In the **Import Publish Profile** dialog box, click **Import from a Windows Azure web site**, and then click **Add Windows Azure subscription**.</span></span>

    ![Windows Azure Abonelik Ekle](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image20.png)

    <span data-ttu-id="ff5e7-323">b.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-323">b.</span></span> <span data-ttu-id="ff5e7-324">İçinde **alma Windows Azure abonelikleri** iletişim kutusu, tıklatın **indirme abonelik dosyası**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-324">In the **Import Windows Azure Subscriptions** dialog box, click **Download subscription file**.</span></span>

    ![Abonelik dosyasını indirin](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image21.png)

    <span data-ttu-id="ff5e7-326">c.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-326">c.</span></span> <span data-ttu-id="ff5e7-327">Tarayıcı pencerenizde Kaydet *.publishsettings* dosya.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-327">In your browser window, save the *.publishsettings* file.</span></span>

    ![.publishsettings dosyasını indirin](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image22.png)

    > [!WARNING]
    > <span data-ttu-id="ff5e7-329">Güvenlik - *publishsettings* Dosya Hizmetleri ve Windows Azure Aboneliklerini yönetmek için kullanılan (kodlanmamış) kimlik bilgilerinizi içerir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-329">Security - The *publishsettings* file contains your credentials (unencoded) that are used to administer your Windows Azure subscriptions and services.</span></span> <span data-ttu-id="ff5e7-330">Kaynak dizinlerinizi dışında geçici olarak depolamak için bu dosya için en iyi güvenlik uygulaması olduğundan (örneğin *Libraries\Documents* klasör) ve alma işlemi tamamlandıktan sonra silin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-330">The security best practice for this file is to store it temporarily outside your source directories (for example in the *Libraries\Documents* folder), and then delete it once the import has completed.</span></span> <span data-ttu-id="ff5e7-331">Erişim kazanır kötü niyetli bir kullanıcının `.publishsettings` dosyayı düzenleyebilir, oluşturmak ve Windows Azure hizmetlerinizi silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-331">A malicious user who gains access to the `.publishsettings` file can edit, create, and delete your Windows Azure services.</span></span>

    <span data-ttu-id="ff5e7-332">d.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-332">d.</span></span> <span data-ttu-id="ff5e7-333">İçinde **alma Windows Azure abonelikleri** iletişim kutusu, tıklatın **Gözat** gidin *.publishsettings* dosya.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-333">In the **Import Windows Azure Subscriptions** dialog box, click **Browse** and navigate to the *.publishsettings* file.</span></span>

    ![Sub indirin](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image23.png)

    <span data-ttu-id="ff5e7-335">e.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-335">e.</span></span> <span data-ttu-id="ff5e7-336">**İçeri aktar**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-336">Click **Import**.</span></span>

    ![içeri aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image24.png)
4. <span data-ttu-id="ff5e7-338">İçinde **yayımlama profilini içeri aktarma** iletişim kutusunda **bir Windows Azure web sitesinden içeri aktarma**, aşağı açılan listeden, web sitenizi seçin ve ardından **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-338">In the **Import Publish Profile** dialog box, select **Import from a Windows Azure web site**, select your web site from the drop-down list, and then click **OK**.</span></span>  
  
    ![Yayımlama profilini İçeri Aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image25.png)
5. <span data-ttu-id="ff5e7-340">İçinde **bağlantı** sekmesini tıklatın, **bağlantıyı doğrula** ayarlarının doğru olduğunu doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-340">In the **Connection** tab, click **Validate Connection** to make sure that the settings are correct.</span></span>  
  
    ![Bağlantı doğrula](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image26.png)
6. <span data-ttu-id="ff5e7-342">Bağlantı doğrulandığında yeşil bir onay işareti yanında gösterilen **bağlantıyı doğrula** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-342">When the connection has been validated, a green check mark is shown next to the **Validate Connection** button.</span></span> <span data-ttu-id="ff5e7-343">**İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-343">Click **Next**.</span></span>  
  
    ![Başarıyla doğrulanan bağlantı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image27.png)
7. <span data-ttu-id="ff5e7-345">Açık **uzak bağlantı dizesi** açılır listesi altında **SchoolContext** ve oluşturduğunuz veritabanı için bağlantı dizesi seçin.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-345">Open the **Remote connection string** drop-down list under **SchoolContext** and select the connection string for the database you created.</span></span>
8. <span data-ttu-id="ff5e7-346">Seçin **yürütme önce kod uygulamalı geçişler (uygulama başlatılırken çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-346">Select **Execute Code First Migrations (runs on application start)**.</span></span>
9. <span data-ttu-id="ff5e7-347">İşaretini **çalışma zamanında Bu bağlantı dizesini kullan** için **UserContext (DefaultConnection)**, bu uygulama, üyelik veritabanının kullanmadığından.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-347">Uncheck **Use this connection string at runtime** for the **UserContext (DefaultConnection)**, since this application is not using the membership database.</span></span>   
  
    ![Ayarlar sekmesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image28.png)
10. <span data-ttu-id="ff5e7-349">**İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-349">Click **Next**.</span></span>
11. <span data-ttu-id="ff5e7-350">İçinde **Önizleme** sekmesini tıklatın, **önizlemeyi Başlat**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-350">In the **Preview** tab, click **Start Preview**.</span></span>  
  
    ![Önizleme sekmesinde StartPreview düğmesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image29.png)  
  
 <span data-ttu-id="ff5e7-352">Sekme sunucuya kopyalanacak dosyaların bir listesini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-352">The tab displays a list of the files that will be copied to the server.</span></span> <span data-ttu-id="ff5e7-353">Önizleme görüntüleme uygulamayı yayımlamak için gerekli değildir ancak farkında olması için kullanışlı bir işlevdir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-353">Displaying the preview isn't required to publish the application but is a useful function to be aware of.</span></span> <span data-ttu-id="ff5e7-354">Bu durumda, görüntülenen dosyaların listesi ile herhangi bir şey yapmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-354">In this case, you don't need to do anything with the list of files that is displayed.</span></span> <span data-ttu-id="ff5e7-355">Bu uygulamayı dağıtabilmek sonraki açışınızda değişen dosyaları bu listede yer alacaktır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-355">The next time you deploy this application, only the files that have changed will be in this list.</span></span>  
  
    ![StartPreview dosya çıktısı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image30.png)
12. <span data-ttu-id="ff5e7-357">Tıklatın **yayımlama**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-357">Click **Publish**.</span></span>  
 <span data-ttu-id="ff5e7-358">Visual Studio dosyaları Windows Azure sunucusuna kopyalama işlemi başlar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-358">Visual Studio begins the process of copying the files to the Windows Azure server.</span></span>
13. <span data-ttu-id="ff5e7-359">**Çıkış** penceresinde hangi dağıtım eylemlerinin gerçekleştirilen gösterir ve dağıtımın başarılı şekilde tamamlandığını bildirir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-359">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span>  
  
    ![Çıktı penceresi başarılı dağıtım raporlama](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image31.png)
14. <span data-ttu-id="ff5e7-361">Başarılı dağıtım sırasında varsayılan tarayıcı otomatik olarak dağıtılan web sitesinin URL'sini açar.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-361">Upon successful deployment, the default browser automatically opens to the URL of the deployed web site.</span></span>  
 <span data-ttu-id="ff5e7-362">Oluşturduğunuz uygulama bulutta şu anda çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-362">The application you created is now running in the cloud.</span></span> <span data-ttu-id="ff5e7-363">Öğrenciler sekmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-363">Click the Students tab.</span></span>  
  
    ![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image32.png)

<span data-ttu-id="ff5e7-365">Bu noktada, *SchoolContext* veritabanı seçtiğiniz çünkü Windows Azure SQL veritabanı oluşturuldu **yürütme önce kod uygulamalı geçişler (uygulama başlatılırken çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-365">At this point your *SchoolContext* database has been created in the Windows Azure SQL Database because you selected **Execute Code First Migrations (runs on app start)**.</span></span> <span data-ttu-id="ff5e7-366">*Web.config* web sitesi dağıtıldı dosyasında değiştirildi böylece [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) Başlatıcı kodunuz okur veya veritabanına veri Yazar ilk kez çalıştırma (hangi Seçtiğiniz zaman oldu **Öğrenciler** sekmesi):</span><span class="sxs-lookup"><span data-stu-id="ff5e7-366">The *Web.config* file in the deployed web site has been changed so that the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer would run the first time your code reads or writes data in the database (which happened when you selected the **Students** tab):</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image33.png)

<span data-ttu-id="ff5e7-367">Dağıtım işlemi de oluşturulan yeni bir bağlantı dizesi *(SchoolContext\_DatabasePublish*) veritabanı şemasının güncelleştirme ve veritabanı dengeli dağıtımı için kullanılacak Code First geçişleri için.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-367">The deployment process also created a new connection string *(SchoolContext\_DatabasePublish*) for Code First Migrations to use for updating the database schema and seeding the database.</span></span>

![Database_Publish bağlantı dizesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image34.png)

<span data-ttu-id="ff5e7-369">*DefaultConnection* (Bu öğreticide kullanmıyorsanız) üyelik veritabanı bağlantı dizesi içindir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-369">The *DefaultConnection* connection string is for the membership database (which we are not using in this tutorial).</span></span> <span data-ttu-id="ff5e7-370">*SchoolContext* bağlantı dizesi için ContosoUniversity veritabanıdır.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-370">The *SchoolContext* connection string is for the ContosoUniversity database.</span></span>

<span data-ttu-id="ff5e7-371">Web.config dosyasının kendi bilgisayara dağıtılmış sürümünde bulabilirsiniz *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. Dağıtılan erişim *Web.config* kendisini FTP kullanarak dosya.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-371">You can find the deployed version of the Web.config file on your own computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. You can access the deployed *Web.config* file itself by using FTP.</span></span> <span data-ttu-id="ff5e7-372">Yönergeler için bkz: [Visual Studio kullanarak ASP.NET Web Dağıtımı: bir kod güncelleştirme dağıtımı](../../../../web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update.md).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-372">For instructions, see [ASP.NET Web Deployment using Visual Studio: Deploying a Code Update](../../../../web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update.md).</span></span> <span data-ttu-id="ff5e7-373">İle başlayan yönergeleri izleyin "bir FTP aracı kullanmak için üç şey gerekir: FTP URL'si, kullanıcı adı ve parolanın."</span><span class="sxs-lookup"><span data-stu-id="ff5e7-373">Follow the instructions that start with "To use an FTP tool, you need three things: the FTP URL, the user name, and the password."</span></span>

> [!NOTE]
> <span data-ttu-id="ff5e7-374">URL bulur herkes veri değiştirebilmeniz için web uygulaması güvenlik uygulamaz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-374">The web app doesn't implement security, so anyone who finds the URL can change the data.</span></span> <span data-ttu-id="ff5e7-375">Web sitesini güvenli hale getirmek yönergeler için bkz: [üyelik, OAuth ve SQL veritabanı ile Güvenli ASP.NET MVC uygulaması Windows Azure Web sitesine dağıtmak](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-375">For instructions on how to secure the web site, see [Deploy a Secure ASP.NET MVC app with Membership, OAuth, and SQL Database to a Windows Azure Web Site](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span></span> <span data-ttu-id="ff5e7-376">Windows Azure Yönetim Portalı'nı kullanarak site kullanarak diğer kişilerin engelleyebilir veya **Sunucu Gezgini** siteyi durdurmak için Visual Studio'da.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-376">You can prevent other people from using the site by using the Windows Azure Management Portal or **Server Explorer** in Visual Studio to stop the site.</span></span>


![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image35.png)

## <a name="code-first-initializers"></a><span data-ttu-id="ff5e7-377">Kod ilk başlatıcıları</span><span class="sxs-lookup"><span data-stu-id="ff5e7-377">Code First Initializers</span></span>

<span data-ttu-id="ff5e7-378">Dağıtım bölümünde gördüğünüz [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) kullanılan Başlatıcısı.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-378">In the deployment section you saw the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer being used.</span></span> <span data-ttu-id="ff5e7-379">Kod ilk, dahil olmak üzere kullanabileceğiniz diğer başlatıcıları de sağlar [Createdatabaseıfnotexists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (varsayılan), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) ve [ DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-379">Code First also provides other initializers that you can use, including [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (the default), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) and [DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span></span> <span data-ttu-id="ff5e7-380">`DropCreateAlways` Başlatıcı birim testleri için koşullar ayarlamak için yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-380">The `DropCreateAlways` initializer can be useful for setting up conditions for unit tests.</span></span> <span data-ttu-id="ff5e7-381">Ayrıca kendi başlatıcıları yazabilirsiniz ve uygulama okur veya veritabanına yazar beklemek istemiyorsanız, bir başlatıcı açıkça çağırabilir.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-381">You can also write your own initializers, and you can call an initializer explicitly if you don't want to wait until the application reads from or writes to the database.</span></span> <span data-ttu-id="ff5e7-382">Bölüm 6 defterinin başlatıcıları kapsamlı bir açıklama için bkz: [programlama Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) Julie Lerman ve Rowan Mert.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-382">For a comprehensive explanation of initializers, see chapter 6 of the book [Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) by Julie Lerman and Rowan Miller.</span></span>

## <a name="summary"></a><span data-ttu-id="ff5e7-383">Özet</span><span class="sxs-lookup"><span data-stu-id="ff5e7-383">Summary</span></span>

<span data-ttu-id="ff5e7-384">Bu öğreticide bir veri modeli oluşturmak ve temel CRUD, sıralama, filtreleme, disk belleği ve gruplandırma işlevi uygulamak öğrendiniz.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-384">In this tutorial you've seen how to create a data model and implement basic CRUD, sorting, filtering, paging, and grouping functionality.</span></span> <span data-ttu-id="ff5e7-385">Sonraki öğreticide veri modelini genişleterek daha gelişmiş konuları arayan başlarsınız.</span><span class="sxs-lookup"><span data-stu-id="ff5e7-385">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="ff5e7-386">Diğer Entity Framework kaynaklarına bağlantılar bulunabilir [ASP.NET Data Access içerik haritası](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="ff5e7-386">Links to other Entity Framework resources can be found in the [ASP.NET Data Access Content Map](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="ff5e7-387">[Önceki](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
[sonraki](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)</span><span class="sxs-lookup"><span data-stu-id="ff5e7-387">[Previous](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
[Next](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)</span></span>

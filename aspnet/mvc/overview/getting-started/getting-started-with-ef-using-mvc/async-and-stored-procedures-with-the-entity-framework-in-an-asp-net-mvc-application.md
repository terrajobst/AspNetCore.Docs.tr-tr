---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application
title: Zaman uyumsuz ve ASP.NET MVC uygulamasındaki Entity Framework saklı yordamlar | Microsoft Docs
author: tdykstra
description: Contoso University örnek web uygulaması Entity Framework 6 Code First ve Visual Studio kullanarak ASP.NET MVC 5 uygulamalarının nasıl oluşturulacağını gösterir...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/07/2014
ms.topic: article
ms.assetid: 27d110fc-d1b7-4628-a763-26f1e6087549
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 84cf427c7da7905444568ac34534e9ed98a7d8c8
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/06/2018
---
<a name="async-and-stored-procedures-with-the-entity-framework-in-an-aspnet-mvc-application"></a><span data-ttu-id="871dc-103">Zaman uyumsuz ve ASP.NET MVC uygulamasındaki Entity Framework saklı yordamlar</span><span class="sxs-lookup"><span data-stu-id="871dc-103">Async and Stored Procedures with the Entity Framework in an ASP.NET MVC Application</span></span>
====================
<span data-ttu-id="871dc-104">by [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="871dc-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="871dc-105">[Tamamlanan projenizi indirin](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) veya [PDF indirin](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="871dc-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="871dc-106">Contoso University örnek web uygulaması Entity Framework 6 Code First ve Visual Studio 2013 kullanarak ASP.NET MVC 5 uygulamalarının nasıl oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="871dc-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="871dc-107">Eğitmen serisi hakkında daha fazla bilgi için bkz: [serideki ilk öğreticide](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="871dc-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>


<span data-ttu-id="871dc-108">Önceki eğitimlerine okuma ve zaman uyumlu programlama modeli kullanarak veri güncelleştirme öğrendiniz.</span><span class="sxs-lookup"><span data-stu-id="871dc-108">In earlier tutorials you learned how to read and update data using the synchronous programming model.</span></span> <span data-ttu-id="871dc-109">Bu öğreticide, zaman uyumsuz programlama modeli uygulamak bkz.</span><span class="sxs-lookup"><span data-stu-id="871dc-109">In this tutorial you see how to implement the asynchronous programming model.</span></span> <span data-ttu-id="871dc-110">Zaman uyumsuz kodu daha iyi sunucu kaynaklarının daha iyi kullanımı kolaylaştırır gerçekleştirilemiyor. bir uygulama yardımcı olabilir.</span><span class="sxs-lookup"><span data-stu-id="871dc-110">Asynchronous code can help an application perform better because it makes better use of server resources.</span></span>

<span data-ttu-id="871dc-111">Bu öğreticide, ekleme, güncelleştirme ve silme işlemleri bir varlık için saklı yordamları kullanma görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="871dc-111">In this tutorial you'll also see how to use stored procedures for insert, update, and delete operations on an entity.</span></span>

<span data-ttu-id="871dc-112">Son olarak, uygulamayı Azure'a dağıttığınız ilk zaman uyguladık tüm veritabanı değişiklikleri birlikte dağıtmanız.</span><span class="sxs-lookup"><span data-stu-id="871dc-112">Finally, you'll redeploy the application to Azure, along with all of the database changes that you've implemented since the first time you deployed.</span></span>

<span data-ttu-id="871dc-113">Aşağıdaki çizimler ile çalışma sayfaları bazıları göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="871dc-113">The following illustrations show some of the pages that you'll work with.</span></span>

![Departmanlar Sayfası](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

![Departman oluşturma](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

## <a name="why-bother-with-asynchronous-code"></a><span data-ttu-id="871dc-116">Zaman uyumsuz koduyla neden rahatsız</span><span class="sxs-lookup"><span data-stu-id="871dc-116">Why bother with asynchronous code</span></span>

<span data-ttu-id="871dc-117">Bir web sunucusu kullanılabilir iş parçacıklarının sınırlı sayıda sahiptir ve yüksek yük durumlarda tüm kullanılabilir iş parçacıklarının kullanımda olabilir.</span><span class="sxs-lookup"><span data-stu-id="871dc-117">A web server has a limited number of threads available, and in high load situations all of the available threads might be in use.</span></span> <span data-ttu-id="871dc-118">Bu durum oluştuğunda sunucu yukarı serbest iş parçacığı kadar yeni istekleri işleyemiyor.</span><span class="sxs-lookup"><span data-stu-id="871dc-118">When that happens, the server can't process new requests until the threads are freed up.</span></span> <span data-ttu-id="871dc-119">G/ç tamamlamak bekliyorsunuz çünkü bunlar herhangi bir iş gerçekte yapmamanız sırasında zaman uyumlu koduyla birçok iş parçacığı bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="871dc-119">With synchronous code, many threads may be tied up while they aren't actually doing any work because they're waiting for I/O to complete.</span></span> <span data-ttu-id="871dc-120">Bir işlemin g/ç tamamlanması beklenirken zaman uyumsuz koduyla diğer istekleri işlemek için kullanılacak sunucuyu kaydınızı kendi iş parçacığı serbest bırakılır.</span><span class="sxs-lookup"><span data-stu-id="871dc-120">With asynchronous code, when a process is waiting for I/O to complete, its thread is freed up for the server to use for processing other requests.</span></span> <span data-ttu-id="871dc-121">Sonuç olarak, zaman uyumsuz kod sunucu kaynaklarını daha verimli şekilde kullanabilir ve sunucu gecikme olmadan daha fazla trafik işlemek için etkin olmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="871dc-121">As a result, asynchronous code enables server resources to be use more efficiently, and the server is enabled to handle more traffic without delays.</span></span>

<span data-ttu-id="871dc-122">Yazma ve zaman uyumsuz kodu test etme .NET önceki sürümlerinde, karmaşık hata eğilimindedir ve hata ayıklamak sabit.</span><span class="sxs-lookup"><span data-stu-id="871dc-122">In earlier versions of .NET, writing and testing asynchronous code was complex, error prone, and hard to debug.</span></span> <span data-ttu-id="871dc-123">.NET 4.5 yazma, test ve hata ayıklama zaman uyumsuz kodu değil bir nedeniniz yoksa zaman uyumsuz kod genellikle yazmalısınız çok kolaydır.</span><span class="sxs-lookup"><span data-stu-id="871dc-123">In .NET 4.5, writing, testing, and debugging asynchronous code is so much easier that you should generally write asynchronous code unless you have a reason not to.</span></span> <span data-ttu-id="871dc-124">Zaman uyumsuz kod yükünü az miktarda sağladıkları gerektirmez, ancak performans isabet yüksek trafik durumlarda, çalışırken edilebilir olduğu düşünülerek trafiği düşük durumlarda, olası performans geliştirmesi önemli.</span><span class="sxs-lookup"><span data-stu-id="871dc-124">Asynchronous code does introduce a small amount of overhead, but for low traffic situations the performance hit is negligible, while for high traffic situations, the potential performance improvement is substantial.</span></span>

<span data-ttu-id="871dc-125">Zaman uyumsuz programlama hakkında daha fazla bilgi için bkz: [çağrıları engelleme önlemek için kullanım .NET 4.5'in zaman uyumsuz Destek](../../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/web-development-best-practices.md#async).</span><span class="sxs-lookup"><span data-stu-id="871dc-125">For more information about asynchronous programming, see [Use .NET 4.5's async support to avoid blocking calls](../../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/web-development-best-practices.md#async).</span></span>

## <a name="create-the-department-controller"></a><span data-ttu-id="871dc-126">Departman denetleyicisi oluşturun</span><span class="sxs-lookup"><span data-stu-id="871dc-126">Create the Department controller</span></span>

<span data-ttu-id="871dc-127">Bu süre dışında eski bir denetleyicisi yaptığınız gibi seçin bir departman denetleyicisi oluşturun **kullanım zaman uyumsuz denetleyici** Eylemler onay kutusu.</span><span class="sxs-lookup"><span data-stu-id="871dc-127">Create a Department controller the same way you did the earlier controllers, except this time select the **Use async controller** actions check box.</span></span>

![Departman denetleyicisi iskele](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

<span data-ttu-id="871dc-129">Ne zaman uyumlu bir kod için eklenen aşağıdaki önemli noktaları Göster `Index` yöntemini zaman uyumsuz sağlamak için:</span><span class="sxs-lookup"><span data-stu-id="871dc-129">The following highlights show what was added to the synchronous code for the `Index` method to make it asynchronous:</span></span>

[!code-csharp[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs?highlight=1,4)]

<span data-ttu-id="871dc-130">Zaman uyumsuz olarak yürütülecek Entity Framework veritabanı sorgusu etkinleştirmek için dört değişiklikleri uygulandı:</span><span class="sxs-lookup"><span data-stu-id="871dc-130">Four changes were applied to enable the Entity Framework database query to execute asynchronously:</span></span>

- <span data-ttu-id="871dc-131">Yöntem ile işaretlenmiş `async` yöntemi gövde bölümlerinin geri aramalar oluşturun ve otomatik olarak oluşturmak için derleyici söyler anahtar sözcüğü `Task<ActionResult>` döndürülen nesne.</span><span class="sxs-lookup"><span data-stu-id="871dc-131">The method is marked with the `async` keyword, which tells the compiler to generate callbacks for parts of the method body and to automatically create the `Task<ActionResult>` object that is returned.</span></span>
- <span data-ttu-id="871dc-132">Dönüş türü değiştirildi `ActionResult` için `Task<ActionResult>`.</span><span class="sxs-lookup"><span data-stu-id="871dc-132">The return type was changed from `ActionResult` to `Task<ActionResult>`.</span></span> <span data-ttu-id="871dc-133">`Task<T>` Türünü temsil eden bir sonuç türü ile devam eden iş `T`.</span><span class="sxs-lookup"><span data-stu-id="871dc-133">The `Task<T>` type represents ongoing work with a result of type `T`.</span></span>
- <span data-ttu-id="871dc-134">`await` Anahtar sözcüğü, web hizmeti çağrısı uygulandı.</span><span class="sxs-lookup"><span data-stu-id="871dc-134">The `await` keyword was applied to the web service call.</span></span> <span data-ttu-id="871dc-135">Derleyici bu anahtar sözcük gördüğünde, arka planda bu yöntem iki parçasına ayırır.</span><span class="sxs-lookup"><span data-stu-id="871dc-135">When the compiler sees this keyword, behind the scenes it splits the method into two parts.</span></span> <span data-ttu-id="871dc-136">İlk bölümü ile zaman uyumsuz olarak başlatıldığında işlemi sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="871dc-136">The first part ends with the operation that is started asynchronously.</span></span> <span data-ttu-id="871dc-137">İkinci bölümü işlem tamamlandığında çağrılan bir geri çağırma yöntemi konur.</span><span class="sxs-lookup"><span data-stu-id="871dc-137">The second part is put into a callback method that is called when the operation completes.</span></span>
- <span data-ttu-id="871dc-138">Zaman uyumsuz sürümü `ToList` genişletme yöntemi çağrıldı.</span><span class="sxs-lookup"><span data-stu-id="871dc-138">The asynchronous version of the `ToList` extension method was called.</span></span>

<span data-ttu-id="871dc-139">Neden olan `departments.ToList` deyimi değiştiren ancak `departments = db.Departments` deyimi?</span><span class="sxs-lookup"><span data-stu-id="871dc-139">Why is the `departments.ToList` statement modified but not the `departments = db.Departments` statement?</span></span> <span data-ttu-id="871dc-140">Sorguları ya da veritabanına gönderilen komutları neden deyimleri zaman uyumsuz olarak yürütülen nedenidir.</span><span class="sxs-lookup"><span data-stu-id="871dc-140">The reason is that only statements that cause queries or commands to be sent to the database are executed asynchronously.</span></span> <span data-ttu-id="871dc-141">`departments = db.Departments` Deyimi bir sorgu ayarlar ancak kadar sorgu yürütülmedi `ToList` yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="871dc-141">The `departments = db.Departments` statement sets up a query but the query is not executed until the `ToList` method is called.</span></span> <span data-ttu-id="871dc-142">Bu nedenle, yalnızca `ToList` yöntemi zaman uyumsuz olarak yürütülebilir.</span><span class="sxs-lookup"><span data-stu-id="871dc-142">Therefore, only the `ToList` method is executed asynchronously.</span></span>

<span data-ttu-id="871dc-143">İçinde `Details` yöntemi ve `HttpGet` `Edit` ve `Delete` yöntemleri `Find` zaman uyumsuz olarak yürütülen yöntemi olacak şekilde veritabanına gönderilmek üzere bir sorgu neden olan bir yöntemdir:</span><span class="sxs-lookup"><span data-stu-id="871dc-143">In the `Details` method and the `HttpGet` `Edit` and `Delete` methods, the `Find` method is the one that causes a query to be sent to the database, so that's the method that gets executed asynchronously:</span></span>

[!code-csharp[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs?highlight=7)]

<span data-ttu-id="871dc-144">İçinde `Create`, `HttpPost Edit`, ve `DeleteConfirmed` yöntemleri olduğu `SaveChanges` yürütülecek bir komut neden yöntem çağrısı, gibi ifadelerini `db.Departments.Add(department)` , yalnızca neden varlıklar bellek değiştirilecek.</span><span class="sxs-lookup"><span data-stu-id="871dc-144">In the `Create`, `HttpPost Edit`, and `DeleteConfirmed` methods, it is the `SaveChanges` method call that causes a command to be executed, not statements such as `db.Departments.Add(department)` which only cause entities in memory to be modified.</span></span>

[!code-csharp[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cs?highlight=6)]

<span data-ttu-id="871dc-145">Açık *Views\Department\Index.cshtml*ve şablon kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="871dc-145">Open *Views\Department\Index.cshtml*, and replace the template code with the following code:</span></span>

[!code-cshtml[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cshtml?highlight=3,5,20-22,36-38)]

<span data-ttu-id="871dc-146">Sağa taşır yönetici adı bu kodu başlığı dizinden Departmanlar için değiştirir ve yöneticinin tam adı sağlar.</span><span class="sxs-lookup"><span data-stu-id="871dc-146">This code changes the title from Index to Departments, moves the Administrator name to the right, and provides the full name of the administrator.</span></span>

<span data-ttu-id="871dc-147">Oluştur, Sil, ayrıntı ve düzenleme görünümleri, başlığını değiştirme `InstructorID` "Yönetici" değiştirdiğiniz bölüm adı alanını "Departman" indirmelere görünümlerde aynı şekilde alanı.</span><span class="sxs-lookup"><span data-stu-id="871dc-147">In the Create, Delete, Details, and Edit views, change the caption for the `InstructorID` field to "Administrator" the same way you changed the department name field to "Department" in the Course views.</span></span>

<span data-ttu-id="871dc-148">Oluşturma ve düzenleme görünümleri aşağıdaki kodu kullanın:</span><span class="sxs-lookup"><span data-stu-id="871dc-148">In the Create and Edit views use the following code:</span></span>

[!code-cshtml[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cshtml)]

<span data-ttu-id="871dc-149">Sil ve ayrıntıları görünümlerinde aşağıdaki kodu kullanın:</span><span class="sxs-lookup"><span data-stu-id="871dc-149">In the Delete and Details views use the following code:</span></span>

[!code-cshtml[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cshtml)]

<span data-ttu-id="871dc-150">Uygulamayı çalıştırın ve **Departmanlar** sekmesi.</span><span class="sxs-lookup"><span data-stu-id="871dc-150">Run the application, and click the **Departments** tab.</span></span>

![Departmanlar Sayfası](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="871dc-152">Her şey aynı diğer denetleyicileri olduğu gibi çalışır, ancak bu denetleyicide tüm SQL sorguları zaman uyumsuz olarak yürütülen.</span><span class="sxs-lookup"><span data-stu-id="871dc-152">Everything works the same as in the other controllers, but in this controller all of the SQL queries are executing asynchronously.</span></span>

<span data-ttu-id="871dc-153">Zaman uyumsuz programlama Entity Framework ile kullandığınızda dikkat edilecek bazı noktalar:</span><span class="sxs-lookup"><span data-stu-id="871dc-153">Some things to be aware of when you are using asynchronous programming with the Entity Framework:</span></span>

- <span data-ttu-id="871dc-154">Zaman uyumsuz kodu iş parçacığı içinde korumalı değil.</span><span class="sxs-lookup"><span data-stu-id="871dc-154">The async code is not thread safe.</span></span> <span data-ttu-id="871dc-155">Diğer bir deyişle, diğer bir deyişle, paralel kullanarak aynı bağlam örneğine birden çok işlemleri yapmak denemeyin.</span><span class="sxs-lookup"><span data-stu-id="871dc-155">In other words, in other words, don't try to do multiple operations in parallel using the same context instance.</span></span>
- <span data-ttu-id="871dc-156">Zaman uyumsuz kod performans yararlarını yararlanmak isterseniz herhangi bir kitaplığı paketleri emin olun (örneğin disk belleği için olduğu gibi) kullanıyorsanız, veritabanına gönderilmek üzere sorgular neden herhangi bir Entity Framework yöntem çağırırsanız zaman uyumsuz da kullanın.</span><span class="sxs-lookup"><span data-stu-id="871dc-156">If you want to take advantage of the performance benefits of async code, make sure that any library packages that you're using (such as for paging), also use async if they call any Entity Framework methods that cause queries to be sent to the database.</span></span>

## <a name="use-stored-procedures-for-inserting-updating-and-deleting"></a><span data-ttu-id="871dc-157">Ekleme, güncelleştirme ve silme için saklı yordamları kullanma</span><span class="sxs-lookup"><span data-stu-id="871dc-157">Use stored procedures for inserting, updating, and deleting</span></span>

<span data-ttu-id="871dc-158">Bazı geliştiriciler ve DBAs veritabanı erişimi için saklı yordamlar kullanmayı tercih eder.</span><span class="sxs-lookup"><span data-stu-id="871dc-158">Some developers and DBAs prefer to use stored procedures for database access.</span></span> <span data-ttu-id="871dc-159">Entity Framework'ün önceki sürümlerinde, bir saklı yordam tarafından kullanarak veri alabilirsiniz [ham bir SQL sorgusu yürütme](advanced-entity-framework-scenarios-for-an-mvc-web-application.md), ancak saklı yordamları güncelleştirme işlemleri için kullanılacak EF toplamasını olamaz.</span><span class="sxs-lookup"><span data-stu-id="871dc-159">In earlier versions of Entity Framework you can retrieve data using a stored procedure by [executing a raw SQL query](advanced-entity-framework-scenarios-for-an-mvc-web-application.md), but you can't instruct EF to use stored procedures for update operations.</span></span> <span data-ttu-id="871dc-160">EF 6'saklı yordamları kullanmak için Code First yapılandırma çok kolaydır.</span><span class="sxs-lookup"><span data-stu-id="871dc-160">In EF 6 it's easy to configure Code First to use stored procedures.</span></span>

1. <span data-ttu-id="871dc-161">İçinde *DAL\SchoolContext.cs*, vurgulanmış kodu ekleyin `OnModelCreating` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="871dc-161">In *DAL\SchoolContext.cs*, add the highlighted code to the `OnModelCreating` method.</span></span>

    [!code-csharp[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs?highlight=9)]

    <span data-ttu-id="871dc-162">Bu kod, Ekle, saklı yordamlara Entity Framework bildirir. güncelleştirme ve silme işlemleri üzerinde `Department` varlık.</span><span class="sxs-lookup"><span data-stu-id="871dc-162">This code instructs Entity Framework to use stored procedures for insert, update, and delete operations on the `Department` entity.</span></span>
2. <span data-ttu-id="871dc-163">Paket yönetmek konsolunda, aşağıdaki komutu girin:</span><span class="sxs-lookup"><span data-stu-id="871dc-163">In Package Manage Console, enter the following command:</span></span>

    `add-migration DepartmentSP`

    <span data-ttu-id="871dc-164">Açık *geçişler\&lt; zaman damgası&gt;\_DepartmentSP.cs* kodu görmek için `Up` oluşturan yöntemi INSERT, Update ve Delete saklı yordamlar:</span><span class="sxs-lookup"><span data-stu-id="871dc-164">Open *Migrations\&lt;timestamp&gt;\_DepartmentSP.cs* to see the code in the `Up` method that creates Insert, Update, and Delete stored procedures:</span></span>

    [!code-csharp[Main](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs?highlight=3-4,26-27,42-43)]
3. <span data-ttu-id="871dc-165">Paket yönetmek konsolunda, aşağıdaki komutu girin:</span><span class="sxs-lookup"><span data-stu-id="871dc-165">In Package Manage Console, enter the following command:</span></span>

     `update-database`
4. <span data-ttu-id="871dc-166">Uygulamayı hata ayıklama modunda çalıştırmak, tıklatın **Departmanlar** sekmesini ve ardından **Yeni Oluştur**.</span><span class="sxs-lookup"><span data-stu-id="871dc-166">Run the application in debug mode, click the **Departments** tab, and then click **Create New**.</span></span>
5. <span data-ttu-id="871dc-167">Verileri için yeni bir bölüm girin ve ardından **oluşturma**.</span><span class="sxs-lookup"><span data-stu-id="871dc-167">Enter data for a new department, and then click **Create**.</span></span>

     ![Departman oluşturma](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)
6. <span data-ttu-id="871dc-169">Visual Studio'da günlüklerine bakın **çıkış** bir saklı yordam yeni bölüm satır eklemek için kullanıldığını görmek için pencere.</span><span class="sxs-lookup"><span data-stu-id="871dc-169">In Visual Studio, look at the logs in the **Output** window to see that a stored procedure was used to insert the new Department row.</span></span>

     ![Bölüm Ekle SP](async-and-stored-procedures-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="871dc-171">Kod ilk varsayılan depolanmış yordam adları oluşturur.</span><span class="sxs-lookup"><span data-stu-id="871dc-171">Code First creates default stored procedure names.</span></span> <span data-ttu-id="871dc-172">Varolan bir veritabanını kullanıyorsanız, zaten veritabanında tanımlı saklı yordamları kullanmak için saklı yordam adları özelleştirme gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="871dc-172">If you are using an existing database, you might need to customize the stored procedure names in order to use stored procedures already defined in the database.</span></span> <span data-ttu-id="871dc-173">Bunun hakkında daha fazla bilgi için bkz: [Entity Framework kod ilk ekleme/güncelleştirme/silme saklı yordamlar](https://msdn.microsoft.com/data/dn468673).</span><span class="sxs-lookup"><span data-stu-id="871dc-173">For information about how to do that, see [Entity Framework Code First Insert/Update/Delete Stored Procedures](https://msdn.microsoft.com/data/dn468673).</span></span>

<span data-ttu-id="871dc-174">Ne saklı yordamları oluşturulan özelleştirmek istiyorsanız, geçişler için kurulmuş kodu düzenleyebilirsiniz `Up` saklı yordamı oluşturan yöntemi.</span><span class="sxs-lookup"><span data-stu-id="871dc-174">If you want to customize what generated stored procedures do, you can edit the scaffolded code for the migrations `Up` method that creates the stored procedure.</span></span> <span data-ttu-id="871dc-175">Bu şekilde geçiş çalıştırılır ve geçişler çalıştığında, otomatik dağıtımdan sonra üretimde üretim veritabanınız uygulanır değişikliklerinizi her yansıtılır.</span><span class="sxs-lookup"><span data-stu-id="871dc-175">That way your changes are reflected whenever that migration is run and will be applied to your production database when migrations runs automatically in production after deployment.</span></span>

<span data-ttu-id="871dc-176">Önceki bir geçiş oluşturulmuş mevcut bir saklı yordam değiştirmek istiyorsanız, boş bir geçiş oluşturmak için Add-Migration komutunu kullanın ve el ile çağıran kodu yazma [AlterStoredProcedure](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.alterstoredprocedure.aspx) yöntemi .</span><span class="sxs-lookup"><span data-stu-id="871dc-176">If you want to change an existing stored procedure that was created in a previous migration, you can use the Add-Migration command to generate a blank migration, and then manually write code that calls the [AlterStoredProcedure](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.alterstoredprocedure.aspx) method.</span></span>

## <a name="deploy-to-azure"></a><span data-ttu-id="871dc-177">Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="871dc-177">Deploy to Azure</span></span>

<span data-ttu-id="871dc-178">Bu bölümde isteğe bağlı tamamladınız gerektirir **uygulamayı Azure'a dağıtan** bölümüne [geçişleri ve dağıtım](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application.md) bu dizinin Öğreticisi.</span><span class="sxs-lookup"><span data-stu-id="871dc-178">This section requires you to have completed the optional **Deploying the app to Azure** section in the [Migrations and Deployment](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application.md) tutorial of this series.</span></span> <span data-ttu-id="871dc-179">Yerel projenizi veritabanında silerek çözülmüş geçişler hatalar varsa, bu bölümü atlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="871dc-179">If you had migrations errors that you resolved by deleting the database in your local project, skip this section.</span></span>

1. <span data-ttu-id="871dc-180">Visual Studio'da'nde projeye sağ **Çözüm Gezgini** seçip **Yayımla** ve bağlam menüsünden.</span><span class="sxs-lookup"><span data-stu-id="871dc-180">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>
2. <span data-ttu-id="871dc-181">Tıklatın **yayımlama**.</span><span class="sxs-lookup"><span data-stu-id="871dc-181">Click **Publish**.</span></span>

    <span data-ttu-id="871dc-182">Visual Studio Azure uygulamaya dağıtır ve uygulama Azure'da çalışan, varsayılan tarayıcıda açılır.</span><span class="sxs-lookup"><span data-stu-id="871dc-182">Visual Studio deploys the application to Azure, and the application opens in your default browser, running in Azure.</span></span>
3. <span data-ttu-id="871dc-183">Bunu doğrulamak için uygulamayı test çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="871dc-183">Test the application to verify it's working.</span></span>

    <span data-ttu-id="871dc-184">Bir sayfa, ilk kez çalıştırdığınızda veritabanına erişir, Entity Framework tüm geçişler çalıştırılır `Up` veritabanı geçerli veri modeli ile güncel duruma getirmek için gereken yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="871dc-184">The first time you run a page that accesses the database, the Entity Framework runs all of the migrations `Up` methods required to bring the database up to date with the current data model.</span></span> <span data-ttu-id="871dc-185">Ayrıca, tüm Bu öğreticide eklenen departmanı sayfalar dahil olmak üzere tüm dağıtılan en son ne zaman beri eklenmiş web sayfaları artık kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="871dc-185">You can now use all of the web pages that you added since the last time you deployed, including the Department pages that you added in this tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="871dc-186">Özet</span><span class="sxs-lookup"><span data-stu-id="871dc-186">Summary</span></span>

<span data-ttu-id="871dc-187">Bu öğreticide zaman uyumsuz olarak yürütür kodlar yazarak sunucu verimliliğini artırmak nasıl ve kullanmak için saklı yordam nasıl ekleme, güncelleştirme ve silme işlemleri gördünüz.</span><span class="sxs-lookup"><span data-stu-id="871dc-187">In this tutorial you saw how to improve server efficiency by writing code that executes asynchronously, and how to use stored procedures for insert, update, and delete operations.</span></span> <span data-ttu-id="871dc-188">Sonraki öğreticide, birden çok kullanıcı aynı anda aynı kaydı düzenlemeye çalıştığınızda veri kaybını önlemek nasıl görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="871dc-188">In the next tutorial, you'll see how to prevent data loss when multiple users try to edit the same record at the same time.</span></span>

<span data-ttu-id="871dc-189">Diğer Entity Framework kaynaklarına bağlantılar bulunabilir [ASP.NET Data Access - kaynakları önerilen](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="871dc-189">Links to other Entity Framework resources can be found in the [ASP.NET Data Access - Recommended Resources](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="871dc-190">[Önceki](updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md)
> [sonraki](handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application.md)</span><span class="sxs-lookup"><span data-stu-id="871dc-190">[Previous](updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application.md)
[Next](handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application.md)</span></span>

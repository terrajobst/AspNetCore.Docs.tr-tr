---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application
title: "Bir ASP.NET MVC 5 uygulaması (11 / 12) Entity Framework 6 kalıtım uygulama | Microsoft Docs"
author: tdykstra
description: "Contoso University örnek web uygulaması Entity Framework 6 Code First ve Visual Studio kullanarak ASP.NET MVC 5 uygulamalarının nasıl oluşturulacağını gösterir..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/07/2014
ms.topic: article
ms.assetid: 08834147-77ec-454a-bb7a-d931d2a40dab
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 118233338112a71216b909b1dabed2333bfa235e
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/24/2018
---
<a name="implementing-inheritance-with-the-entity-framework-6-in-an-aspnet-mvc-5-application-11-of-12"></a><span data-ttu-id="9de0d-103">Bir ASP.NET MVC 5 uygulaması (11 / 12) Entity Framework 6 kalıtım uygulama</span><span class="sxs-lookup"><span data-stu-id="9de0d-103">Implementing Inheritance with the Entity Framework 6 in an ASP.NET MVC 5 Application (11 of 12)</span></span>
====================
<span data-ttu-id="9de0d-104">by [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="9de0d-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="9de0d-105">[Tamamlanan projenizi indirin](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) veya [PDF indirin](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="9de0d-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="9de0d-106">Contoso University örnek web uygulaması Entity Framework 6 Code First ve Visual Studio 2013 kullanarak ASP.NET MVC 5 uygulamalarının nasıl oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="9de0d-107">Eğitmen serisi hakkında daha fazla bilgi için bkz: [serideki ilk öğreticide](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="9de0d-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>


<span data-ttu-id="9de0d-108">Önceki öğreticide eşzamanlılık işlenir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-108">In the previous tutorial you handled concurrency exceptions.</span></span> <span data-ttu-id="9de0d-109">Bu öğreticide veri modelinde devralma uygulamak nasıl yapacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-109">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="9de0d-110">Nesne odaklı programlama içinde kullandığınız [devralma](http://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)) kolaylaştırmak için [yeniden kod](http://en.wikipedia.org/wiki/Code_reuse).</span><span class="sxs-lookup"><span data-stu-id="9de0d-110">In object-oriented programming, you can use [inheritance](http://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)) to facilitate [code reuse](http://en.wikipedia.org/wiki/Code_reuse).</span></span> <span data-ttu-id="9de0d-111">Bu öğreticide, değiştireceğiz `Instructor` ve `Student` öğesinden türetilen sınıflara bir `Person` temel gibi özellikler içeren sınıfı `LastName` Eğitmen ve öğrenciler için ortak olan.</span><span class="sxs-lookup"><span data-stu-id="9de0d-111">In this tutorial, you'll change the `Instructor` and `Student` classes so that they derive from a `Person` base class which contains properties such as `LastName` that are common to both instructors and students.</span></span> <span data-ttu-id="9de0d-112">Ekleme veya tüm web sayfalarını değiştirme olmaz ancak bazı kodları değiştireceksiniz ve bu değişiklikleri otomatik olarak veritabanında yansıtılır.</span><span class="sxs-lookup"><span data-stu-id="9de0d-112">You won't add or change any web pages, but you'll change some of the code and those changes will be automatically reflected in the database.</span></span>

## <a name="options-for-mapping-inheritance-to-database-tables"></a><span data-ttu-id="9de0d-113">Veritabanı tablolarında devralma eşleme seçenekleri</span><span class="sxs-lookup"><span data-stu-id="9de0d-113">Options for mapping inheritance to database tables</span></span>

<span data-ttu-id="9de0d-114">`Instructor` Ve `Student` sınıfları `School` veri modeli özdeş çeşitli özellikleri vardır:</span><span class="sxs-lookup"><span data-stu-id="9de0d-114">The `Instructor` and `Student` classes in the `School` data model have several properties that are identical:</span></span>

![Student_and_Instructor_classes](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

<span data-ttu-id="9de0d-116">Tarafından paylaşılan özellikler için yedek kod ortadan kaldırmak istediğinizi varsayalım `Instructor` ve `Student` varlıklar.</span><span class="sxs-lookup"><span data-stu-id="9de0d-116">Suppose you want to eliminate the redundant code for the properties that are shared by the `Instructor` and `Student` entities.</span></span> <span data-ttu-id="9de0d-117">Veya adları adı bir eğitmen veya öğrencinin gelmediğini caring olmadan biçimlendirebilirsiniz bir hizmet yazmak istiyorsanız.</span><span class="sxs-lookup"><span data-stu-id="9de0d-117">Or you want to write a service that can format names without caring whether the name came from an instructor or a student.</span></span> <span data-ttu-id="9de0d-118">Oluşturabilirsiniz bir `Person` temel yalnızca bu özellikleri paylaşılan içeren sınıfı sonra olun `Instructor` ve `Student` varlıklar aşağıdaki çizimde gösterildiği gibi bu taban sınıfından devral:</span><span class="sxs-lookup"><span data-stu-id="9de0d-118">You could create a `Person` base class which contains only those shared properties, then make the `Instructor` and `Student` entities inherit from that base class, as shown in the following illustration:</span></span>

![Student_and_Instructor_classes_deriving_from_Person_class](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="9de0d-120">Bu devralma yapı veritabanında gösterilebilir birkaç yolu vardır.</span><span class="sxs-lookup"><span data-stu-id="9de0d-120">There are several ways this inheritance structure could be represented in the database.</span></span> <span data-ttu-id="9de0d-121">Sahip olabilir bir `Person` Öğrenciler ve tek bir tablodaki Eğitmen hakkında bilgi içeren tablo.</span><span class="sxs-lookup"><span data-stu-id="9de0d-121">You could have a `Person` table that includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="9de0d-122">Bazı sütunları yalnızca eğitmen için geçerli olabilir (`HireDate`), bazı yalnızca Öğrenciler (`EnrollmentDate`), bazı iki (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="9de0d-122">Some of the columns could apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), some to both (`LastName`, `FirstName`).</span></span> <span data-ttu-id="9de0d-123">Genellikle, olurdu bir *Ayrıştırıcıyı* her satır tür belirtmek için sütun temsil eder.</span><span class="sxs-lookup"><span data-stu-id="9de0d-123">Typically, you'd have a *discriminator* column to indicate which type each row represents.</span></span> <span data-ttu-id="9de0d-124">Örneğin, ayrıştırıcı sütunun "Eğitmen" Eğitmen ve "Öğrenci" Öğrenciler için olabilir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-124">For example, the discriminator column might have "Instructor" for instructors and "Student" for students.</span></span>

![Table-per-hierarchy_example](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

<span data-ttu-id="9de0d-126">Bir varlığın devralma yapısı tek veritabanı tablosundan oluşturmanın bu deseni adlı *tablo başına hiyerarşisi* (TPH) devralma.</span><span class="sxs-lookup"><span data-stu-id="9de0d-126">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="9de0d-127">Devralma yapısı gibi daha fazla ara veritabanını yapmak için kullanılan bir alternatiftir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-127">An alternative is to make the database look more like the inheritance structure.</span></span> <span data-ttu-id="9de0d-128">Yalnızca ad alanları gibi olabilir `Person` tablo ve ayrı sahip `Instructor` ve `Student` tarih alanları tablolarla.</span><span class="sxs-lookup"><span data-stu-id="9de0d-128">For example, you could have only the name fields in the `Person` table and have separate `Instructor` and `Student` tables with the date fields.</span></span>

![Tablo başına type_inheritance](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="9de0d-130">Her varlık sınıfı adlı için bir veritabanı tablosu yapma bu deseni *tablo türü başına* (birleştirilmiş TPT) devralma.</span><span class="sxs-lookup"><span data-stu-id="9de0d-130">This pattern of making a database table for each entity class is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="9de0d-131">Henüz başka bir tek tek tablolar için tüm Özet olmayan türlerine eşlemek için bir seçenektir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-131">Yet another option is to map all non-abstract types to individual tables.</span></span> <span data-ttu-id="9de0d-132">Devralınan özellikler de dahil olmak üzere, bir sınıfın tüm özellikleri ilgili tablo sütunlarına eşleyin.</span><span class="sxs-lookup"><span data-stu-id="9de0d-132">All properties of a class, including inherited properties, map to columns of the corresponding table.</span></span> <span data-ttu-id="9de0d-133">Bu desen tablo başına somut sınıfı (TPC) devralma adı verilir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-133">This pattern is called Table-per-Concrete Class (TPC) inheritance.</span></span> <span data-ttu-id="9de0d-134">TPC devralma uygulanırsa `Person`, `Student`, ve `Instructor` sınıfları daha önce gösterildiği gibi `Student` ve `Instructor` tabloları uygulamamız görünecektir farklı Öncekine göre devralma kullanıldıktan sonra.</span><span class="sxs-lookup"><span data-stu-id="9de0d-134">If you implemented TPC inheritance for the `Person`, `Student`, and `Instructor` classes as shown earlier, the `Student` and `Instructor` tables would look no different after implementing inheritance than they did before.</span></span>

<span data-ttu-id="9de0d-135">Birleştirilmiş TPT desenleri karmaşık JOIN sorguları sağladığından TPC ve TPH devralma desenleri genellikle daha iyi performans birleştirilmiş TPT devralma düzenleri daha Entity Framework sunar.</span><span class="sxs-lookup"><span data-stu-id="9de0d-135">TPC and TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span>

<span data-ttu-id="9de0d-136">Bu öğretici nasıl TPH devralma uygulanacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-136">This tutorial demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="9de0d-137">TPH olduğundan Entity Framework varsayılan devralma desende yapmanız gereken tek şey oluşturma bir `Person` sınıfı, değişiklik `Instructor` ve `Student` öğesinden türetilen sınıflar `Person`, yeni sınıf ekleyin `DbContext`ve oluşturma bir geçiş.</span><span class="sxs-lookup"><span data-stu-id="9de0d-137">TPH is the default inheritance pattern in the Entity Framework, so all you have to do is create a `Person` class, change the `Instructor` and `Student` classes to derive from `Person`, add the new class to the `DbContext`, and create a migration.</span></span> <span data-ttu-id="9de0d-138">(Bir devralma desenlerini uygulama hakkında daha fazla bilgi için bkz: [birleştirilmiş tablo başına türü (TPT) devralma eşleme](https://msdn.microsoft.com/data/jj591617#2.5) ve [tablo başına somut sınıfı (TPC) devralma eşleme](https://msdn.microsoft.com/data/jj591617#2.6) MSDN'de Entity Framework belgelerine.)</span><span class="sxs-lookup"><span data-stu-id="9de0d-138">(For information about how to implement the other inheritance patterns, see [Mapping the Table-Per-Type (TPT) Inheritance](https://msdn.microsoft.com/data/jj591617#2.5) and [Mapping the Table-Per-Concrete Class (TPC) Inheritance](https://msdn.microsoft.com/data/jj591617#2.6) in the MSDN Entity Framework documentation.)</span></span>

## <a name="create-the-person-class"></a><span data-ttu-id="9de0d-139">Kişi sınıfı oluşturma</span><span class="sxs-lookup"><span data-stu-id="9de0d-139">Create the Person class</span></span>

<span data-ttu-id="9de0d-140">İçinde *modelleri* klasörü oluşturmak *Person.cs* ve şablon kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="9de0d-140">In the *Models* folder, create *Person.cs* and replace the template code with the following code:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs)]

## <a name="make-student-and-instructor-classes-inherit-from-person"></a><span data-ttu-id="9de0d-141">Kişiden devral Öğrenci ve Eğitmen sınıflarının</span><span class="sxs-lookup"><span data-stu-id="9de0d-141">Make Student and Instructor classes inherit from Person</span></span>

<span data-ttu-id="9de0d-142">İçinde *Instructor.cs*, türetilen `Instructor` sınıfıyla `Person` sınıfı ve anahtar ve ad alanlarını kaldırın.</span><span class="sxs-lookup"><span data-stu-id="9de0d-142">In *Instructor.cs*, derive the `Instructor` class from the `Person` class and remove the key and name fields.</span></span> <span data-ttu-id="9de0d-143">Kod aşağıdaki gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="9de0d-143">The code will look like the following example:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs)]

<span data-ttu-id="9de0d-144">Benzer değişiklik *Student.cs*.</span><span class="sxs-lookup"><span data-stu-id="9de0d-144">Make similar changes to *Student.cs*.</span></span> <span data-ttu-id="9de0d-145">`Student` Sınıfı, aşağıdaki gibi görünür:</span><span class="sxs-lookup"><span data-stu-id="9de0d-145">The `Student` class will look like the following example:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cs)]

## <a name="add-the-person-entity-type-to-the-model"></a><span data-ttu-id="9de0d-146">Kişi varlık türü için Model ekleme</span><span class="sxs-lookup"><span data-stu-id="9de0d-146">Add the Person Entity Type to the Model</span></span>

<span data-ttu-id="9de0d-147">İçinde *SchoolContext.cs*, ekleme bir `DbSet` özelliği için `Person` varlık türü:</span><span class="sxs-lookup"><span data-stu-id="9de0d-147">In *SchoolContext.cs*, add a `DbSet` property for the `Person` entity type:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs)]

<span data-ttu-id="9de0d-148">Entity Framework tablo başına hiyerarşisi devralma yapılandırmak için gereken budur.</span><span class="sxs-lookup"><span data-stu-id="9de0d-148">This is all that the Entity Framework needs in order to configure table-per-hierarchy inheritance.</span></span> <span data-ttu-id="9de0d-149">Veritabanı güncelleştirildiğinde, göreceğiniz gibi sahip bir `Person` yerine tablo `Student` ve `Instructor` tabloları.</span><span class="sxs-lookup"><span data-stu-id="9de0d-149">As you'll see, when the database is updated, it will have a `Person` table in place of the `Student` and `Instructor` tables.</span></span>

## <a name="create-and-update-a-migrations-file"></a><span data-ttu-id="9de0d-150">Oluşturma ve geçişler dosyasını güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="9de0d-150">Create and Update a Migrations File</span></span>

<span data-ttu-id="9de0d-151">Paket Yöneticisi Konsolu (PMC)'da, aşağıdaki komutu girin:</span><span class="sxs-lookup"><span data-stu-id="9de0d-151">In the Package Manager Console (PMC), enter the following command:</span></span>

`Add-Migration Inheritance`

<span data-ttu-id="9de0d-152">Çalıştırma `Update-Database` PMC komutu.</span><span class="sxs-lookup"><span data-stu-id="9de0d-152">Run the `Update-Database` command in the PMC.</span></span> <span data-ttu-id="9de0d-153">Geçişleri nasıl ele alınacağını bilmeniz değil mevcut verileri sahibiz komutu bu noktada başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="9de0d-153">The command will fail at this point because we have existing data that migrations doesn't know how to handle.</span></span> <span data-ttu-id="9de0d-154">Aşağıdakine benzer bir hata iletisi alırsınız:</span><span class="sxs-lookup"><span data-stu-id="9de0d-154">You get an error message like the following one:</span></span>

> <span data-ttu-id="9de0d-155">*Nesne bırakılamıyor ' dbo. Eğitmen ' yabancı anahtar kısıtlaması tarafından başvurulduğu için.*</span><span class="sxs-lookup"><span data-stu-id="9de0d-155">*Could not drop object 'dbo.Instructor' because it is referenced by a FOREIGN KEY constraint.*</span></span>


<span data-ttu-id="9de0d-156">Açık *geçişler\&lt; zaman damgası&gt;\_Inheritance.cs* ve değiştirme `Up` aşağıdaki kod ile yöntemi:</span><span class="sxs-lookup"><span data-stu-id="9de0d-156">Open *Migrations\&lt;timestamp&gt;\_Inheritance.cs* and replace the `Up` method with the following code:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cs)]

<span data-ttu-id="9de0d-157">Bu kod, aşağıdaki veritabanı güncelleştirme görevleri mvc'deki:</span><span class="sxs-lookup"><span data-stu-id="9de0d-157">This code takes care of the following database update tasks:</span></span>

- <span data-ttu-id="9de0d-158">Yabancı anahtar kısıtlamaları ve Öğrenci tabloya noktası dizinleri kaldırır.</span><span class="sxs-lookup"><span data-stu-id="9de0d-158">Removes foreign key constraints and indexes that point to the Student table.</span></span>
- <span data-ttu-id="9de0d-159">Eğitmen tablo kişi olarak yeniden adlandırır ve Öğrenci verileri depolamak gerektiğinde değişiklikleri yapar:</span><span class="sxs-lookup"><span data-stu-id="9de0d-159">Renames the Instructor table as Person and makes changes needed for it to store Student data:</span></span>

    - <span data-ttu-id="9de0d-160">Öğrenciler için boş değer atanabilir EnrollmentDate ekler.</span><span class="sxs-lookup"><span data-stu-id="9de0d-160">Adds nullable EnrollmentDate for students.</span></span>
    - <span data-ttu-id="9de0d-161">Bir satır öğrencinin veya bir eğitmen olup olmadığını belirtmek için ayrıştırıcı sütunun ekler.</span><span class="sxs-lookup"><span data-stu-id="9de0d-161">Adds Discriminator column to indicate whether a row is for a student or an instructor.</span></span>
    - <span data-ttu-id="9de0d-162">Öğrenci satırları seferde olmayacaktır beri İşeAlmaTarihi null atanamaz hale getirir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-162">Makes HireDate nullable since student rows won't have hire dates.</span></span>
    - <span data-ttu-id="9de0d-163">Öğrenciler için noktası yabancı anahtarlar güncelleştirmek için kullanılan geçici bir alan ekler.</span><span class="sxs-lookup"><span data-stu-id="9de0d-163">Adds a temporary field that will be used to update foreign keys that point to students.</span></span> <span data-ttu-id="9de0d-164">Öğrenciler kişi tablosuna kopyaladığınızda, yeni birincil anahtar değerlerinin elde edersiniz.</span><span class="sxs-lookup"><span data-stu-id="9de0d-164">When you copy students into the Person table they'll get new primary key values.</span></span>
- <span data-ttu-id="9de0d-165">Kişi tabloya Öğrenci tablodan veri kopyalar.</span><span class="sxs-lookup"><span data-stu-id="9de0d-165">Copies data from the Student table into the Person table.</span></span> <span data-ttu-id="9de0d-166">Bu, yeni birincil anahtar değerlerinin atanan Öğrenciler neden olur.</span><span class="sxs-lookup"><span data-stu-id="9de0d-166">This causes students to get assigned new primary key values.</span></span>
- <span data-ttu-id="9de0d-167">Öğrenciler için noktası yabancı anahtar değerleri giderir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-167">Fixes foreign key values that point to students.</span></span>
- <span data-ttu-id="9de0d-168">Yabancı anahtar kısıtlamaları ve şimdi kişi tabloya işaret eden dizinleri yeniden oluşturur.</span><span class="sxs-lookup"><span data-stu-id="9de0d-168">Re-creates foreign key constraints and indexes, now pointing them to the Person table.</span></span>

<span data-ttu-id="9de0d-169">(Birincil anahtar türü olarak tamsayı yerine GUID kullandıysanız, Öğrenci birincil anahtar değerlerinin değiştirmek zorunda olmayacaktır ve bu adımların çoğunun atlandı.)</span><span class="sxs-lookup"><span data-stu-id="9de0d-169">(If you had used GUID instead of integer as the primary key type, the student primary key values wouldn't have to change, and several of these steps could have been omitted.)</span></span>

<span data-ttu-id="9de0d-170">Çalıştırma `update-database` yeniden komutu.</span><span class="sxs-lookup"><span data-stu-id="9de0d-170">Run the `update-database` command again.</span></span>

<span data-ttu-id="9de0d-171">(Önceki veritabanı sürümüne geri dönmek için kullanan gerekiyordu durumunda bir üretim sisteminde karşılık gelen aşağı yöntemi değişiklik.</span><span class="sxs-lookup"><span data-stu-id="9de0d-171">(In a production system you would make corresponding changes to the Down method in case you ever had to use that to go back to the previous database version.</span></span> <span data-ttu-id="9de0d-172">Bu öğretici için aşağıya yöntemini kullanıyor olmanız çalışmaz.)</span><span class="sxs-lookup"><span data-stu-id="9de0d-172">For this tutorial you won't be using the Down method.)</span></span>

> [!NOTE]
> <span data-ttu-id="9de0d-173">Veri ve yapma şema değişiklikleri geçirilirken diğer hatalarıyla mümkündür.</span><span class="sxs-lookup"><span data-stu-id="9de0d-173">It's possible to get other errors when migrating data and making schema changes.</span></span> <span data-ttu-id="9de0d-174">Geçiş hataları alırsanız, olamaz gidermek, devam edebilirsiniz eğitici bağlantı dizesinde değiştirerek *Web.config* dosya veya göre veritabanı siliniyor.</span><span class="sxs-lookup"><span data-stu-id="9de0d-174">If you get migration errors you can't resolve, you can continue with the tutorial by changing the connection string in the *Web.config* file or by deleting the database.</span></span> <span data-ttu-id="9de0d-175">Veritabanında yeniden adlandırmak için basit yaklaşımdır *Web.config* dosya.</span><span class="sxs-lookup"><span data-stu-id="9de0d-175">The simplest approach is to rename the database in the *Web.config* file.</span></span> <span data-ttu-id="9de0d-176">Örneğin, veritabanı adını ContosoUniversity2 için aşağıdaki örnekte gösterildiği gibi değiştirin:</span><span class="sxs-lookup"><span data-stu-id="9de0d-176">For example, change the database name to ContosoUniversity2 as shown in the following example:</span></span>
> 
> [!code-xml[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.xml?highlight=2)]
> 
> <span data-ttu-id="9de0d-177">Yeni bir veritabanı ile geçirmek için veri yok ve `update-database` komut hatasız tamamlamak çok daha büyük bir olasılıkla.</span><span class="sxs-lookup"><span data-stu-id="9de0d-177">With a new database, there is no data to migrate, and the `update-database` command is much more likely to complete without errors.</span></span> <span data-ttu-id="9de0d-178">Veritabanını silmek yönergeler için bkz: [Visual Studio 2012'den bir veritabanını bırakmak nasıl](http://romiller.com/2013/05/17/how-to-drop-a-database-from-visual-studio-2012/).</span><span class="sxs-lookup"><span data-stu-id="9de0d-178">For instructions on how to delete the database, see [How to Drop a Database from Visual Studio 2012](http://romiller.com/2013/05/17/how-to-drop-a-database-from-visual-studio-2012/).</span></span> <span data-ttu-id="9de0d-179">Bu öğreticiyi devam edebilmek için bu yaklaşımı benimsemeniz durumunda, bu öğreticinin sonunda dağıtım adımı atlamak veya yeni site ve veritabanı için dağıtın.</span><span class="sxs-lookup"><span data-stu-id="9de0d-179">If you take this approach in order to continue with the tutorial, skip the deployment step at the end of this tutorial or deploy to a new site and database.</span></span> <span data-ttu-id="9de0d-180">Bir güncelleştirmeyi zaten dağıtım siteye dağıtırsanız, geçişler otomatik çalıştırıldığında EF aynı hatayı alırsınız.</span><span class="sxs-lookup"><span data-stu-id="9de0d-180">If you deploy an update to the same site you've been deploying to already, EF will get the same error there when it runs migrations automatically.</span></span> <span data-ttu-id="9de0d-181">Geçişler hata için sorun giderme istiyorsanız, en iyi kaynak Entity Framework forumları veya StackOverflow.com biridir.</span><span class="sxs-lookup"><span data-stu-id="9de0d-181">If you want to troubleshoot a migrations error, the best resource is one of the Entity Framework forums or StackOverflow.com.</span></span>


## <a name="testing"></a><span data-ttu-id="9de0d-182">Sınama</span><span class="sxs-lookup"><span data-stu-id="9de0d-182">Testing</span></span>

<span data-ttu-id="9de0d-183">Siteyi çalıştırın ve çeşitli sayfalar deneyin.</span><span class="sxs-lookup"><span data-stu-id="9de0d-183">Run the site and try various pages.</span></span> <span data-ttu-id="9de0d-184">Önce yaptığınız gibi her şey aynı çalışır.</span><span class="sxs-lookup"><span data-stu-id="9de0d-184">Everything works the same as it did before.</span></span>

<span data-ttu-id="9de0d-185">İçinde **Sunucu Gezgini** genişletin **veri Connections\SchoolContext** ve ardından **tabloları**, ve, gördüğünüz **Öğrenci** ve **Eğitmen** tabloları değiştirilir tarafından bir **kişi** tablo.</span><span class="sxs-lookup"><span data-stu-id="9de0d-185">In **Server Explorer,** expand **Data Connections\SchoolContext** and then **Tables**, and you see that the **Student** and **Instructor** tables have been replaced by a **Person** table.</span></span> <span data-ttu-id="9de0d-186">Genişletme **kişi** tablo göreceksiniz bulunması için kullanılan sütunların tümünün sahip **Öğrenci** ve **Eğitmen** tabloları.</span><span class="sxs-lookup"><span data-stu-id="9de0d-186">Expand the **Person** table and you see that it has all of the columns that used to be in the **Student** and **Instructor** tables.</span></span>

![Server_Explorer_showing_Person_table](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)

<span data-ttu-id="9de0d-188">Kişi tabloyu sağ tıklatın ve ardından **Show Table Data** ayrıştırıcı sütunun görmek için.</span><span class="sxs-lookup"><span data-stu-id="9de0d-188">Right-click the Person table, and then click **Show Table Data** to see the discriminator column.</span></span>

![](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="9de0d-189">Aşağıdaki diyagram yeni Okul veritabanının yapısını gösterir:</span><span class="sxs-lookup"><span data-stu-id="9de0d-189">The following diagram illustrates the structure of the new School database:</span></span>

![School_database_diagram](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image7.png)

## <a name="deploy-to-azure"></a><span data-ttu-id="9de0d-191">Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="9de0d-191">Deploy to Azure</span></span>

<span data-ttu-id="9de0d-192">Bu bölümde isteğe bağlı tamamladınız gerektirir **uygulamayı Azure'a dağıtan** bölümüne [bölümü sıralama, filtreleme ve disk belleği 3](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md) Bu öğretici dizi.</span><span class="sxs-lookup"><span data-stu-id="9de0d-192">This section requires you to have completed the optional **Deploying the app to Azure** section in [Part 3, Sorting, Filtering, and Paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md) of this tutorial series.</span></span> <span data-ttu-id="9de0d-193">Yerel projenizi veritabanında silerek çözülmüş geçişler hatalar varsa, bu adımı atlayın; veya yeni site ve veritabanı oluşturun ve yeni ortamınıza dağıtın.</span><span class="sxs-lookup"><span data-stu-id="9de0d-193">If you had migrations errors that you resolved by deleting the database in your local project, skip this step; or create a new site and database, and deploy to the new environment.</span></span>

1. <span data-ttu-id="9de0d-194">Visual Studio'da'nde projeye sağ **Çözüm Gezgini** seçip **Yayımla** ve bağlam menüsünden.</span><span class="sxs-lookup"><span data-stu-id="9de0d-194">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>  
  
    ![Proje bağlam menüsünde Yayımla](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image8.png)
2. <span data-ttu-id="9de0d-196">Tıklatın **yayımlama**.</span><span class="sxs-lookup"><span data-stu-id="9de0d-196">Click **Publish**.</span></span>  
  
    ![Yayımlama](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image9.png)  
  
 <span data-ttu-id="9de0d-198">Web uygulaması, varsayılan tarayıcıda açılır.</span><span class="sxs-lookup"><span data-stu-id="9de0d-198">The Web app will open in your default browser.</span></span>
3. <span data-ttu-id="9de0d-199">Bunu doğrulamak için uygulamayı test çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="9de0d-199">Test the application to verify it's working.</span></span>

    <span data-ttu-id="9de0d-200">Bir sayfa, ilk kez çalıştırdığınızda veritabanına erişir, Entity Framework tüm geçişler çalıştırılır `Up` veritabanı geçerli veri modeli ile güncel duruma getirmek için gereken yöntemleri.</span><span class="sxs-lookup"><span data-stu-id="9de0d-200">The first time you run a page that accesses the database, the Entity Framework runs all of the migrations `Up` methods required to bring the database up to date with the current data model.</span></span>

## <a name="summary"></a><span data-ttu-id="9de0d-201">Özet</span><span class="sxs-lookup"><span data-stu-id="9de0d-201">Summary</span></span>

<span data-ttu-id="9de0d-202">Tablo başına hiyerarşisi devralma uyguladık `Person`, `Student`, ve `Instructor` sınıfları.</span><span class="sxs-lookup"><span data-stu-id="9de0d-202">You've implemented table-per-hierarchy inheritance for the `Person`, `Student`, and `Instructor` classes.</span></span> <span data-ttu-id="9de0d-203">Bu ve diğer devralma yapıları hakkında daha fazla bilgi için bkz: [birleştirilmiş TPT devralma deseni](https://msdn.microsoft.com/data/jj618293) ve [TPH devralma deseni](https://msdn.microsoft.com/data/jj618292) konusuna bakın.</span><span class="sxs-lookup"><span data-stu-id="9de0d-203">For more information about this and other inheritance structures, see [TPT Inheritance Pattern](https://msdn.microsoft.com/data/jj618293) and [TPH Inheritance Pattern](https://msdn.microsoft.com/data/jj618292) on MSDN.</span></span> <span data-ttu-id="9de0d-204">Sonraki öğreticide çeşitli göreceli olarak Gelişmiş Entity Framework senaryolarda nasıl ele alınacağını görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="9de0d-204">In the next tutorial you'll see how to handle a variety of relatively advanced Entity Framework scenarios.</span></span>

<span data-ttu-id="9de0d-205">Diğer Entity Framework kaynaklarına bağlantılar bulunabilir [ASP.NET Data Access - kaynakları önerilen](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="9de0d-205">Links to other Entity Framework resources can be found in the [ASP.NET Data Access - Recommended Resources](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="9de0d-206">[Önceki](handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application.md)
[sonraki](advanced-entity-framework-scenarios-for-an-mvc-web-application.md)</span><span class="sxs-lookup"><span data-stu-id="9de0d-206">[Previous](handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application.md)
[Next](advanced-entity-framework-scenarios-for-an-mvc-web-application.md)</span></span>
